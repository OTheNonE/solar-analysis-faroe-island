var Kd=Object.defineProperty;var Jd=(e,t,i)=>t in e?Kd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Qd=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var K=(e,t,i)=>(Jd(e,typeof t!="symbol"?t+"":t,i),i);var ew=Qd(Gt=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function qt(){}function Yc(e){return e()}function qh(){return Object.create(null)}function Pi(e){e.forEach(Yc)}function Xc(e){return typeof e=="function"}function qi(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function tg(e){return Object.keys(e).length===0}function Kc(e,...t){if(e==null)return qt;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Le(e){let t;return Kc(e,i=>t=i)(),t}function Os(e,t,i){e.$$.on_destroy.push(Kc(t,i))}function ls(e,t,i){return e.set(i),t}function tt(e,t){e.appendChild(t)}function kt(e,t,i){e.insertBefore(t,i||null)}function wt(e){e.parentNode&&e.parentNode.removeChild(e)}function wa(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function ut(e){return document.createElement(e)}function Vt(e){return document.createTextNode(e)}function Mt(){return Vt(" ")}function eg(){return Vt("")}function ie(e,t,i,n){return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)}function Ct(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function ig(e){return Array.from(e.childNodes)}function oi(e,t){t=""+t,e.data!==t&&(e.data=t)}function dn(e,t){e.value=t??""}function oa(e,t,i){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t){s.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function Uh(e){const t=e.querySelector(":checked");return t&&t.__value}let _s;function cs(e){_s=e}function ng(){if(!_s)throw new Error("Function called outside component initialization");return _s}function br(e){ng().$$.on_mount.push(e)}const cn=[],Ba=[];let bn=[];const Yh=[],sg=Promise.resolve();let Jo=!1;function ag(){Jo||(Jo=!0,sg.then(Jc))}function vs(e){bn.push(e)}const Ro=new Set;let an=0;function Jc(){if(an!==0)return;const e=_s;do{try{for(;an<cn.length;){const t=cn[an];an++,cs(t),og(t.$$)}}catch(t){throw cn.length=0,an=0,t}for(cs(null),cn.length=0,an=0;Ba.length;)Ba.pop()();for(let t=0;t<bn.length;t+=1){const i=bn[t];Ro.has(i)||(Ro.add(i),i())}bn.length=0}while(cn.length);for(;Yh.length;)Yh.pop()();Jo=!1,Ro.clear(),cs(e)}function og(e){if(e.fragment!==null){e.update(),Pi(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(vs)}}function rg(e){const t=[],i=[];bn.forEach(n=>e.indexOf(n)===-1?t.push(n):i.push(n)),i.forEach(n=>n()),bn=t}const Pa=new Set;let hg;function gn(e,t){e&&e.i&&(Pa.delete(e),e.i(t))}function Qn(e,t,i,n){if(e&&e.o){if(Pa.has(e))return;Pa.add(e),hg.c.push(()=>{Pa.delete(e),n&&(i&&e.d(1),n())}),e.o(t)}else n&&n()}function ts(e){e&&e.c()}function mn(e,t,i,n){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,i),n||vs(()=>{const r=e.$$.on_mount.map(Yc).filter(Xc);e.$$.on_destroy?e.$$.on_destroy.push(...r):Pi(r),e.$$.on_mount=[]}),o.forEach(vs)}function pn(e,t){const i=e.$$;i.fragment!==null&&(rg(i.after_update),Pi(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function lg(e,t){e.$$.dirty[0]===-1&&(cn.push(e),ag(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function An(e,t,i,n,s,o,r,l=[-1]){const c=_s;cs(e);const f=e.$$={fragment:null,ctx:[],props:o,update:qt,not_equal:s,bound:qh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:qh(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};r&&r(f.root);let d=!1;if(f.ctx=i?i(e,t.props||{},(m,_,...v)=>{const y=v.length?v[0]:_;return f.ctx&&s(f.ctx[m],f.ctx[m]=y)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](y),d&&lg(e,m)),_}):[],f.update(),d=!0,Pi(f.before_update),f.fragment=n?n(f.ctx):!1,t.target){if(t.hydrate){const m=ig(t.target);f.fragment&&f.fragment.l(m),m.forEach(wt)}else f.fragment&&f.fragment.c();t.intro&&gn(e.$$.fragment),mn(e,t.target,t.anchor,t.customElement),Jc()}cs(c)}class On{$destroy(){pn(this,1),this.$destroy=qt}$on(t,i){if(!Xc(i))return qt;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(i),()=>{const s=n.indexOf(i);s!==-1&&n.splice(s,1)}}$set(t){this.$$set&&!tg(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var No=function(e,t){return Number(e.slice(0,-1*t.length))},cg=function(e){return e.endsWith("px")?{value:e,type:"px",numeric:No(e,"px")}:e.endsWith("fr")?{value:e,type:"fr",numeric:No(e,"fr")}:e.endsWith("%")?{value:e,type:"%",numeric:No(e,"%")}:e==="auto"?{value:e,type:"auto"}:null},Qc=function(e){return e.split(" ").map(cg)},ug=function(e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var s=n?e+1:e,o=t.slice(0,s).reduce(function(l,c){return l+c.numeric},0),r=i?e*i:0;return o+r},tu=function(e,t,i){return t.concat(i).map(function(n){return n.style[e]}).filter(function(n){return n!==void 0&&n!==""})},fg=function(e,t){return t.endsWith(e)?Number(t.slice(0,-1*e.length)):null},Xh=function(e){for(var t=0;t<e.length;t++)if(e[t].numeric>0)return t;return null},Wi=function(){return!1},dg=function(e,t,i){e.style[t]=i},Dt=function(e,t,i){var n=e[t];return n!==void 0?n:i};function eu(e){var t;return(t=[]).concat.apply(t,Array.from(e.ownerDocument.styleSheets).map(function(i){var n=[];try{n=Array.from(i.cssRules||[])}catch{}return n})).filter(function(i){var n=!1;try{n=e.matches(i.selectorText)}catch{}return n})}var gg="grid-template-columns",mg="grid-template-rows",Yt=function(t,i,n){this.direction=t,this.element=i.element,this.track=i.track,t==="column"?(this.gridTemplateProp=gg,this.gridGapProp="grid-column-gap",this.cursor=Dt(n,"columnCursor",Dt(n,"cursor","col-resize")),this.snapOffset=Dt(n,"columnSnapOffset",Dt(n,"snapOffset",30)),this.dragInterval=Dt(n,"columnDragInterval",Dt(n,"dragInterval",1)),this.clientAxis="clientX",this.optionStyle=Dt(n,"gridTemplateColumns")):t==="row"&&(this.gridTemplateProp=mg,this.gridGapProp="grid-row-gap",this.cursor=Dt(n,"rowCursor",Dt(n,"cursor","row-resize")),this.snapOffset=Dt(n,"rowSnapOffset",Dt(n,"snapOffset",30)),this.dragInterval=Dt(n,"rowDragInterval",Dt(n,"dragInterval",1)),this.clientAxis="clientY",this.optionStyle=Dt(n,"gridTemplateRows")),this.onDragStart=Dt(n,"onDragStart",Wi),this.onDragEnd=Dt(n,"onDragEnd",Wi),this.onDrag=Dt(n,"onDrag",Wi),this.writeStyle=Dt(n,"writeStyle",dg),this.startDragging=this.startDragging.bind(this),this.stopDragging=this.stopDragging.bind(this),this.drag=this.drag.bind(this),this.minSizeStart=i.minSizeStart,this.minSizeEnd=i.minSizeEnd,i.element&&(this.element.addEventListener("mousedown",this.startDragging),this.element.addEventListener("touchstart",this.startDragging))};Yt.prototype.getDimensions=function(){var t=this.grid.getBoundingClientRect(),i=t.width,n=t.height,s=t.top,o=t.bottom,r=t.left,l=t.right;this.direction==="column"?(this.start=s,this.end=o,this.size=n):this.direction==="row"&&(this.start=r,this.end=l,this.size=i)};Yt.prototype.getSizeAtTrack=function(t,i){return ug(t,this.computedPixels,this.computedGapPixels,i)};Yt.prototype.getSizeOfTrack=function(t){return this.computedPixels[t].numeric};Yt.prototype.getRawTracks=function(){var t=tu(this.gridTemplateProp,[this.grid],eu(this.grid));if(!t.length){if(this.optionStyle)return this.optionStyle;throw Error("Unable to determine grid template tracks from styles.")}return t[0]};Yt.prototype.getGap=function(){var t=tu(this.gridGapProp,[this.grid],eu(this.grid));return t.length?t[0]:null};Yt.prototype.getRawComputedTracks=function(){return window.getComputedStyle(this.grid)[this.gridTemplateProp]};Yt.prototype.getRawComputedGap=function(){return window.getComputedStyle(this.grid)[this.gridGapProp]};Yt.prototype.setTracks=function(t){this.tracks=t.split(" "),this.trackValues=Qc(t)};Yt.prototype.setComputedTracks=function(t){this.computedTracks=t.split(" "),this.computedPixels=Qc(t)};Yt.prototype.setGap=function(t){this.gap=t};Yt.prototype.setComputedGap=function(t){this.computedGap=t,this.computedGapPixels=fg("px",this.computedGap)||0};Yt.prototype.getMousePosition=function(t){return"touches"in t?t.touches[0][this.clientAxis]:t[this.clientAxis]};Yt.prototype.startDragging=function(t){if(!("button"in t&&t.button!==0)){t.preventDefault(),this.element?this.grid=this.element.parentNode:this.grid=t.target.parentNode,this.getDimensions(),this.setTracks(this.getRawTracks()),this.setComputedTracks(this.getRawComputedTracks()),this.setGap(this.getGap()),this.setComputedGap(this.getRawComputedGap());var i=this.trackValues.filter(function(l){return l.type==="%"}),n=this.trackValues.filter(function(l){return l.type==="fr"});if(this.totalFrs=n.length,this.totalFrs){var s=Xh(n);s!==null&&(this.frToPixels=this.computedPixels[s].numeric/n[s].numeric)}if(i.length){var o=Xh(i);o!==null&&(this.percentageToPixels=this.computedPixels[o].numeric/i[o].numeric)}var r=this.getSizeAtTrack(this.track,!1)+this.start;if(this.dragStartOffset=this.getMousePosition(t)-r,this.aTrack=this.track-1,this.track<this.tracks.length-1)this.bTrack=this.track+1;else throw Error("Invalid track index: "+this.track+". Track must be between two other tracks and only "+this.tracks.length+" tracks were found.");this.aTrackStart=this.getSizeAtTrack(this.aTrack,!1)+this.start,this.bTrackEnd=this.getSizeAtTrack(this.bTrack,!0)+this.start,this.dragging=!0,window.addEventListener("mouseup",this.stopDragging),window.addEventListener("touchend",this.stopDragging),window.addEventListener("touchcancel",this.stopDragging),window.addEventListener("mousemove",this.drag),window.addEventListener("touchmove",this.drag),this.grid.addEventListener("selectstart",Wi),this.grid.addEventListener("dragstart",Wi),this.grid.style.userSelect="none",this.grid.style.webkitUserSelect="none",this.grid.style.MozUserSelect="none",this.grid.style.pointerEvents="none",this.grid.style.cursor=this.cursor,window.document.body.style.cursor=this.cursor,this.onDragStart(this.direction,this.track)}};Yt.prototype.stopDragging=function(){this.dragging=!1,this.cleanup(),this.onDragEnd(this.direction,this.track),this.needsDestroy&&(this.element&&(this.element.removeEventListener("mousedown",this.startDragging),this.element.removeEventListener("touchstart",this.startDragging)),this.destroyCb(),this.needsDestroy=!1,this.destroyCb=null)};Yt.prototype.drag=function(t){var i=this.getMousePosition(t),n=this.getSizeOfTrack(this.track),s=this.aTrackStart+this.minSizeStart+this.dragStartOffset+this.computedGapPixels,o=this.bTrackEnd-this.minSizeEnd-this.computedGapPixels-(n-this.dragStartOffset),r=s+this.snapOffset,l=o-this.snapOffset;i<r&&(i=s),i>l&&(i=o),i<s?i=s:i>o&&(i=o);var c=i-this.aTrackStart-this.dragStartOffset-this.computedGapPixels,f=this.bTrackEnd-i+this.dragStartOffset-n-this.computedGapPixels;if(this.dragInterval>1){var d=Math.round(c/this.dragInterval)*this.dragInterval;f-=d-c,c=d}if(c<this.minSizeStart&&(c=this.minSizeStart),f<this.minSizeEnd&&(f=this.minSizeEnd),this.trackValues[this.aTrack].type==="px")this.tracks[this.aTrack]=c+"px";else if(this.trackValues[this.aTrack].type==="fr")if(this.totalFrs===1)this.tracks[this.aTrack]="1fr";else{var m=c/this.frToPixels;this.tracks[this.aTrack]=m+"fr"}else if(this.trackValues[this.aTrack].type==="%"){var _=c/this.percentageToPixels;this.tracks[this.aTrack]=_+"%"}if(this.trackValues[this.bTrack].type==="px")this.tracks[this.bTrack]=f+"px";else if(this.trackValues[this.bTrack].type==="fr")if(this.totalFrs===1)this.tracks[this.bTrack]="1fr";else{var v=f/this.frToPixels;this.tracks[this.bTrack]=v+"fr"}else if(this.trackValues[this.bTrack].type==="%"){var y=f/this.percentageToPixels;this.tracks[this.bTrack]=y+"%"}var b=this.tracks.join(" ");this.writeStyle(this.grid,this.gridTemplateProp,b),this.onDrag(this.direction,this.track,b)};Yt.prototype.cleanup=function(){window.removeEventListener("mouseup",this.stopDragging),window.removeEventListener("touchend",this.stopDragging),window.removeEventListener("touchcancel",this.stopDragging),window.removeEventListener("mousemove",this.drag),window.removeEventListener("touchmove",this.drag),this.grid&&(this.grid.removeEventListener("selectstart",Wi),this.grid.removeEventListener("dragstart",Wi),this.grid.style.userSelect="",this.grid.style.webkitUserSelect="",this.grid.style.MozUserSelect="",this.grid.style.pointerEvents="",this.grid.style.cursor=""),window.document.body.style.cursor=""};Yt.prototype.destroy=function(t,i){t===void 0&&(t=!0),t||this.dragging===!1?(this.cleanup(),this.element&&(this.element.removeEventListener("mousedown",this.startDragging),this.element.removeEventListener("touchstart",this.startDragging)),i&&i()):(this.needsDestroy=!0,i&&(this.destroyCb=i))};var Kh=function(e,t,i){return t in e?e[t]:i},Sn=function(e,t){return function(i){if(i.track<1)throw Error("Invalid track index: "+i.track+". Track must be between two other tracks.");var n=e==="column"?t.columnMinSizes||{}:t.rowMinSizes||{},s=e==="column"?"columnMinSize":"rowMinSize";return new Yt(e,Object.assign({},{minSizeStart:Kh(n,i.track-1,Dt(t,s,Dt(t,"minSize",0))),minSizeEnd:Kh(n,i.track+1,Dt(t,s,Dt(t,"minSize",0)))},i),t)}},Ui=function(t){var i=this;this.columnGutters={},this.rowGutters={},this.options=Object.assign({},{columnGutters:t.columnGutters||[],rowGutters:t.rowGutters||[],columnMinSizes:t.columnMinSizes||{},rowMinSizes:t.rowMinSizes||{}},t),this.options.columnGutters.forEach(function(n){i.columnGutters[n.track]=Sn("column",i.options)(n)}),this.options.rowGutters.forEach(function(n){i.rowGutters[n.track]=Sn("row",i.options)(n)})};Ui.prototype.addColumnGutter=function(t,i){this.columnGutters[i]&&this.columnGutters[i].destroy(),this.columnGutters[i]=Sn("column",this.options)({element:t,track:i})};Ui.prototype.addRowGutter=function(t,i){this.rowGutters[i]&&this.rowGutters[i].destroy(),this.rowGutters[i]=Sn("row",this.options)({element:t,track:i})};Ui.prototype.removeColumnGutter=function(t,i){var n=this;i===void 0&&(i=!0),this.columnGutters[t]&&this.columnGutters[t].destroy(i,function(){delete n.columnGutters[t]})};Ui.prototype.removeRowGutter=function(t,i){var n=this;i===void 0&&(i=!0),this.rowGutters[t]&&this.rowGutters[t].destroy(i,function(){delete n.rowGutters[t]})};Ui.prototype.handleDragStart=function(t,i,n){i==="column"?(this.columnGutters[n]&&this.columnGutters[n].destroy(),this.columnGutters[n]=Sn("column",this.options)({track:n}),this.columnGutters[n].startDragging(t)):i==="row"&&(this.rowGutters[n]&&this.rowGutters[n].destroy(),this.rowGutters[n]=Sn("row",this.options)({track:n}),this.rowGutters[n].startDragging(t))};Ui.prototype.destroy=function(t){var i=this;t===void 0&&(t=!0),Object.keys(this.columnGutters).forEach(function(n){return i.columnGutters[n].destroy(t,function(){delete i.columnGutters[n]})}),Object.keys(this.rowGutters).forEach(function(n){return i.rowGutters[n].destroy(t,function(){delete i.rowGutters[n]})})};function pg(e){return new Ui(e)}const on=[];function _g(e,t=qt){let i;const n=new Set;function s(l){if(qi(e,l)&&(e=l,i)){const c=!on.length;for(const f of n)f[1](),on.push(f,e);if(c){for(let f=0;f<on.length;f+=2)on[f][0](on[f+1]);on.length=0}}}function o(l){s(l(e))}function r(l,c=qt){const f=[l,c];return n.add(f),n.size===1&&(i=t(s)||qt),l(e),()=>{n.delete(f),n.size===0&&i&&(i(),i=null)}}return{set:s,update:o,subscribe:r}}const Qo=["Hillshade","Sunrise","Sunset"];let vg={map:void 0,chart:{chart:void 0,selected:[],sun:void 0,chartType:"Hillshade"},heightMap:void 0,stored:{ridges:[]},settings:{dv:1,radius:1e4/2,d_min:100,center_of_FO:{x:205700,y:884500}}},_t=_g(vg);var yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var o=Function.bind.apply(t,s);return new o}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),i}var ys={},bg={get exports(){return ys},set exports(e){ys=e}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(i,n){n(t)})(yg,function(i){var n="1.9.3";function s(a){var h,u,g,p;for(u=1,g=arguments.length;u<g;u++){p=arguments[u];for(h in p)a[h]=p[h]}return a}var o=Object.create||function(){function a(){}return function(h){return a.prototype=h,new a}}();function r(a,h){var u=Array.prototype.slice;if(a.bind)return a.bind.apply(a,u.call(arguments,1));var g=u.call(arguments,2);return function(){return a.apply(h,g.length?g.concat(u.call(arguments)):arguments)}}var l=0;function c(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function f(a,h,u){var g,p,x,P;return P=function(){g=!1,p&&(x.apply(u,p),p=!1)},x=function(){g?p=arguments:(a.apply(u,arguments),setTimeout(P,h),g=!0)},x}function d(a,h,u){var g=h[1],p=h[0],x=g-p;return a===g&&u?a:((a-p)%x+x)%x+p}function m(){return!1}function _(a,h){if(h===!1)return a;var u=Math.pow(10,h===void 0?6:h);return Math.round(a*u)/u}function v(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function y(a){return v(a).split(/\s+/)}function b(a,h){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?o(a.options):{});for(var u in h)a.options[u]=h[u];return a.options}function M(a,h,u){var g=[];for(var p in a)g.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(a[p]));return(!h||h.indexOf("?")===-1?"?":"&")+g.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function S(a,h){return a.replace(w,function(u,g){var p=h[g];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(h)),p})}var k=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function E(a,h){for(var u=0;u<a.length;u++)if(a[u]===h)return u;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var I=0;function z(a){var h=+new Date,u=Math.max(0,16-(h-I));return I=h+u,window.setTimeout(a,u)}var W=window.requestAnimationFrame||O("RequestAnimationFrame")||z,Z=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function j(a,h,u){if(u&&W===z)a.call(h);else return W.call(window,r(a,h))}function Y(a){a&&Z.call(window,a)}var it={__proto__:null,extend:s,create:o,bind:r,get lastId(){return l},stamp:c,throttle:f,wrapNum:d,falseFn:m,formatNum:_,trim:v,splitWords:y,setOptions:b,getParamString:M,template:S,isArray:k,indexOf:E,emptyImageUrl:T,requestFn:W,cancelFn:Z,requestAnimFrame:j,cancelAnimFrame:Y};function H(){}H.extend=function(a){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=h.__super__=this.prototype,g=o(u);g.constructor=h,h.prototype=g;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(h[p]=this[p]);return a.statics&&s(h,a.statics),a.includes&&($(a.includes),s.apply(null,[g].concat(a.includes))),s(g,a),delete g.statics,delete g.includes,g.options&&(g.options=u.options?o(u.options):{},s(g.options,a.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,P=g._initHooks.length;x<P;x++)g._initHooks[x].call(this)}},h},H.include=function(a){var h=this.prototype.options;return s(this.prototype,a),a.options&&(this.prototype.options=h,this.mergeOptions(a.options)),this},H.mergeOptions=function(a){return s(this.prototype.options,a),this},H.addInitHook=function(a){var h=Array.prototype.slice.call(arguments,1),u=typeof a=="function"?a:function(){this[a].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function $(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=k(a)?a:[a];for(var h=0;h<a.length;h++)a[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(a,h,u){if(typeof a=="object")for(var g in a)this._on(g,a[g],h);else{a=y(a);for(var p=0,x=a.length;p<x;p++)this._on(a[p],h,u)}return this},off:function(a,h,u){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var g in a)this._off(g,a[g],h);else{a=y(a);for(var p=arguments.length===1,x=0,P=a.length;x<P;x++)p?this._off(a[x]):this._off(a[x],h,u)}return this},_on:function(a,h,u,g){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(a,h,u)===!1){u===this&&(u=void 0);var p={fn:h,ctx:u};g&&(p.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(p)}},_off:function(a,h,u){var g,p,x;if(this._events&&(g=this._events[a],!!g)){if(arguments.length===1){if(this._firingCount)for(p=0,x=g.length;p<x;p++)g[p].fn=m;delete this._events[a];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var P=this._listens(a,h,u);if(P!==!1){var C=g[P];this._firingCount&&(C.fn=m,this._events[a]=g=g.slice()),g.splice(P,1)}}},fire:function(a,h,u){if(!this.listens(a,u))return this;var g=s({},h,{type:a,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var p=this._events[a];if(p){this._firingCount=this._firingCount+1||1;for(var x=0,P=p.length;x<P;x++){var C=p[x],A=C.fn;C.once&&this.off(a,A,C.ctx),A.call(C.ctx||this,g)}this._firingCount--}}return u&&this._propagateEvent(g),this},listens:function(a,h,u,g){typeof a!="string"&&console.warn('"string" type argument expected');var p=h;typeof h!="function"&&(g=!!h,p=void 0,u=void 0);var x=this._events&&this._events[a];if(x&&x.length&&this._listens(a,p,u)!==!1)return!0;if(g){for(var P in this._eventParents)if(this._eventParents[P].listens(a,h,u,g))return!0}return!1},_listens:function(a,h,u){if(!this._events)return!1;var g=this._events[a]||[];if(!h)return!!g.length;u===this&&(u=void 0);for(var p=0,x=g.length;p<x;p++)if(g[p].fn===h&&g[p].ctx===u)return p;return!1},once:function(a,h,u){if(typeof a=="object")for(var g in a)this._on(g,a[g],h,!0);else{a=y(a);for(var p=0,x=a.length;p<x;p++)this._on(a[p],h,u,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[c(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[c(a)],this},_propagateEvent:function(a){for(var h in this._eventParents)this._eventParents[h].fire(a.type,s({layer:a.target,propagatedFrom:a.target},a),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var st=H.extend(X);function N(a,h,u){this.x=u?Math.round(a):a,this.y=u?Math.round(h):h}var ft=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};N.prototype={clone:function(){return new N(this.x,this.y)},add:function(a){return this.clone()._add(D(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(D(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new N(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new N(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ft(this.x),this.y=ft(this.y),this},distanceTo:function(a){a=D(a);var h=a.x-this.x,u=a.y-this.y;return Math.sqrt(h*h+u*u)},equals:function(a){return a=D(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=D(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function D(a,h,u){return a instanceof N?a:k(a)?new N(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new N(a.x,a.y):new N(a,h,u)}function B(a,h){if(a)for(var u=h?[a,h]:a,g=0,p=u.length;g<p;g++)this.extend(u[g])}B.prototype={extend:function(a){var h,u;if(!a)return this;if(a instanceof N||typeof a[0]=="number"||"x"in a)h=u=D(a);else if(a=q(a),h=a.min,u=a.max,!h||!u)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=u.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(a){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var h,u;return typeof a[0]=="number"||a instanceof N?a=D(a):a=q(a),a instanceof B?(h=a.min,u=a.max):h=u=a,h.x>=this.min.x&&u.x<=this.max.x&&h.y>=this.min.y&&u.y<=this.max.y},intersects:function(a){a=q(a);var h=this.min,u=this.max,g=a.min,p=a.max,x=p.x>=h.x&&g.x<=u.x,P=p.y>=h.y&&g.y<=u.y;return x&&P},overlaps:function(a){a=q(a);var h=this.min,u=this.max,g=a.min,p=a.max,x=p.x>h.x&&g.x<u.x,P=p.y>h.y&&g.y<u.y;return x&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var h=this.min,u=this.max,g=Math.abs(h.x-u.x)*a,p=Math.abs(h.y-u.y)*a;return q(D(h.x-g,h.y-p),D(u.x+g,u.y+p))},equals:function(a){return a?(a=q(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function q(a,h){return!a||a instanceof B?a:new B(a,h)}function J(a,h){if(a)for(var u=h?[a,h]:a,g=0,p=u.length;g<p;g++)this.extend(u[g])}J.prototype={extend:function(a){var h=this._southWest,u=this._northEast,g,p;if(a instanceof Q)g=a,p=a;else if(a instanceof J){if(g=a._southWest,p=a._northEast,!g||!p)return this}else return a?this.extend(nt(a)||at(a)):this;return!h&&!u?(this._southWest=new Q(g.lat,g.lng),this._northEast=new Q(p.lat,p.lng)):(h.lat=Math.min(g.lat,h.lat),h.lng=Math.min(g.lng,h.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(a){var h=this._southWest,u=this._northEast,g=Math.abs(h.lat-u.lat)*a,p=Math.abs(h.lng-u.lng)*a;return new J(new Q(h.lat-g,h.lng-p),new Q(u.lat+g,u.lng+p))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Q||"lat"in a?a=nt(a):a=at(a);var h=this._southWest,u=this._northEast,g,p;return a instanceof J?(g=a.getSouthWest(),p=a.getNorthEast()):g=p=a,g.lat>=h.lat&&p.lat<=u.lat&&g.lng>=h.lng&&p.lng<=u.lng},intersects:function(a){a=at(a);var h=this._southWest,u=this._northEast,g=a.getSouthWest(),p=a.getNorthEast(),x=p.lat>=h.lat&&g.lat<=u.lat,P=p.lng>=h.lng&&g.lng<=u.lng;return x&&P},overlaps:function(a){a=at(a);var h=this._southWest,u=this._northEast,g=a.getSouthWest(),p=a.getNorthEast(),x=p.lat>h.lat&&g.lat<u.lat,P=p.lng>h.lng&&g.lng<u.lng;return x&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,h){return a?(a=at(a),this._southWest.equals(a.getSouthWest(),h)&&this._northEast.equals(a.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function at(a,h){return a instanceof J?a:new J(a,h)}function Q(a,h,u){if(isNaN(a)||isNaN(h))throw new Error("Invalid LatLng object: ("+a+", "+h+")");this.lat=+a,this.lng=+h,u!==void 0&&(this.alt=+u)}Q.prototype={equals:function(a,h){if(!a)return!1;a=nt(a);var u=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return u<=(h===void 0?1e-9:h)},toString:function(a){return"LatLng("+_(this.lat,a)+", "+_(this.lng,a)+")"},distanceTo:function(a){return St.distance(this,nt(a))},wrap:function(){return St.wrapLatLng(this)},toBounds:function(a){var h=180*a/40075017,u=h/Math.cos(Math.PI/180*this.lat);return at([this.lat-h,this.lng-u],[this.lat+h,this.lng+u])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function nt(a,h,u){return a instanceof Q?a:k(a)&&typeof a[0]!="object"?a.length===3?new Q(a[0],a[1],a[2]):a.length===2?new Q(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Q(a.lat,"lng"in a?a.lng:a.lon,a.alt):h===void 0?null:new Q(a,h,u)}var mt={latLngToPoint:function(a,h){var u=this.projection.project(a),g=this.scale(h);return this.transformation._transform(u,g)},pointToLatLng:function(a,h){var u=this.scale(h),g=this.transformation.untransform(a,u);return this.projection.unproject(g)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var h=this.projection.bounds,u=this.scale(a),g=this.transformation.transform(h.min,u),p=this.transformation.transform(h.max,u);return new B(g,p)},infinite:!1,wrapLatLng:function(a){var h=this.wrapLng?d(a.lng,this.wrapLng,!0):a.lng,u=this.wrapLat?d(a.lat,this.wrapLat,!0):a.lat,g=a.alt;return new Q(u,h,g)},wrapLatLngBounds:function(a){var h=a.getCenter(),u=this.wrapLatLng(h),g=h.lat-u.lat,p=h.lng-u.lng;if(g===0&&p===0)return a;var x=a.getSouthWest(),P=a.getNorthEast(),C=new Q(x.lat-g,x.lng-p),A=new Q(P.lat-g,P.lng-p);return new J(C,A)}},St=s({},mt,{wrapLng:[-180,180],R:6371e3,distance:function(a,h){var u=Math.PI/180,g=a.lat*u,p=h.lat*u,x=Math.sin((h.lat-a.lat)*u/2),P=Math.sin((h.lng-a.lng)*u/2),C=x*x+Math.cos(g)*Math.cos(p)*P*P,A=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*A}}),Xt=6378137,oe={R:Xt,MAX_LATITUDE:85.0511287798,project:function(a){var h=Math.PI/180,u=this.MAX_LATITUDE,g=Math.max(Math.min(u,a.lat),-u),p=Math.sin(g*h);return new N(this.R*a.lng*h,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(a){var h=180/Math.PI;return new Q((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*h,a.x*h/this.R)},bounds:function(){var a=Xt*Math.PI;return new B([-a,-a],[a,a])}()};function ce(a,h,u,g){if(k(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=h,this._c=u,this._d=g}ce.prototype={transform:function(a,h){return this._transform(a.clone(),h)},_transform:function(a,h){return h=h||1,a.x=h*(this._a*a.x+this._b),a.y=h*(this._c*a.y+this._d),a},untransform:function(a,h){return h=h||1,new N((a.x/h-this._b)/this._a,(a.y/h-this._d)/this._c)}};function re(a,h,u,g){return new ce(a,h,u,g)}var Ce=s({},St,{code:"EPSG:3857",projection:oe,transformation:function(){var a=.5/(Math.PI*oe.R);return re(a,.5,-a,.5)}()}),xe=s({},Ce,{code:"EPSG:900913"});function be(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ue(a,h){var u="",g,p,x,P,C,A;for(g=0,x=a.length;g<x;g++){for(C=a[g],p=0,P=C.length;p<P;p++)A=C[p],u+=(p?"L":"M")+A.x+" "+A.y;u+=h?et.svg?"z":"x":""}return u||"M0 0"}var ue=document.documentElement.style,Qt="ActiveXObject"in window,Ee=Qt&&!document.addEventListener,Ye="msLaunchUri"in navigator&&!("documentMode"in document),te=Ne("webkit"),ki=Ne("android"),Zr=Ne("android 2")||Ne("android 3"),Cf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ef=ki&&Ne("Google")&&Cf<537&&!("AudioNode"in window),oo=!!window.opera,jr=!Ye&&Ne("chrome"),Gr=Ne("gecko")&&!te&&!oo&&!Qt,Af=!jr&&Ne("safari"),Vr=Ne("phantom"),$r="OTransition"in ue,Of=navigator.platform.indexOf("Win")===0,qr=Qt&&"transition"in ue,ro="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zr,Ur="MozPerspective"in ue,If=!window.L_DISABLE_3D&&(qr||ro||Ur)&&!$r&&!Vr,zn=typeof orientation<"u"||Ne("mobile"),zf=zn&&te,Df=zn&&ro,Yr=!window.PointerEvent&&window.MSPointerEvent,Xr=!!(window.PointerEvent||Yr),Kr="ontouchstart"in window||!!window.TouchEvent,Rf=!window.L_NO_TOUCH&&(Kr||Xr),Nf=zn&&oo,Bf=zn&&Gr,Ff=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Wf=function(){var a=!1;try{var h=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",m,h),window.removeEventListener("testPassiveEventSupport",m,h)}catch{}return a}(),Hf=function(){return!!document.createElement("canvas").getContext}(),ho=!!(document.createElementNS&&be("svg").createSVGRect),Zf=!!ho&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),jf=!ho&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var h=a.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Gf=navigator.platform.indexOf("Mac")===0,Vf=navigator.platform.indexOf("Linux")===0;function Ne(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var et={ie:Qt,ielt9:Ee,edge:Ye,webkit:te,android:ki,android23:Zr,androidStock:Ef,opera:oo,chrome:jr,gecko:Gr,safari:Af,phantom:Vr,opera12:$r,win:Of,ie3d:qr,webkit3d:ro,gecko3d:Ur,any3d:If,mobile:zn,mobileWebkit:zf,mobileWebkit3d:Df,msPointer:Yr,pointer:Xr,touch:Rf,touchNative:Kr,mobileOpera:Nf,mobileGecko:Bf,retina:Ff,passiveEvents:Wf,canvas:Hf,svg:ho,vml:jf,inlineSvg:Zf,mac:Gf,linux:Vf},Jr=et.msPointer?"MSPointerDown":"pointerdown",Qr=et.msPointer?"MSPointerMove":"pointermove",th=et.msPointer?"MSPointerUp":"pointerup",eh=et.msPointer?"MSPointerCancel":"pointercancel",lo={touchstart:Jr,touchmove:Qr,touchend:th,touchcancel:eh},ih={touchstart:Kf,touchmove:Hs,touchend:Hs,touchcancel:Hs},Xi={},nh=!1;function $f(a,h,u){return h==="touchstart"&&Xf(),ih[h]?(u=ih[h].bind(this,u),a.addEventListener(lo[h],u,!1),u):(console.warn("wrong event specified:",h),m)}function qf(a,h,u){if(!lo[h]){console.warn("wrong event specified:",h);return}a.removeEventListener(lo[h],u,!1)}function Uf(a){Xi[a.pointerId]=a}function Yf(a){Xi[a.pointerId]&&(Xi[a.pointerId]=a)}function sh(a){delete Xi[a.pointerId]}function Xf(){nh||(document.addEventListener(Jr,Uf,!0),document.addEventListener(Qr,Yf,!0),document.addEventListener(th,sh,!0),document.addEventListener(eh,sh,!0),nh=!0)}function Hs(a,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var u in Xi)h.touches.push(Xi[u]);h.changedTouches=[h],a(h)}}function Kf(a,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Kt(h),Hs(a,h)}function Jf(a){var h={},u,g;for(g in a)u=a[g],h[g]=u&&u.bind?u.bind(a):u;return a=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Qf=200;function td(a,h){a.addEventListener("dblclick",h);var u=0,g;function p(x){if(x.detail!==1){g=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var P=lh(x);if(!(P.some(function(A){return A instanceof HTMLLabelElement&&A.attributes.for})&&!P.some(function(A){return A instanceof HTMLInputElement||A instanceof HTMLSelectElement}))){var C=Date.now();C-u<=Qf?(g++,g===2&&h(Jf(x))):g=1,u=C}}}return a.addEventListener("click",p),{dblclick:h,simDblclick:p}}function ed(a,h){a.removeEventListener("dblclick",h.dblclick),a.removeEventListener("click",h.simDblclick)}var co=Gs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Dn=Gs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ah=Dn==="webkitTransition"||Dn==="OTransition"?Dn+"End":"transitionend";function oh(a){return typeof a=="string"?document.getElementById(a):a}function Rn(a,h){var u=a.style[h]||a.currentStyle&&a.currentStyle[h];if((!u||u==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(a,null);u=g?g[h]:null}return u==="auto"?null:u}function yt(a,h,u){var g=document.createElement(a);return g.className=h||"",u&&u.appendChild(g),g}function It(a){var h=a.parentNode;h&&h.removeChild(a)}function Zs(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ki(a){var h=a.parentNode;h&&h.lastChild!==a&&h.appendChild(a)}function Ji(a){var h=a.parentNode;h&&h.firstChild!==a&&h.insertBefore(a,h.firstChild)}function uo(a,h){if(a.classList!==void 0)return a.classList.contains(h);var u=js(a);return u.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(u)}function ct(a,h){if(a.classList!==void 0)for(var u=y(h),g=0,p=u.length;g<p;g++)a.classList.add(u[g]);else if(!uo(a,h)){var x=js(a);fo(a,(x?x+" ":"")+h)}}function Ft(a,h){a.classList!==void 0?a.classList.remove(h):fo(a,v((" "+js(a)+" ").replace(" "+h+" "," ")))}function fo(a,h){a.className.baseVal===void 0?a.className=h:a.className.baseVal=h}function js(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Me(a,h){"opacity"in a.style?a.style.opacity=h:"filter"in a.style&&id(a,h)}function id(a,h){var u=!1,g="DXImageTransform.Microsoft.Alpha";try{u=a.filters.item(g)}catch{if(h===1)return}h=Math.round(h*100),u?(u.Enabled=h!==100,u.Opacity=h):a.style.filter+=" progid:"+g+"(opacity="+h+")"}function Gs(a){for(var h=document.documentElement.style,u=0;u<a.length;u++)if(a[u]in h)return a[u];return!1}function Li(a,h,u){var g=h||new N(0,0);a.style[co]=(et.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(u?" scale("+u+")":"")}function Zt(a,h){a._leaflet_pos=h,et.any3d?Li(a,h):(a.style.left=h.x+"px",a.style.top=h.y+"px")}function Ti(a){return a._leaflet_pos||new N(0,0)}var Nn,Bn,go;if("onselectstart"in document)Nn=function(){ht(window,"selectstart",Kt)},Bn=function(){Lt(window,"selectstart",Kt)};else{var Fn=Gs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Nn=function(){if(Fn){var a=document.documentElement.style;go=a[Fn],a[Fn]="none"}},Bn=function(){Fn&&(document.documentElement.style[Fn]=go,go=void 0)}}function mo(){ht(window,"dragstart",Kt)}function po(){Lt(window,"dragstart",Kt)}var Vs,_o;function vo(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&($s(),Vs=a,_o=a.style.outline,a.style.outline="none",ht(window,"keydown",$s))}function $s(){Vs&&(Vs.style.outline=_o,Vs=void 0,_o=void 0,Lt(window,"keydown",$s))}function rh(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function yo(a){var h=a.getBoundingClientRect();return{x:h.width/a.offsetWidth||1,y:h.height/a.offsetHeight||1,boundingClientRect:h}}var nd={__proto__:null,TRANSFORM:co,TRANSITION:Dn,TRANSITION_END:ah,get:oh,getStyle:Rn,create:yt,remove:It,empty:Zs,toFront:Ki,toBack:Ji,hasClass:uo,addClass:ct,removeClass:Ft,setClass:fo,getClass:js,setOpacity:Me,testProp:Gs,setTransform:Li,setPosition:Zt,getPosition:Ti,get disableTextSelection(){return Nn},get enableTextSelection(){return Bn},disableImageDrag:mo,enableImageDrag:po,preventOutline:vo,restoreOutline:$s,getSizedParentNode:rh,getScale:yo};function ht(a,h,u,g){if(h&&typeof h=="object")for(var p in h)bo(a,p,h[p],u);else{h=y(h);for(var x=0,P=h.length;x<P;x++)bo(a,h[x],u,g)}return this}var Be="_leaflet_events";function Lt(a,h,u,g){if(arguments.length===1)hh(a),delete a[Be];else if(h&&typeof h=="object")for(var p in h)Mo(a,p,h[p],u);else if(h=y(h),arguments.length===2)hh(a,function(C){return E(h,C)!==-1});else for(var x=0,P=h.length;x<P;x++)Mo(a,h[x],u,g);return this}function hh(a,h){for(var u in a[Be]){var g=u.split(/\d/)[0];(!h||h(g))&&Mo(a,g,null,null,u)}}var xo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bo(a,h,u,g){var p=h+c(u)+(g?"_"+c(g):"");if(a[Be]&&a[Be][p])return this;var x=function(C){return u.call(g||a,C||window.event)},P=x;!et.touchNative&&et.pointer&&h.indexOf("touch")===0?x=$f(a,h,x):et.touch&&h==="dblclick"?x=td(a,x):"addEventListener"in a?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?a.addEventListener(xo[h]||h,x,et.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(x=function(C){C=C||window.event,Po(a,C)&&P(C)},a.addEventListener(xo[h],x,!1)):a.addEventListener(h,P,!1):a.attachEvent("on"+h,x),a[Be]=a[Be]||{},a[Be][p]=x}function Mo(a,h,u,g,p){p=p||h+c(u)+(g?"_"+c(g):"");var x=a[Be]&&a[Be][p];if(!x)return this;!et.touchNative&&et.pointer&&h.indexOf("touch")===0?qf(a,h,x):et.touch&&h==="dblclick"?ed(a,x):"removeEventListener"in a?a.removeEventListener(xo[h]||h,x,!1):a.detachEvent("on"+h,x),a[Be][p]=null}function Ci(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function wo(a){return bo(a,"wheel",Ci),this}function Wn(a){return ht(a,"mousedown touchstart dblclick contextmenu",Ci),a._leaflet_disable_click=!0,this}function Kt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Ei(a){return Kt(a),Ci(a),this}function lh(a){if(a.composedPath)return a.composedPath();for(var h=[],u=a.target;u;)h.push(u),u=u.parentNode;return h}function ch(a,h){if(!h)return new N(a.clientX,a.clientY);var u=yo(h),g=u.boundingClientRect;return new N((a.clientX-g.left)/u.x-h.clientLeft,(a.clientY-g.top)/u.y-h.clientTop)}var sd=et.linux&&et.chrome?window.devicePixelRatio:et.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function uh(a){return et.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/sd:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Po(a,h){var u=h.relatedTarget;if(!u)return!0;try{for(;u&&u!==a;)u=u.parentNode}catch{return!1}return u!==a}var ad={__proto__:null,on:ht,off:Lt,stopPropagation:Ci,disableScrollPropagation:wo,disableClickPropagation:Wn,preventDefault:Kt,stop:Ei,getPropagationPath:lh,getMousePosition:ch,getWheelDelta:uh,isExternalTarget:Po,addListener:ht,removeListener:Lt},fh=st.extend({run:function(a,h,u,g){this.stop(),this._el=a,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=Ti(a),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(a){var h=+new Date-this._startTime,u=this._duration*1e3;h<u?this._runFrame(this._easeOut(h/u),a):(this._runFrame(1),this._complete())},_runFrame:function(a,h){var u=this._startPos.add(this._offset.multiplyBy(a));h&&u._round(),Zt(this._el,u),this.fire("step")},_complete:function(){Y(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),pt=st.extend({options:{crs:Ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(nt(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Dn&&et.any3d&&!et.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ht(this._proxy,ah,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,h,u){if(h=h===void 0?this._zoom:this._limitZoom(h),a=this._limitCenter(nt(a),h,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var g=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,h,u.zoom):this._tryAnimatedPan(a,u.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(a,h,u.pan&&u.pan.noMoveStart),this},setZoom:function(a,h){return this._loaded?this.setView(this.getCenter(),a,{zoom:h}):(this._zoom=a,this)},zoomIn:function(a,h){return a=a||(et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,h)},zoomOut:function(a,h){return a=a||(et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,h)},setZoomAround:function(a,h,u){var g=this.getZoomScale(h),p=this.getSize().divideBy(2),x=a instanceof N?a:this.latLngToContainerPoint(a),P=x.subtract(p).multiplyBy(1-1/g),C=this.containerPointToLatLng(p.add(P));return this.setView(C,h,{zoom:u})},_getBoundsCenterZoom:function(a,h){h=h||{},a=a.getBounds?a.getBounds():at(a);var u=D(h.paddingTopLeft||h.padding||[0,0]),g=D(h.paddingBottomRight||h.padding||[0,0]),p=this.getBoundsZoom(a,!1,u.add(g));if(p=typeof h.maxZoom=="number"?Math.min(h.maxZoom,p):p,p===1/0)return{center:a.getCenter(),zoom:p};var x=g.subtract(u).divideBy(2),P=this.project(a.getSouthWest(),p),C=this.project(a.getNorthEast(),p),A=this.unproject(P.add(C).divideBy(2).add(x),p);return{center:A,zoom:p}},fitBounds:function(a,h){if(a=at(a),!a.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(a,h);return this.setView(u.center,u.zoom,h)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,h){return this.setView(a,this._zoom,{pan:h})},panBy:function(a,h){if(a=D(a).round(),h=h||{},!a.x&&!a.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){ct(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,u,h.duration||.25,h.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,h,u){if(u=u||{},u.animate===!1||!et.any3d)return this.setView(a,h,u);this._stop();var g=this.project(this.getCenter()),p=this.project(a),x=this.getSize(),P=this._zoom;a=nt(a),h=h===void 0?P:h;var C=Math.max(x.x,x.y),A=C*this.getZoomScale(P,h),R=p.distanceTo(g)||1,V=1.42,ot=V*V;function dt(jt){var aa=jt?-1:1,qd=jt?A:C,Ud=A*A-C*C+aa*ot*ot*R*R,Yd=2*qd*ot*R,Do=Ud/Yd,$h=Math.sqrt(Do*Do+1)-Do,Xd=$h<1e-9?-18:Math.log($h);return Xd}function Pe(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function Oi(jt){return(Math.exp(jt)+Math.exp(-jt))/2}function sa(jt){return Pe(jt)/Oi(jt)}var di=dt(0);function zo(jt){return C*(Oi(di)/Oi(di+V*jt))}function jd(jt){return C*(Oi(di)*sa(di+V*jt)-Pe(di))/ot}function Gd(jt){return 1-Math.pow(1-jt,1.5)}var Vd=Date.now(),Gh=(dt(1)-di)/V,$d=u.duration?1e3*u.duration:1e3*Gh*.8;function Vh(){var jt=(Date.now()-Vd)/$d,aa=Gd(jt)*Gh;jt<=1?(this._flyToFrame=j(Vh,this),this._move(this.unproject(g.add(p.subtract(g).multiplyBy(jd(aa)/R)),P),this.getScaleZoom(C/zo(aa),P),{flyTo:!0})):this._move(a,h)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Vh.call(this),this},flyToBounds:function(a,h){var u=this._getBoundsCenterZoom(a,h);return this.flyTo(u.center,u.zoom,h)},setMaxBounds:function(a){return a=at(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var h=this.options.minZoom;return this.options.minZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var h=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&h!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,h){this._enforcingBounds=!0;var u=this.getCenter(),g=this._limitCenter(u,this._zoom,at(a));return u.equals(g)||this.panTo(g,h),this._enforcingBounds=!1,this},panInside:function(a,h){h=h||{};var u=D(h.paddingTopLeft||h.padding||[0,0]),g=D(h.paddingBottomRight||h.padding||[0,0]),p=this.project(this.getCenter()),x=this.project(a),P=this.getPixelBounds(),C=q([P.min.add(u),P.max.subtract(g)]),A=C.getSize();if(!C.contains(x)){this._enforcingBounds=!0;var R=x.subtract(C.getCenter()),V=C.extend(x).getSize().subtract(A);p.x+=R.x<0?-V.x:V.x,p.y+=R.y<0?-V.y:V.y,this.panTo(this.unproject(p),h),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=s({animate:!1,pan:!0},a===!0?{animate:!0}:a);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),g=h.divideBy(2).round(),p=u.divideBy(2).round(),x=g.subtract(p);return!x.x&&!x.y?this:(a.animate&&a.pan?this.panBy(x):(a.pan&&this._rawPanBy(x),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=s({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=r(this._handleGeolocationResponse,this),u=r(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,u,a):navigator.geolocation.getCurrentPosition(h,u,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var h=a.code,u=a.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var h=a.coords.latitude,u=a.coords.longitude,g=new Q(h,u),p=g.toBounds(a.coords.accuracy*2),x=this._locateOptions;if(x.setView){var P=this.getBoundsZoom(p);this.setView(g,x.maxZoom?Math.min(P,x.maxZoom):P)}var C={latlng:g,bounds:p,timestamp:a.timestamp};for(var A in a.coords)typeof a.coords[A]=="number"&&(C[A]=a.coords[A]);this.fire("locationfound",C)}},addHandler:function(a,h){if(!h)return this;var u=this[a]=new h(this);return this._handlers.push(u),this.options[a]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),It(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Y(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)It(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,h){var u="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),g=yt("div",u,h||this._mapPane);return a&&(this._panes[a]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),h=this.unproject(a.getBottomLeft()),u=this.unproject(a.getTopRight());return new J(h,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,h,u){a=at(a),u=D(u||[0,0]);var g=this.getZoom()||0,p=this.getMinZoom(),x=this.getMaxZoom(),P=a.getNorthWest(),C=a.getSouthEast(),A=this.getSize().subtract(u),R=q(this.project(C,g),this.project(P,g)).getSize(),V=et.any3d?this.options.zoomSnap:1,ot=A.x/R.x,dt=A.y/R.y,Pe=h?Math.max(ot,dt):Math.min(ot,dt);return g=this.getScaleZoom(Pe,g),V&&(g=Math.round(g/(V/100))*(V/100),g=h?Math.ceil(g/V)*V:Math.floor(g/V)*V),Math.max(p,Math.min(x,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,h){var u=this._getTopLeftPoint(a,h);return new B(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,h){var u=this.options.crs;return h=h===void 0?this._zoom:h,u.scale(a)/u.scale(h)},getScaleZoom:function(a,h){var u=this.options.crs;h=h===void 0?this._zoom:h;var g=u.zoom(a*u.scale(h));return isNaN(g)?1/0:g},project:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(nt(a),h)},unproject:function(a,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(D(a),h)},layerPointToLatLng:function(a){var h=D(a).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(a){var h=this.project(nt(a))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(nt(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(at(a))},distance:function(a,h){return this.options.crs.distance(nt(a),nt(h))},containerPointToLayerPoint:function(a){return D(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return D(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var h=this.containerPointToLayerPoint(D(a));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(nt(a)))},mouseEventToContainerPoint:function(a){return ch(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var h=this._container=oh(a);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ht(h,"scroll",this._onScroll,this),this._containerId=c(h)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&et.any3d,ct(a,"leaflet-container"+(et.touch?" leaflet-touch":"")+(et.retina?" leaflet-retina":"")+(et.ielt9?" leaflet-oldie":"")+(et.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Rn(a,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Zt(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ct(a.markerPane,"leaflet-zoom-hide"),ct(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,h,u){Zt(this._mapPane,new N(0,0));var g=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var p=this._zoom!==h;this._moveStart(p,u)._move(a,h)._moveEnd(p),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(a,h){return a&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(a,h,u,g){h===void 0&&(h=this._zoom);var p=this._zoom!==h;return this._zoom=h,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),g?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Y(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Zt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[c(this._container)]=this;var h=a?Lt:ht;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),et.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Y(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,h){for(var u=[],g,p=h==="mouseout"||h==="mouseover",x=a.target||a.srcElement,P=!1;x;){if(g=this._targets[c(x)],g&&(h==="click"||h==="preclick")&&this._draggableMoved(g)){P=!0;break}if(g&&g.listens(h,!0)&&(p&&!Po(x,a)||(u.push(g),p))||x===this._container)break;x=x.parentNode}return!u.length&&!P&&!p&&this.listens(h,!0)&&(u=[this]),u},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var h=a.target||a.srcElement;if(!(!this._loaded||h._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(h))){var u=a.type;u==="mousedown"&&vo(h),this._fireDOMEvent(a,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,h,u){if(a.type==="click"){var g=s({},a);g.type="preclick",this._fireDOMEvent(g,g.type,u)}var p=this._findEventTargets(a,h);if(u){for(var x=[],P=0;P<u.length;P++)u[P].listens(h,!0)&&x.push(u[P]);p=x.concat(p)}if(p.length){h==="contextmenu"&&Kt(a);var C=p[0],A={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var R=C.getLatLng&&(!C._radius||C._radius<=10);A.containerPoint=R?this.latLngToContainerPoint(C.getLatLng()):this.mouseEventToContainerPoint(a),A.layerPoint=this.containerPointToLayerPoint(A.containerPoint),A.latlng=R?C.getLatLng():this.layerPointToLatLng(A.layerPoint)}for(P=0;P<p.length;P++)if(p[P].fire(h,A,!0),A.originalEvent._stopped||p[P].options.bubblingMouseEvents===!1&&E(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,h=this._handlers.length;a<h;a++)this._handlers[a].disable()},whenReady:function(a,h){return this._loaded?a.call(h||this,{target:this}):this.on("load",a,h),this},_getMapPanePos:function(){return Ti(this._mapPane)||new N(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,h){var u=a&&h!==void 0?this._getNewPixelOrigin(a,h):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,h){var u=this.getSize()._divideBy(2);return this.project(a,h)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,h,u){var g=this._getNewPixelOrigin(u,h);return this.project(a,h)._subtract(g)},_latLngBoundsToNewLayerBounds:function(a,h,u){var g=this._getNewPixelOrigin(u,h);return q([this.project(a.getSouthWest(),h)._subtract(g),this.project(a.getNorthWest(),h)._subtract(g),this.project(a.getSouthEast(),h)._subtract(g),this.project(a.getNorthEast(),h)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,h,u){if(!u)return a;var g=this.project(a,h),p=this.getSize().divideBy(2),x=new B(g.subtract(p),g.add(p)),P=this._getBoundsOffset(x,u,h);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?a:this.unproject(g.add(P),h)},_limitOffset:function(a,h){if(!h)return a;var u=this.getPixelBounds(),g=new B(u.min.add(a),u.max.add(a));return a.add(this._getBoundsOffset(g,h))},_getBoundsOffset:function(a,h,u){var g=q(this.project(h.getNorthEast(),u),this.project(h.getSouthWest(),u)),p=g.min.subtract(a.min),x=g.max.subtract(a.max),P=this._rebound(p.x,-x.x),C=this._rebound(p.y,-x.y);return new N(P,C)},_rebound:function(a,h){return a+h>0?Math.round(a-h)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(h))},_limitZoom:function(a){var h=this.getMinZoom(),u=this.getMaxZoom(),g=et.any3d?this.options.zoomSnap:1;return g&&(a=Math.round(a/g)*g),Math.max(h,Math.min(u,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ft(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,h){var u=this._getCenterOffset(a)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,h),!0)},_createAnimProxy:function(){var a=this._proxy=yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(h){var u=co,g=this._proxy.style[u];Li(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),g===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){It(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),h=this.getZoom();Li(this._proxy,this.project(a,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,h,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(h),p=this._getCenterOffset(a)._divideBy(1-1/g);return u.animate!==!0&&!this.getSize().contains(p)?!1:(j(function(){this._moveStart(!0,!1)._animateZoom(a,h,!0)},this),!0)},_animateZoom:function(a,h,u,g){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=h,ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:h,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ft(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function od(a,h){return new pt(a,h)}var Ae=H.extend({options:{position:"topright"},initialize:function(a){b(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var h=this._map;return h&&h.removeControl(this),this.options.position=a,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var h=this._container=this.onAdd(a),u=this.getPosition(),g=a._controlCorners[u];return ct(h,"leaflet-control"),u.indexOf("bottom")!==-1?g.insertBefore(h,g.firstChild):g.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(It(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Hn=function(a){return new Ae(a)};pt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},h="leaflet-",u=this._controlContainer=yt("div",h+"control-container",this._container);function g(p,x){var P=h+p+" "+h+x;a[p+x]=yt("div",P,u)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)It(this._controlCorners[a]);It(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var dh=Ae.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,h,u,g){return u<g?-1:g<u?1:0}},initialize:function(a,h,u){b(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var g in a)this._addLayer(a[g],g);for(g in h)this._addLayer(h[g],g,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Ae.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,h){return this._addLayer(a,h),this._map?this._update():this},addOverlay:function(a,h){return this._addLayer(a,h,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var h=this._getLayer(c(a));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Ft(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ft(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",h=this._container=yt("div",a),u=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Wn(h),wo(h);var g=this._section=yt("section",a+"-list");u&&(this._map.on("click",this.collapse,this),ht(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=yt("a",a+"-toggle",h);p.href="#",p.title="Layers",p.setAttribute("role","button"),ht(p,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){Kt(x),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=yt("div",a+"-base",g),this._separator=yt("div",a+"-separator",g),this._overlaysList=yt("div",a+"-overlays",g),h.appendChild(g)},_getLayer:function(a){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&c(this._layers[h].layer)===a)return this._layers[h]},_addLayer:function(a,h,u){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:h,overlay:u}),this.options.sortLayers&&this._layers.sort(r(function(g,p){return this.options.sortFunction(g.layer,p.layer,g.name,p.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zs(this._baseLayersList),Zs(this._overlaysList),this._layerControlInputs=[];var a,h,u,g,p=0;for(u=0;u<this._layers.length;u++)g=this._layers[u],this._addItem(g),h=h||g.overlay,a=a||!g.overlay,p+=g.overlay?0:1;return this.options.hideSingleBase&&(a=a&&p>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=h&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var h=this._getLayer(c(a.target)),u=h.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;u&&this._map.fire(u,h)},_createRadioElement:function(a,h){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(h?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=u,g.firstChild},_addItem:function(a){var h=document.createElement("label"),u=this._map.hasLayer(a.layer),g;a.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=u):g=this._createRadioElement("leaflet-base-layers_"+c(this),u),this._layerControlInputs.push(g),g.layerId=c(a.layer),ht(g,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+a.name;var x=document.createElement("span");h.appendChild(x),x.appendChild(g),x.appendChild(p);var P=a.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){var a=this._layerControlInputs,h,u,g=[],p=[];this._handlingClick=!0;for(var x=a.length-1;x>=0;x--)h=a[x],u=this._getLayer(h.layerId).layer,h.checked?g.push(u):h.checked||p.push(u);for(x=0;x<p.length;x++)this._map.hasLayer(p[x])&&this._map.removeLayer(p[x]);for(x=0;x<g.length;x++)this._map.hasLayer(g[x])||this._map.addLayer(g[x]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,h,u,g=this._map.getZoom(),p=a.length-1;p>=0;p--)h=a[p],u=this._getLayer(h.layerId).layer,h.disabled=u.options.minZoom!==void 0&&g<u.options.minZoom||u.options.maxZoom!==void 0&&g>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;ht(a,"click",Kt),this.expand(),setTimeout(function(){Lt(a,"click",Kt)})}}),rd=function(a,h,u){return new dh(a,h,u)},So=Ae.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var h="leaflet-control-zoom",u=yt("div",h+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,h+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,h+"-out",u,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,h,u,g,p){var x=yt("a",u,g);return x.innerHTML=a,x.href="#",x.title=h,x.setAttribute("role","button"),x.setAttribute("aria-label",h),Wn(x),ht(x,"click",Ei),ht(x,"click",p,this),ht(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var a=this._map,h="leaflet-disabled";Ft(this._zoomInButton,h),Ft(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(ct(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(ct(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});pt.mergeOptions({zoomControl:!0}),pt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new So,this.addControl(this.zoomControl))});var hd=function(a){return new So(a)},gh=Ae.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var h="leaflet-control-scale",u=yt("div",h),g=this.options;return this._addScales(g,h+"-line",u),a.on(g.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),u},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,h,u){a.metric&&(this._mScale=yt("div",h,u)),a.imperial&&(this._iScale=yt("div",h,u))},_update:function(){var a=this._map,h=a.getSize().y/2,u=a.distance(a.containerPointToLatLng([0,h]),a.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(u)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var h=this._getRoundNum(a),u=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,u,h/a)},_updateImperial:function(a){var h=a*3.2808399,u,g,p;h>5280?(u=h/5280,g=this._getRoundNum(u),this._updateScale(this._iScale,g+" mi",g/u)):(p=this._getRoundNum(h),this._updateScale(this._iScale,p+" ft",p/h))},_updateScale:function(a,h,u){a.style.width=Math.round(this.options.maxWidth*u)+"px",a.innerHTML=h},_getRoundNum:function(a){var h=Math.pow(10,(Math.floor(a)+"").length-1),u=a/h;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,h*u}}),ld=function(a){return new gh(a)},cd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ko=Ae.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(et.inlineSvg?cd+" ":"")+"Leaflet</a>"},initialize:function(a){b(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=yt("div","leaflet-control-attribution"),Wn(this._container);for(var h in a._layers)a._layers[h].getAttribution&&this.addAttribution(a._layers[h].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var h in this._attributions)this._attributions[h]&&a.push(h);var u=[];this.options.prefix&&u.push(this.options.prefix),a.length&&u.push(a.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});pt.mergeOptions({attributionControl:!0}),pt.addInitHook(function(){this.options.attributionControl&&new ko().addTo(this)});var ud=function(a){return new ko(a)};Ae.Layers=dh,Ae.Zoom=So,Ae.Scale=gh,Ae.Attribution=ko,Hn.layers=rd,Hn.zoom=hd,Hn.scale=ld,Hn.attribution=ud;var Fe=H.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Fe.addTo=function(a,h){return a.addHandler(h,this),this};var fd={Events:X},mh=et.touch?"touchstart mousedown":"mousedown",ui=st.extend({options:{clickTolerance:3},initialize:function(a,h,u,g){b(this,g),this._element=a,this._dragStartTarget=h||a,this._preventOutline=u},enable:function(){this._enabled||(ht(this._dragStartTarget,mh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ui._dragging===this&&this.finishDrag(!0),Lt(this._dragStartTarget,mh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!uo(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){ui._dragging===this&&this.finishDrag();return}if(!(ui._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(ui._dragging=this,this._preventOutline&&vo(this._element),mo(),Nn(),!this._moving)){this.fire("down");var h=a.touches?a.touches[0]:a,u=rh(this._element);this._startPoint=new N(h.clientX,h.clientY),this._startPos=Ti(this._element),this._parentScale=yo(u);var g=a.type==="mousedown";ht(document,g?"mousemove":"touchmove",this._onMove,this),ht(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var h=a.touches&&a.touches.length===1?a.touches[0]:a,u=new N(h.clientX,h.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,Kt(a),this._moved||(this.fire("dragstart"),this._moved=!0,ct(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Zt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Ft(document.body,"leaflet-dragging"),this._lastTarget&&(Ft(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Lt(document,"mousemove touchmove",this._onMove,this),Lt(document,"mouseup touchend touchcancel",this._onUp,this),po(),Bn(),this._moved&&this._moving&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,ui._dragging=!1}});function ph(a,h){if(!h||!a.length)return a.slice();var u=h*h;return a=md(a,u),a=gd(a,u),a}function _h(a,h,u){return Math.sqrt(Zn(a,h,u,!0))}function dd(a,h,u){return Zn(a,h,u)}function gd(a,h){var u=a.length,g=typeof Uint8Array!=void 0+""?Uint8Array:Array,p=new g(u);p[0]=p[u-1]=1,Lo(a,p,h,0,u-1);var x,P=[];for(x=0;x<u;x++)p[x]&&P.push(a[x]);return P}function Lo(a,h,u,g,p){var x=0,P,C,A;for(C=g+1;C<=p-1;C++)A=Zn(a[C],a[g],a[p],!0),A>x&&(P=C,x=A);x>u&&(h[P]=1,Lo(a,h,u,g,P),Lo(a,h,u,P,p))}function md(a,h){for(var u=[a[0]],g=1,p=0,x=a.length;g<x;g++)pd(a[g],a[p])>h&&(u.push(a[g]),p=g);return p<x-1&&u.push(a[x-1]),u}var vh;function yh(a,h,u,g,p){var x=g?vh:Ai(a,u),P=Ai(h,u),C,A,R;for(vh=P;;){if(!(x|P))return[a,h];if(x&P)return!1;C=x||P,A=qs(a,h,C,u,p),R=Ai(A,u),C===x?(a=A,x=R):(h=A,P=R)}}function qs(a,h,u,g,p){var x=h.x-a.x,P=h.y-a.y,C=g.min,A=g.max,R,V;return u&8?(R=a.x+x*(A.y-a.y)/P,V=A.y):u&4?(R=a.x+x*(C.y-a.y)/P,V=C.y):u&2?(R=A.x,V=a.y+P*(A.x-a.x)/x):u&1&&(R=C.x,V=a.y+P*(C.x-a.x)/x),new N(R,V,p)}function Ai(a,h){var u=0;return a.x<h.min.x?u|=1:a.x>h.max.x&&(u|=2),a.y<h.min.y?u|=4:a.y>h.max.y&&(u|=8),u}function pd(a,h){var u=h.x-a.x,g=h.y-a.y;return u*u+g*g}function Zn(a,h,u,g){var p=h.x,x=h.y,P=u.x-p,C=u.y-x,A=P*P+C*C,R;return A>0&&(R=((a.x-p)*P+(a.y-x)*C)/A,R>1?(p=u.x,x=u.y):R>0&&(p+=P*R,x+=C*R)),P=a.x-p,C=a.y-x,g?P*P+C*C:new N(p,x)}function we(a){return!k(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function xh(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),we(a)}function bh(a,h){var u,g,p,x,P,C,A,R;if(!a||a.length===0)throw new Error("latlngs not passed");we(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var V=[];for(var ot in a)V.push(h.project(nt(a[ot])));var dt=V.length;for(u=0,g=0;u<dt-1;u++)g+=V[u].distanceTo(V[u+1])/2;if(g===0)R=V[0];else for(u=0,x=0;u<dt-1;u++)if(P=V[u],C=V[u+1],p=P.distanceTo(C),x+=p,x>g){A=(x-g)/p,R=[C.x-A*(C.x-P.x),C.y-A*(C.y-P.y)];break}return h.unproject(D(R))}var _d={__proto__:null,simplify:ph,pointToSegmentDistance:_h,closestPointOnSegment:dd,clipSegment:yh,_getEdgeIntersection:qs,_getBitCode:Ai,_sqClosestPointOnSegment:Zn,isFlat:we,_flat:xh,polylineCenter:bh};function Mh(a,h,u){var g,p=[1,4,2,8],x,P,C,A,R,V,ot,dt;for(x=0,V=a.length;x<V;x++)a[x]._code=Ai(a[x],h);for(C=0;C<4;C++){for(ot=p[C],g=[],x=0,V=a.length,P=V-1;x<V;P=x++)A=a[x],R=a[P],A._code&ot?R._code&ot||(dt=qs(R,A,ot,h,u),dt._code=Ai(dt,h),g.push(dt)):(R._code&ot&&(dt=qs(R,A,ot,h,u),dt._code=Ai(dt,h),g.push(dt)),g.push(A));a=g}return a}function wh(a,h){var u,g,p,x,P,C,A,R,V;if(!a||a.length===0)throw new Error("latlngs not passed");we(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var ot=[];for(var dt in a)ot.push(h.project(nt(a[dt])));var Pe=ot.length;for(C=A=R=0,u=0,g=Pe-1;u<Pe;g=u++)p=ot[u],x=ot[g],P=p.y*x.x-x.y*p.x,A+=(p.x+x.x)*P,R+=(p.y+x.y)*P,C+=P*3;return C===0?V=ot[0]:V=[A/C,R/C],h.unproject(D(V))}var vd={__proto__:null,clipPolygon:Mh,polygonCenter:wh},To={project:function(a){return new N(a.lng,a.lat)},unproject:function(a){return new Q(a.y,a.x)},bounds:new B([-180,-90],[180,90])},Co={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var h=Math.PI/180,u=this.R,g=a.lat*h,p=this.R_MINOR/u,x=Math.sqrt(1-p*p),P=x*Math.sin(g),C=Math.tan(Math.PI/4-g/2)/Math.pow((1-P)/(1+P),x/2);return g=-u*Math.log(Math.max(C,1e-10)),new N(a.lng*h*u,g)},unproject:function(a){for(var h=180/Math.PI,u=this.R,g=this.R_MINOR/u,p=Math.sqrt(1-g*g),x=Math.exp(-a.y/u),P=Math.PI/2-2*Math.atan(x),C=0,A=.1,R;C<15&&Math.abs(A)>1e-7;C++)R=p*Math.sin(P),R=Math.pow((1-R)/(1+R),p/2),A=Math.PI/2-2*Math.atan(x*R)-P,P+=A;return new Q(P*h,a.x*h/u)}},yd={__proto__:null,LonLat:To,Mercator:Co,SphericalMercator:oe},xd=s({},St,{code:"EPSG:3395",projection:Co,transformation:function(){var a=.5/(Math.PI*Co.R);return re(a,.5,-a,.5)}()}),Ph=s({},St,{code:"EPSG:4326",projection:To,transformation:re(1/180,1,-1/180,.5)}),bd=s({},mt,{projection:To,transformation:re(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,h){var u=h.lng-a.lng,g=h.lat-a.lat;return Math.sqrt(u*u+g*g)},infinite:!0});mt.Earth=St,mt.EPSG3395=xd,mt.EPSG3857=Ce,mt.EPSG900913=xe,mt.EPSG4326=Ph,mt.Simple=bd;var Oe=st.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[c(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[c(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var h=a.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var u=this.getEvents();h.on(u,this),this.once("remove",function(){h.off(u,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});pt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var h=c(a);return this._layers[h]?this:(this._layers[h]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var h=c(a);return this._layers[h]?(this._loaded&&a.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return c(a)in this._layers},eachLayer:function(a,h){for(var u in this._layers)a.call(h,this._layers[u]);return this},_addLayers:function(a){a=a?k(a)?a:[a]:[];for(var h=0,u=a.length;h<u;h++)this.addLayer(a[h])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[c(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var h=c(a);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,h=-1/0,u=this._getZoomSpan();for(var g in this._zoomBoundLayers){var p=this._zoomBoundLayers[g].options;a=p.minZoom===void 0?a:Math.min(a,p.minZoom),h=p.maxZoom===void 0?h:Math.max(h,p.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=a===1/0?void 0:a,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qi=Oe.extend({initialize:function(a,h){b(this,h),this._layers={};var u,g;if(a)for(u=0,g=a.length;u<g;u++)this.addLayer(a[u])},addLayer:function(a){var h=this.getLayerId(a);return this._layers[h]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var h=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(a){var h=typeof a=="number"?a:this.getLayerId(a);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var h=Array.prototype.slice.call(arguments,1),u,g;for(u in this._layers)g=this._layers[u],g[a]&&g[a].apply(g,h);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,h){for(var u in this._layers)a.call(h,this._layers[u]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c(a)}}),Md=function(a,h){return new Qi(a,h)},Xe=Qi.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Qi.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Qi.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new J;for(var h in this._layers){var u=this._layers[h];a.extend(u.getBounds?u.getBounds():u.getLatLng())}return a}}),wd=function(a,h){return new Xe(a,h)},tn=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){b(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,h){var u=this._getIconUrl(a);if(!u){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(u,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(g,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(a,h){var u=this.options,g=u[h+"Size"];typeof g=="number"&&(g=[g,g]);var p=D(g),x=D(h==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));a.className="leaflet-marker-"+h+" "+(u.className||""),x&&(a.style.marginLeft=-x.x+"px",a.style.marginTop=-x.y+"px"),p&&(a.style.width=p.x+"px",a.style.height=p.y+"px")},_createImg:function(a,h){return h=h||document.createElement("img"),h.src=a,h},_getIconUrl:function(a){return et.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Pd(a){return new tn(a)}var jn=tn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof jn.imagePath!="string"&&(jn.imagePath=this._detectIconPath()),(this.options.imagePath||jn.imagePath)+tn.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var h=function(u,g,p){var x=g.exec(u);return x&&x[p]};return a=h(a,/^url\((['"])?(.+)\1\)$/,2),a&&h(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=yt("div","leaflet-default-icon-path",document.body),h=Rn(a,"background-image")||Rn(a,"backgroundImage");if(document.body.removeChild(a),h=this._stripUrl(h),h)return h;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Sh=Fe.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new ui(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ct(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ft(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var h=this._marker,u=h._map,g=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,x=Ti(h._icon),P=u.getPixelBounds(),C=u.getPixelOrigin(),A=q(P.min._subtract(C).add(p),P.max._subtract(C).subtract(p));if(!A.contains(x)){var R=D((Math.max(A.max.x,x.x)-A.max.x)/(P.max.x-A.max.x)-(Math.min(A.min.x,x.x)-A.min.x)/(P.min.x-A.min.x),(Math.max(A.max.y,x.y)-A.max.y)/(P.max.y-A.max.y)-(Math.min(A.min.y,x.y)-A.min.y)/(P.min.y-A.min.y)).multiplyBy(g);u.panBy(R,{animate:!1}),this._draggable._newPos._add(R),this._draggable._startPos._add(R),Zt(h._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=j(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Y(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,a)))},_onDrag:function(a){var h=this._marker,u=h._shadow,g=Ti(h._icon),p=h._map.layerPointToLatLng(g);u&&Zt(u,g),h._latlng=p,a.latlng=p,a.oldLatLng=this._oldLatLng,h.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Y(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Us=Oe.extend({options:{icon:new jn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,h){b(this,h),this._latlng=nt(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var h=this._latlng;return this._latlng=nt(a),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=a.icon.createIcon(this._icon),g=!1;u!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(u.title=a.title),u.tagName==="IMG"&&(u.alt=a.alt||"")),ct(u,h),a.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(u,"focus",this._panOnFocus,this);var p=a.icon.createShadow(this._shadow),x=!1;p!==this._shadow&&(this._removeShadow(),x=!0),p&&(ct(p,h),p.alt=""),this._shadow=p,a.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&x&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Lt(this._icon,"focus",this._panOnFocus,this),It(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&It(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Zt(this._icon,a),this._shadow&&Zt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Sh)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Sh(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Me(this._icon,a),this._shadow&&Me(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var h=this.options.icon.options,u=h.iconSize?D(h.iconSize):D(0,0),g=h.iconAnchor?D(h.iconAnchor):D(0,0);a.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:u.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Sd(a,h){return new Us(a,h)}var fi=Oe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return b(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ys=fi.extend({options:{fill:!0,radius:10},initialize:function(a,h){b(this,h),this._latlng=nt(a),this._radius=this.options.radius},setLatLng:function(a){var h=this._latlng;return this._latlng=nt(a),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var h=a&&a.radius||this._radius;return fi.prototype.setStyle.call(this,a),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,h=this._radiusY||a,u=this._clickTolerance(),g=[a+u,h+u];this._pxBounds=new B(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function kd(a,h){return new Ys(a,h)}var Eo=Ys.extend({initialize:function(a,h,u){if(typeof h=="number"&&(h=s({},u,{radius:h})),b(this,h),this._latlng=nt(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new J(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:fi.prototype.setStyle,_project:function(){var a=this._latlng.lng,h=this._latlng.lat,u=this._map,g=u.options.crs;if(g.distance===St.distance){var p=Math.PI/180,x=this._mRadius/St.R/p,P=u.project([h+x,a]),C=u.project([h-x,a]),A=P.add(C).divideBy(2),R=u.unproject(A).lat,V=Math.acos((Math.cos(x*p)-Math.sin(h*p)*Math.sin(R*p))/(Math.cos(h*p)*Math.cos(R*p)))/p;(isNaN(V)||V===0)&&(V=x/Math.cos(Math.PI/180*h)),this._point=A.subtract(u.getPixelOrigin()),this._radius=isNaN(V)?0:A.x-u.project([R,a-V]).x,this._radiusY=A.y-P.y}else{var ot=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(ot).x}this._updateBounds()}});function Ld(a,h,u){return new Eo(a,h,u)}var Ke=fi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,h){b(this,h),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var h=1/0,u=null,g=Zn,p,x,P=0,C=this._parts.length;P<C;P++)for(var A=this._parts[P],R=1,V=A.length;R<V;R++){p=A[R-1],x=A[R];var ot=g(a,p,x,!0);ot<h&&(h=ot,u=g(a,p,x))}return u&&(u.distance=Math.sqrt(h)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,h){return h=h||this._defaultShape(),a=nt(a),h.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new J,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return we(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var h=[],u=we(a),g=0,p=a.length;g<p;g++)u?(h[g]=nt(a[g]),this._bounds.extend(h[g])):h[g]=this._convertLatLngs(a[g]);return h},_project:function(){var a=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),h=new N(a,a);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(a,h,u){var g=a[0]instanceof Q,p=a.length,x,P;if(g){for(P=[],x=0;x<p;x++)P[x]=this._map.latLngToLayerPoint(a[x]),u.extend(P[x]);h.push(P)}else for(x=0;x<p;x++)this._projectLatlngs(a[x],h,u)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,u,g,p,x,P,C,A;for(u=0,p=0,x=this._rings.length;u<x;u++)for(A=this._rings[u],g=0,P=A.length;g<P-1;g++)C=yh(A[g],A[g+1],a,g,!0),C&&(h[p]=h[p]||[],h[p].push(C[0]),(C[1]!==A[g+1]||g===P-2)&&(h[p].push(C[1]),p++))}},_simplifyPoints:function(){for(var a=this._parts,h=this.options.smoothFactor,u=0,g=a.length;u<g;u++)a[u]=ph(a[u],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,h){var u,g,p,x,P,C,A=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(u=0,x=this._parts.length;u<x;u++)for(C=this._parts[u],g=0,P=C.length,p=P-1;g<P;p=g++)if(!(!h&&g===0)&&_h(a,C[p],C[g])<=A)return!0;return!1}});function Td(a,h){return new Ke(a,h)}Ke._flat=xh;var en=Ke.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var h=Ke.prototype._convertLatLngs.call(this,a),u=h.length;return u>=2&&h[0]instanceof Q&&h[0].equals(h[u-1])&&h.pop(),h},_setLatLngs:function(a){Ke.prototype._setLatLngs.call(this,a),we(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return we(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,h=this.options.weight,u=new N(h,h);if(a=new B(a.min.subtract(u),a.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,p=this._rings.length,x;g<p;g++)x=Mh(this._rings[g],a,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var h=!1,u,g,p,x,P,C,A,R;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(x=0,A=this._parts.length;x<A;x++)for(u=this._parts[x],P=0,R=u.length,C=R-1;P<R;C=P++)g=u[P],p=u[C],g.y>a.y!=p.y>a.y&&a.x<(p.x-g.x)*(a.y-g.y)/(p.y-g.y)+g.x&&(h=!h);return h||Ke.prototype._containsPoint.call(this,a,!0)}});function Cd(a,h){return new en(a,h)}var Je=Xe.extend({initialize:function(a,h){b(this,h),this._layers={},a&&this.addData(a)},addData:function(a){var h=k(a)?a:a.features,u,g,p;if(h){for(u=0,g=h.length;u<g;u++)p=h[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var x=this.options;if(x.filter&&!x.filter(a))return this;var P=Xs(a,x);return P?(P.feature=Qs(a),P.defaultOptions=P.options,this.resetStyle(P),x.onEachFeature&&x.onEachFeature(a,P),this.addLayer(P)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=s({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(h){this._setLayerStyle(h,a)},this)},_setLayerStyle:function(a,h){a.setStyle&&(typeof h=="function"&&(h=h(a.feature)),a.setStyle(h))}});function Xs(a,h){var u=a.type==="Feature"?a.geometry:a,g=u?u.coordinates:null,p=[],x=h&&h.pointToLayer,P=h&&h.coordsToLatLng||Ao,C,A,R,V;if(!g&&!u)return null;switch(u.type){case"Point":return C=P(g),kh(x,a,C,h);case"MultiPoint":for(R=0,V=g.length;R<V;R++)C=P(g[R]),p.push(kh(x,a,C,h));return new Xe(p);case"LineString":case"MultiLineString":return A=Ks(g,u.type==="LineString"?0:1,P),new Ke(A,h);case"Polygon":case"MultiPolygon":return A=Ks(g,u.type==="Polygon"?1:2,P),new en(A,h);case"GeometryCollection":for(R=0,V=u.geometries.length;R<V;R++){var ot=Xs({geometry:u.geometries[R],type:"Feature",properties:a.properties},h);ot&&p.push(ot)}return new Xe(p);case"FeatureCollection":for(R=0,V=u.features.length;R<V;R++){var dt=Xs(u.features[R],h);dt&&p.push(dt)}return new Xe(p);default:throw new Error("Invalid GeoJSON object.")}}function kh(a,h,u,g){return a?a(h,u):new Us(u,g&&g.markersInheritOptions&&g)}function Ao(a){return new Q(a[1],a[0],a[2])}function Ks(a,h,u){for(var g=[],p=0,x=a.length,P;p<x;p++)P=h?Ks(a[p],h-1,u):(u||Ao)(a[p]),g.push(P);return g}function Oo(a,h){return a=nt(a),a.alt!==void 0?[_(a.lng,h),_(a.lat,h),_(a.alt,h)]:[_(a.lng,h),_(a.lat,h)]}function Js(a,h,u,g){for(var p=[],x=0,P=a.length;x<P;x++)p.push(h?Js(a[x],we(a[x])?0:h-1,u,g):Oo(a[x],g));return!h&&u&&p.push(p[0].slice()),p}function nn(a,h){return a.feature?s({},a.feature,{geometry:h}):Qs(h)}function Qs(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Io={toGeoJSON:function(a){return nn(this,{type:"Point",coordinates:Oo(this.getLatLng(),a)})}};Us.include(Io),Eo.include(Io),Ys.include(Io),Ke.include({toGeoJSON:function(a){var h=!we(this._latlngs),u=Js(this._latlngs,h?1:0,!1,a);return nn(this,{type:(h?"Multi":"")+"LineString",coordinates:u})}}),en.include({toGeoJSON:function(a){var h=!we(this._latlngs),u=h&&!we(this._latlngs[0]),g=Js(this._latlngs,u?2:h?1:0,!0,a);return h||(g=[g]),nn(this,{type:(u?"Multi":"")+"Polygon",coordinates:g})}}),Qi.include({toMultiPoint:function(a){var h=[];return this.eachLayer(function(u){h.push(u.toGeoJSON(a).geometry.coordinates)}),nn(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(a){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(a);var u=h==="GeometryCollection",g=[];return this.eachLayer(function(p){if(p.toGeoJSON){var x=p.toGeoJSON(a);if(u)g.push(x.geometry);else{var P=Qs(x);P.type==="FeatureCollection"?g.push.apply(g,P.features):g.push(P)}}}),u?nn(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function Lh(a,h){return new Je(a,h)}var Ed=Lh,ta=Oe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,h,u){this._url=a,this._bounds=at(h),b(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){It(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ki(this._image),this},bringToBack:function(){return this._map&&Ji(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=at(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",h=this._image=a?this._url:yt("img");if(ct(h,"leaflet-image-layer"),this._zoomAnimated&&ct(h,"leaflet-zoom-animated"),this.options.className&&ct(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onload=r(this.fire,this,"load"),h.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(a){var h=this._map.getZoomScale(a.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Li(this._image,u,h)},_reset:function(){var a=this._image,h=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=h.getSize();Zt(a,h.min),a.style.width=u.x+"px",a.style.height=u.y+"px"},_updateOpacity:function(){Me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Ad=function(a,h,u){return new ta(a,h,u)},Th=ta.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",h=this._image=a?this._url:yt("video");if(ct(h,"leaflet-image-layer"),this._zoomAnimated&&ct(h,"leaflet-zoom-animated"),this.options.className&&ct(h,this.options.className),h.onselectstart=m,h.onmousemove=m,h.onloadeddata=r(this.fire,this,"load"),a){for(var u=h.getElementsByTagName("source"),g=[],p=0;p<u.length;p++)g.push(u[p].src);this._url=u.length>0?g:[h.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var P=yt("source");P.src=this._url[x],h.appendChild(P)}}});function Od(a,h,u){return new Th(a,h,u)}var Ch=ta.extend({_initImage:function(){var a=this._image=this._url;ct(a,"leaflet-image-layer"),this._zoomAnimated&&ct(a,"leaflet-zoom-animated"),this.options.className&&ct(a,this.options.className),a.onselectstart=m,a.onmousemove=m}});function Id(a,h,u){return new Ch(a,h,u)}var We=Oe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,h){a&&(a instanceof Q||k(a))?(this._latlng=nt(a),b(this,h)):(b(this,a),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Me(this._container,1),this.bringToFront(),this.options.interactive&&(ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Me(this._container,0),this._removeTimeout=setTimeout(r(It,void 0,this._container),200)):It(this._container),this.options.interactive&&(Ft(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=nt(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ki(this._container),this},bringToBack:function(){return this._map&&Ji(this._container),this},_prepareOpen:function(a){var h=this._source;if(!h._map)return!1;if(h instanceof Xe){h=null;var u=this._source._layers;for(var g in u)if(u[g]._map){h=u[g];break}if(!h)return!1;this._source=h}if(!a)if(h.getCenter)a=h.getCenter();else if(h.getLatLng)a=h.getLatLng();else if(h.getBounds)a=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")a.innerHTML=h;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),h=D(this.options.offset),u=this._getAnchor();this._zoomAnimated?Zt(this._container,a.add(u)):h=h.add(a).add(u);var g=this._containerBottom=-h.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=g+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});pt.include({_initOverlay:function(a,h,u,g){var p=h;return p instanceof a||(p=new a(g).setContent(h)),u&&p.setLatLng(u),p}}),Oe.include({_initOverlay:function(a,h,u,g){var p=u;return p instanceof a?(b(p,g),p._source=this):(p=h&&!g?h:new a(g,this),p.setContent(u)),p}});var ea=We.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,We.prototype.openOn.call(this,a)},onAdd:function(a){We.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fi||this._source.on("preclick",Ci))},onRemove:function(a){We.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fi||this._source.off("preclick",Ci))},getEvents:function(){var a=We.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",h=this._container=yt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=yt("div",a+"-content-wrapper",h);if(this._contentNode=yt("div",a+"-content",u),Wn(h),wo(this._contentNode),ht(h,"contextmenu",Ci),this._tipContainer=yt("div",a+"-tip-container",h),this._tip=yt("div",a+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=yt("a",a+"-close-button",h);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',ht(g,"click",function(p){Kt(p),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,h=a.style;h.width="",h.whiteSpace="nowrap";var u=a.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),h.width=u+1+"px",h.whiteSpace="",h.height="";var g=a.offsetHeight,p=this.options.maxHeight,x="leaflet-popup-scrolled";p&&g>p?(h.height=p+"px",ct(a,x)):Ft(a,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),u=this._getAnchor();Zt(this._container,h.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,h=parseInt(Rn(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+h,g=this._containerWidth,p=new N(this._containerLeft,-u-this._containerBottom);p._add(Ti(this._container));var x=a.layerPointToContainerPoint(p),P=D(this.options.autoPanPadding),C=D(this.options.autoPanPaddingTopLeft||P),A=D(this.options.autoPanPaddingBottomRight||P),R=a.getSize(),V=0,ot=0;x.x+g+A.x>R.x&&(V=x.x+g-R.x+A.x),x.x-V-C.x<0&&(V=x.x-C.x),x.y+u+A.y>R.y&&(ot=x.y+u-R.y+A.y),x.y-ot-C.y<0&&(ot=x.y-C.y),(V||ot)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([V,ot]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zd=function(a,h){return new ea(a,h)};pt.mergeOptions({closePopupOnClick:!0}),pt.include({openPopup:function(a,h,u){return this._initOverlay(ea,a,h,u).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Oe.include({bindPopup:function(a,h){return this._popup=this._initOverlay(ea,this._popup,a,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Xe||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Ei(a);var h=a.layer||a.target;if(this._popup._source===h&&!(h instanceof fi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=h,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var ia=We.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){We.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){We.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=We.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",h=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=yt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var h,u,g=this._map,p=this._container,x=g.latLngToContainerPoint(g.getCenter()),P=g.layerPointToContainerPoint(a),C=this.options.direction,A=p.offsetWidth,R=p.offsetHeight,V=D(this.options.offset),ot=this._getAnchor();C==="top"?(h=A/2,u=R):C==="bottom"?(h=A/2,u=0):C==="center"?(h=A/2,u=R/2):C==="right"?(h=0,u=R/2):C==="left"?(h=A,u=R/2):P.x<x.x?(C="right",h=0,u=R/2):(C="left",h=A+(V.x+ot.x)*2,u=R/2),a=a.subtract(D(h,u,!0)).add(V).add(ot),Ft(p,"leaflet-tooltip-right"),Ft(p,"leaflet-tooltip-left"),Ft(p,"leaflet-tooltip-top"),Ft(p,"leaflet-tooltip-bottom"),ct(p,"leaflet-tooltip-"+C),Zt(p,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Me(this._container,a)},_animateZoom:function(a){var h=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(h)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Dd=function(a,h){return new ia(a,h)};pt.include({openTooltip:function(a,h,u){return this._initOverlay(ia,a,h,u).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Oe.include({bindTooltip:function(a,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ia,this._tooltip,a,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var h=a?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[h](u),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Xe||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var h=a.getElement();h&&(ht(h,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),ht(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var h=a.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0))},_moveTooltip:function(a){var h=a.latlng,u,g;this._tooltip.options.sticky&&a.originalEvent&&(u=this._map.mouseEventToContainerPoint(a.originalEvent),g=this._map.containerPointToLayerPoint(u),h=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(h)}});var Eh=tn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var h=a&&a.tagName==="DIV"?a:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Zs(h),h.appendChild(u.html)):h.innerHTML=u.html!==!1?u.html:"",u.bgPos){var g=D(u.bgPos);h.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function Rd(a){return new Eh(a)}tn.Default=jn;var Gn=Oe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:et.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){b(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),It(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ki(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ji(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof N?a:new N(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var h=this.getPane().children,u=-a(-1/0,1/0),g=0,p=h.length,x;g<p;g++)x=h[g].style.zIndex,h[g]!==this._container&&x&&(u=a(u,+x));isFinite(u)&&(this.options.zIndex=u+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et.ielt9){Me(this._container,this.options.opacity);var a=+new Date,h=!1,u=!1;for(var g in this._tiles){var p=this._tiles[g];if(!(!p.current||!p.loaded)){var x=Math.min(1,(a-p.loaded)/200);Me(p.el,x),x<1?h=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),h&&(Y(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,h=this.options.maxZoom;if(a!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===a?(this._levels[u].el.style.zIndex=h-Math.abs(a-u),this._onUpdateLevel(u)):(It(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var g=this._levels[a],p=this._map;return g||(g=this._levels[a]={},g.el=yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=h,g.origin=p.project(p.unproject(p.getPixelOrigin()),a).round(),g.zoom=a,this._setZoomTransform(g,p.getCenter(),p.getZoom()),m(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var a,h,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)h=this._tiles[a],h.retain=h.current;for(a in this._tiles)if(h=this._tiles[a],h.current&&!h.active){var g=h.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var h in this._tiles)this._tiles[h].coords.z===a&&this._removeTile(h)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)It(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,h,u,g){var p=Math.floor(a/2),x=Math.floor(h/2),P=u-1,C=new N(+p,+x);C.z=+P;var A=this._tileCoordsToKey(C),R=this._tiles[A];return R&&R.active?(R.retain=!0,!0):(R&&R.loaded&&(R.retain=!0),P>g?this._retainParent(p,x,P,g):!1)},_retainChildren:function(a,h,u,g){for(var p=2*a;p<2*a+2;p++)for(var x=2*h;x<2*h+2;x++){var P=new N(p,x);P.z=u+1;var C=this._tileCoordsToKey(P),A=this._tiles[C];if(A&&A.active){A.retain=!0;continue}else A&&A.loaded&&(A.retain=!0);u+1<g&&this._retainChildren(p,x,u+1,g)}},_resetView:function(a){var h=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var h=this.options;return h.minNativeZoom!==void 0&&a<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<a?h.maxNativeZoom:a},_setView:function(a,h,u,g){var p=Math.round(h);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var x=this.options.updateWhenZooming&&p!==this._tileZoom;(!g||x)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(a),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(a,h)},_setZoomTransforms:function(a,h){for(var u in this._levels)this._setZoomTransform(this._levels[u],a,h)},_setZoomTransform:function(a,h,u){var g=this._map.getZoomScale(u,a.zoom),p=a.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(h,u)).round();et.any3d?Li(a.el,p,g):Zt(a.el,p)},_resetGrid:function(){var a=this._map,h=a.options.crs,u=this._tileSize=this.getTileSize(),g=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,h.wrapLng[0]],g).x/u.x),Math.ceil(a.project([0,h.wrapLng[1]],g).x/u.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([h.wrapLat[0],0],g).y/u.x),Math.ceil(a.project([h.wrapLat[1],0],g).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var h=this._map,u=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),g=h.getZoomScale(u,this._tileZoom),p=h.project(a,this._tileZoom).floor(),x=h.getSize().divideBy(g*2);return new B(p.subtract(x),p.add(x))},_update:function(a){var h=this._map;if(h){var u=this._clampZoom(h.getZoom());if(a===void 0&&(a=h.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(a),p=this._pxBoundsToTileRange(g),x=p.getCenter(),P=[],C=this.options.keepBuffer,A=new B(p.getBottomLeft().subtract([C,-C]),p.getTopRight().add([C,-C]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var R in this._tiles){var V=this._tiles[R].coords;(V.z!==this._tileZoom||!A.contains(new N(V.x,V.y)))&&(this._tiles[R].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(a,u);return}for(var ot=p.min.y;ot<=p.max.y;ot++)for(var dt=p.min.x;dt<=p.max.x;dt++){var Pe=new N(dt,ot);if(Pe.z=this._tileZoom,!!this._isValidTile(Pe)){var Oi=this._tiles[this._tileCoordsToKey(Pe)];Oi?Oi.current=!0:P.push(Pe)}}if(P.sort(function(di,zo){return di.distanceTo(x)-zo.distanceTo(x)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var sa=document.createDocumentFragment();for(dt=0;dt<P.length;dt++)this._addTile(P[dt],sa);this._level.el.appendChild(sa)}}}},_isValidTile:function(a){var h=this._map.options.crs;if(!h.infinite){var u=this._globalTileRange;if(!h.wrapLng&&(a.x<u.min.x||a.x>u.max.x)||!h.wrapLat&&(a.y<u.min.y||a.y>u.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(a);return at(this.options.bounds).overlaps(g)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var h=this._map,u=this.getTileSize(),g=a.scaleBy(u),p=g.add(u),x=h.unproject(g,a.z),P=h.unproject(p,a.z);return[x,P]},_tileCoordsToBounds:function(a){var h=this._tileCoordsToNwSe(a),u=new J(h[0],h[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var h=a.split(":"),u=new N(+h[0],+h[1]);return u.z=+h[2],u},_removeTile:function(a){var h=this._tiles[a];h&&(It(h.el),delete this._tiles[a],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){ct(a,"leaflet-tile");var h=this.getTileSize();a.style.width=h.x+"px",a.style.height=h.y+"px",a.onselectstart=m,a.onmousemove=m,et.ielt9&&this.options.opacity<1&&Me(a,this.options.opacity)},_addTile:function(a,h){var u=this._getTilePos(a),g=this._tileCoordsToKey(a),p=this.createTile(this._wrapCoords(a),r(this._tileReady,this,a));this._initTile(p),this.createTile.length<2&&j(r(this._tileReady,this,a,null,p)),Zt(p,u),this._tiles[g]={el:p,coords:a,current:!0},h.appendChild(p),this.fire("tileloadstart",{tile:p,coords:a})},_tileReady:function(a,h,u){h&&this.fire("tileerror",{error:h,tile:u,coords:a});var g=this._tileCoordsToKey(a);u=this._tiles[g],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Me(u.el,0),Y(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),h||(ct(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var h=new N(this._wrapX?d(a.x,this._wrapX):a.x,this._wrapY?d(a.y,this._wrapY):a.y);return h.z=a.z,h},_pxBoundsToTileRange:function(a){var h=this.getTileSize();return new B(a.min.unscaleBy(h).floor(),a.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Nd(a){return new Gn(a)}var sn=Gn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,h){this._url=a,h=b(this,h),h.detectRetina&&et.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,h){return this._url===a&&h===void 0&&(h=!0),this._url=a,h||this.redraw(),this},createTile:function(a,h){var u=document.createElement("img");return ht(u,"load",r(this._tileOnLoad,this,h,u)),ht(u,"error",r(this._tileOnError,this,h,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(a),u},getTileUrl:function(a){var h={r:et.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-a.y;this.options.tms&&(h.y=u),h["-y"]=u}return S(this._url,s(h,this.options))},_tileOnLoad:function(a,h){et.ielt9?setTimeout(r(a,this,null,h),0):a(null,h)},_tileOnError:function(a,h,u){var g=this.options.errorTileUrl;g&&h.getAttribute("src")!==g&&(h.src=g),a(u,h)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,h=this.options.maxZoom,u=this.options.zoomReverse,g=this.options.zoomOffset;return u&&(a=h-a),a+g},_getSubdomain:function(a){var h=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var a,h;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(h=this._tiles[a].el,h.onload=m,h.onerror=m,!h.complete)){h.src=T;var u=this._tiles[a].coords;It(h),delete this._tiles[a],this.fire("tileabort",{tile:h,coords:u})}},_removeTile:function(a){var h=this._tiles[a];if(h)return h.el.setAttribute("src",T),Gn.prototype._removeTile.call(this,a)},_tileReady:function(a,h,u){if(!(!this._map||u&&u.getAttribute("src")===T))return Gn.prototype._tileReady.call(this,a,h,u)}});function Ah(a,h){return new sn(a,h)}var Oh=sn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,h){this._url=a;var u=s({},this.defaultWmsParams);for(var g in h)g in this.options||(u[g]=h[g]);h=b(this,h);var p=h.detectRetina&&et.retina?2:1,x=this.getTileSize();u.width=x.x*p,u.height=x.y*p,this.wmsParams=u},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,sn.prototype.onAdd.call(this,a)},getTileUrl:function(a){var h=this._tileCoordsToNwSe(a),u=this._crs,g=q(u.project(h[0]),u.project(h[1])),p=g.min,x=g.max,P=(this._wmsVersion>=1.3&&this._crs===Ph?[p.y,p.x,x.y,x.x]:[p.x,p.y,x.x,x.y]).join(","),C=sn.prototype.getTileUrl.call(this,a);return C+M(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(a,h){return s(this.wmsParams,a),h||this.redraw(),this}});function Bd(a,h){return new Oh(a,h)}sn.WMS=Oh,Ah.wms=Bd;var Qe=Oe.extend({options:{padding:.1},initialize:function(a){b(this,a),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,h){var u=this._map.getZoomScale(h,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,h),x=g.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(a,h));et.any3d?Li(this._container,x,u):Zt(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,h=this._map.getSize(),u=this._map.containerPointToLayerPoint(h.multiplyBy(-a)).round();this._bounds=new B(u,u.add(h.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ih=Qe.extend({options:{tolerance:0},getEvents:function(){var a=Qe.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");ht(a,"mousemove",this._onMouseMove,this),ht(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ht(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Y(this._redrawRequest),delete this._ctx,It(this._container),Lt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var h in this._layers)a=this._layers[h],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qe.prototype._update.call(this);var a=this._bounds,h=this._container,u=a.getSize(),g=et.retina?2:1;Zt(h,a.min),h.width=g*u.x,h.height=g*u.y,h.style.width=u.x+"px",h.style.height=u.y+"px",et.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Qe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[c(a)]=a;var h=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var h=a._order,u=h.next,g=h.prev;u?u.prev=g:this._drawLast=g,g?g.next=u:this._drawFirst=u,delete a._order,delete this._layers[c(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var h=a.options.dashArray.split(/[, ]+/),u=[],g,p;for(p=0;p<h.length;p++){if(g=Number(h[p]),isNaN(g))return;u.push(g)}a.options._dashArray=u}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var h=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(a._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(a._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var h=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,h=this._redrawBounds;if(this._ctx.save(),h){var u=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)a=g.layer,(!h||a._pxBounds&&a._pxBounds.intersects(h))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,h){if(this._drawing){var u,g,p,x,P=a._parts,C=P.length,A=this._ctx;if(C){for(A.beginPath(),u=0;u<C;u++){for(g=0,p=P[u].length;g<p;g++)x=P[u][g],A[g?"lineTo":"moveTo"](x.x,x.y);h&&A.closePath()}this._fillStroke(A,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var h=a._point,u=this._ctx,g=Math.max(Math.round(a._radius),1),p=(Math.max(Math.round(a._radiusY),1)||g)/g;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(h.x,h.y/p,g,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,a)}},_fillStroke:function(a,h){var u=h.options;u.fill&&(a.globalAlpha=u.fillOpacity,a.fillStyle=u.fillColor||u.color,a.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(a.setLineDash&&a.setLineDash(h.options&&h.options._dashArray||[]),a.globalAlpha=u.opacity,a.lineWidth=u.weight,a.strokeStyle=u.color,a.lineCap=u.lineCap,a.lineJoin=u.lineJoin,a.stroke())},_onClick:function(a){for(var h=this._map.mouseEventToLayerPoint(a),u,g,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(h)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(u))&&(g=u);this._fireEvent(g?[g]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,h)}},_handleMouseOut:function(a){var h=this._hoveredLayer;h&&(Ft(this._container,"leaflet-interactive"),this._fireEvent([h],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,h){if(!this._mouseHoverThrottled){for(var u,g,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(h)&&(g=u);g!==this._hoveredLayer&&(this._handleMouseOut(a),g&&(ct(this._container,"leaflet-interactive"),this._fireEvent([g],a,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,h,u){this._map._fireDOMEvent(h,u||h.type,a)},_bringToFront:function(a){var h=a._order;if(h){var u=h.next,g=h.prev;if(u)u.prev=g;else return;g?g.next=u:u&&(this._drawFirst=u),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(a)}},_bringToBack:function(a){var h=a._order;if(h){var u=h.next,g=h.prev;if(g)g.next=u;else return;u?u.prev=g:g&&(this._drawLast=g),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(a)}}});function zh(a){return et.canvas?new Ih(a):null}var Vn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Fd={_initContainer:function(){this._container=yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qe.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var h=a._container=Vn("shape");ct(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",a._path=Vn("path"),h.appendChild(a._path),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){var h=a._container;this._container.appendChild(h),a.options.interactive&&a.addInteractiveTarget(h)},_removePath:function(a){var h=a._container;It(h),a.removeInteractiveTarget(h),delete this._layers[c(a)]},_updateStyle:function(a){var h=a._stroke,u=a._fill,g=a.options,p=a._container;p.stroked=!!g.stroke,p.filled=!!g.fill,g.stroke?(h||(h=a._stroke=Vn("stroke")),p.appendChild(h),h.weight=g.weight+"px",h.color=g.color,h.opacity=g.opacity,g.dashArray?h.dashStyle=k(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=g.lineCap.replace("butt","flat"),h.joinstyle=g.lineJoin):h&&(p.removeChild(h),a._stroke=null),g.fill?(u||(u=a._fill=Vn("fill")),p.appendChild(u),u.color=g.fillColor||g.color,u.opacity=g.fillOpacity):u&&(p.removeChild(u),a._fill=null)},_updateCircle:function(a){var h=a._point.round(),u=Math.round(a._radius),g=Math.round(a._radiusY||u);this._setPath(a,a._empty()?"M0 0":"AL "+h.x+","+h.y+" "+u+","+g+" 0,"+65535*360)},_setPath:function(a,h){a._path.v=h},_bringToFront:function(a){Ki(a._container)},_bringToBack:function(a){Ji(a._container)}},na=et.vml?Vn:be,$n=Qe.extend({_initContainer:function(){this._container=na("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=na("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){It(this._container),Lt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qe.prototype._update.call(this);var a=this._bounds,h=a.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,u.setAttribute("width",h.x),u.setAttribute("height",h.y)),Zt(u,a.min),u.setAttribute("viewBox",[a.min.x,a.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(a){var h=a._path=na("path");a.options.className&&ct(h,a.options.className),a.options.interactive&&ct(h,"leaflet-interactive"),this._updateStyle(a),this._layers[c(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){It(a._path),a.removeInteractiveTarget(a._path),delete this._layers[c(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var h=a._path,u=a.options;h&&(u.stroke?(h.setAttribute("stroke",u.color),h.setAttribute("stroke-opacity",u.opacity),h.setAttribute("stroke-width",u.weight),h.setAttribute("stroke-linecap",u.lineCap),h.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?h.setAttribute("stroke-dasharray",u.dashArray):h.removeAttribute("stroke-dasharray"),u.dashOffset?h.setAttribute("stroke-dashoffset",u.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),u.fill?(h.setAttribute("fill",u.fillColor||u.color),h.setAttribute("fill-opacity",u.fillOpacity),h.setAttribute("fill-rule",u.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(a,h){this._setPath(a,Ue(a._parts,h))},_updateCircle:function(a){var h=a._point,u=Math.max(Math.round(a._radius),1),g=Math.max(Math.round(a._radiusY),1)||u,p="a"+u+","+g+" 0 1,0 ",x=a._empty()?"M0 0":"M"+(h.x-u)+","+h.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(a,x)},_setPath:function(a,h){a._path.setAttribute("d",h)},_bringToFront:function(a){Ki(a._path)},_bringToBack:function(a){Ji(a._path)}});et.vml&&$n.include(Fd);function Dh(a){return et.svg||et.vml?new $n(a):null}pt.include({getRenderer:function(a){var h=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var h=this._paneRenderers[a];return h===void 0&&(h=this._createRenderer({pane:a}),this._paneRenderers[a]=h),h},_createRenderer:function(a){return this.options.preferCanvas&&zh(a)||Dh(a)}});var Rh=en.extend({initialize:function(a,h){en.prototype.initialize.call(this,this._boundsToLatLngs(a),h)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=at(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Wd(a,h){return new Rh(a,h)}$n.create=na,$n.pointsToPath=Ue,Je.geometryToLayer=Xs,Je.coordsToLatLng=Ao,Je.coordsToLatLngs=Ks,Je.latLngToCoords=Oo,Je.latLngsToCoords=Js,Je.getFeature=nn,Je.asFeature=Qs,pt.mergeOptions({boxZoom:!0});var Nh=Fe.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Lt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){It(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Nn(),mo(),this._startPoint=this._map.mouseEventToContainerPoint(a),ht(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=yt("div","leaflet-zoom-box",this._container),ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var h=new B(this._point,this._startPoint),u=h.getSize();Zt(this._box,h.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(It(this._box),Ft(this._container,"leaflet-crosshair")),Bn(),po(),Lt(document,{contextmenu:Ei,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var h=new J(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});pt.addInitHook("addHandler","boxZoom",Nh),pt.mergeOptions({doubleClickZoom:!0});var Bh=Fe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var h=this._map,u=h.getZoom(),g=h.options.zoomDelta,p=a.originalEvent.shiftKey?u-g:u+g;h.options.doubleClickZoom==="center"?h.setZoom(p):h.setZoomAround(a.containerPoint,p)}});pt.addInitHook("addHandler","doubleClickZoom",Bh),pt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fh=Fe.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new ui(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ft(this._map._container,"leaflet-grab"),Ft(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=at(this._map.options.maxBounds);this._offsetLimit=q(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var h=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(h),this._prunePositions(h)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,h){return a-(a-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;a.x<h.min.x&&(a.x=this._viscousLimit(a.x,h.min.x)),a.y<h.min.y&&(a.y=this._viscousLimit(a.y,h.min.y)),a.x>h.max.x&&(a.x=this._viscousLimit(a.x,h.max.x)),a.y>h.max.y&&(a.y=this._viscousLimit(a.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,h=Math.round(a/2),u=this._initialWorldOffset,g=this._draggable._newPos.x,p=(g-h+u)%a+h-u,x=(g+h+u)%a-h-u,P=Math.abs(p+u)<Math.abs(x+u)?p:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(a){var h=this._map,u=h.options,g=!u.inertia||a.noInertia||this._times.length<2;if(h.fire("dragend",a),g)h.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,P=u.easeLinearity,C=p.multiplyBy(P/x),A=C.distanceTo([0,0]),R=Math.min(u.inertiaMaxSpeed,A),V=C.multiplyBy(R/A),ot=R/(u.inertiaDeceleration*P),dt=V.multiplyBy(-ot/2).round();!dt.x&&!dt.y?h.fire("moveend"):(dt=h._limitOffset(dt,h.options.maxBounds),j(function(){h.panBy(dt,{duration:ot,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});pt.addInitHook("addHandler","dragging",Fh),pt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Wh=Fe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),ht(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Lt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,h=document.documentElement,u=a.scrollTop||h.scrollTop,g=a.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(g,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var h=this._panKeys={},u=this.keyCodes,g,p;for(g=0,p=u.left.length;g<p;g++)h[u.left[g]]=[-1*a,0];for(g=0,p=u.right.length;g<p;g++)h[u.right[g]]=[a,0];for(g=0,p=u.down.length;g<p;g++)h[u.down[g]]=[0,a];for(g=0,p=u.up.length;g<p;g++)h[u.up[g]]=[0,-1*a]},_setZoomDelta:function(a){var h=this._zoomKeys={},u=this.keyCodes,g,p;for(g=0,p=u.zoomIn.length;g<p;g++)h[u.zoomIn[g]]=a;for(g=0,p=u.zoomOut.length;g<p;g++)h[u.zoomOut[g]]=-a},_addHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Lt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var h=a.keyCode,u=this._map,g;if(h in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(g=this._panKeys[h],a.shiftKey&&(g=D(g).multiplyBy(3)),u.options.maxBounds&&(g=u._limitOffset(D(g),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(g)));u.panTo(p)}else u.panBy(g)}else if(h in this._zoomKeys)u.setZoom(u.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;Ei(a)}}});pt.addInitHook("addHandler","keyboard",Wh),pt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Hh=Fe.extend({addHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Lt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var h=uh(a),u=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var g=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),g),Ei(a)},_performZoom:function(){var a=this._map,h=a.getZoom(),u=this._map.options.zoomSnap||0;a._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,x=u?Math.ceil(p/u)*u:p,P=a._limitZoom(h+(this._delta>0?x:-x))-h;this._delta=0,this._startTime=null,P&&(a.options.scrollWheelZoom==="center"?a.setZoom(h+P):a.setZoomAround(this._lastMousePos,h+P))}});pt.addInitHook("addHandler","scrollWheelZoom",Hh);var Hd=600;pt.mergeOptions({tapHold:et.touchNative&&et.safari&&et.mobile,tapTolerance:15});var Zh=Fe.extend({addHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Lt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var h=a.touches[0];this._startPos=this._newPos=new N(h.clientX,h.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ht(document,"touchend",Kt),ht(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Hd),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){Lt(document,"touchend",Kt),Lt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),Lt(document,"touchend touchcancel contextmenu",this._cancel,this),Lt(document,"touchmove",this._onMove,this)},_onMove:function(a){var h=a.touches[0];this._newPos=new N(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,h){var u=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});u._simulated=!0,h.target.dispatchEvent(u)}});pt.addInitHook("addHandler","tapHold",Zh),pt.mergeOptions({touchZoom:et.touch,bounceAtZoomLimits:!0});var jh=Fe.extend({addHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ft(this._map._container,"leaflet-touch-zoom"),Lt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var h=this._map;if(!(!a.touches||a.touches.length!==2||h._animatingZoom||this._zooming)){var u=h.mouseEventToContainerPoint(a.touches[0]),g=h.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(u.add(g)._divideBy(2))),this._startDist=u.distanceTo(g),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),Kt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var h=this._map,u=h.mouseEventToContainerPoint(a.touches[0]),g=h.mouseEventToContainerPoint(a.touches[1]),p=u.distanceTo(g)/this._startDist;if(this._zoom=h.getScaleZoom(p,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&p<1||this._zoom>h.getMaxZoom()&&p>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var x=u._add(g)._divideBy(2)._subtract(this._centerPoint);if(p===1&&x.x===0&&x.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),Y(this._animRequest);var P=r(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(P,this,!0),Kt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Y(this._animRequest),Lt(document,"touchmove",this._onTouchMove,this),Lt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});pt.addInitHook("addHandler","touchZoom",jh),pt.BoxZoom=Nh,pt.DoubleClickZoom=Bh,pt.Drag=Fh,pt.Keyboard=Wh,pt.ScrollWheelZoom=Hh,pt.TapHold=Zh,pt.TouchZoom=jh,i.Bounds=B,i.Browser=et,i.CRS=mt,i.Canvas=Ih,i.Circle=Eo,i.CircleMarker=Ys,i.Class=H,i.Control=Ae,i.DivIcon=Eh,i.DivOverlay=We,i.DomEvent=ad,i.DomUtil=nd,i.Draggable=ui,i.Evented=st,i.FeatureGroup=Xe,i.GeoJSON=Je,i.GridLayer=Gn,i.Handler=Fe,i.Icon=tn,i.ImageOverlay=ta,i.LatLng=Q,i.LatLngBounds=J,i.Layer=Oe,i.LayerGroup=Qi,i.LineUtil=_d,i.Map=pt,i.Marker=Us,i.Mixin=fd,i.Path=fi,i.Point=N,i.PolyUtil=vd,i.Polygon=en,i.Polyline=Ke,i.Popup=ea,i.PosAnimation=fh,i.Projection=yd,i.Rectangle=Rh,i.Renderer=Qe,i.SVG=$n,i.SVGOverlay=Ch,i.TileLayer=sn,i.Tooltip=ia,i.Transformation=ce,i.Util=it,i.VideoOverlay=Th,i.bind=r,i.bounds=q,i.canvas=zh,i.circle=Ld,i.circleMarker=kd,i.control=Hn,i.divIcon=Rd,i.extend=s,i.featureGroup=wd,i.geoJSON=Lh,i.geoJson=Ed,i.gridLayer=Nd,i.icon=Pd,i.imageOverlay=Ad,i.latLng=nt,i.latLngBounds=at,i.layerGroup=Md,i.map=od,i.marker=Sd,i.point=D,i.polygon=Cd,i.polyline=Td,i.popup=zd,i.rectangle=Wd,i.setOptions=b,i.stamp=c,i.svg=Dh,i.svgOverlay=Id,i.tileLayer=Ah,i.tooltip=Dd,i.transformation=re,i.version=n,i.videoOverlay=Od;var Zd=window.L;i.noConflict=function(){return window.L=Zd,this},window.L=i})})(bg,ys);const Ge=ys;var Jh={},Mg={get exports(){return Jh},set exports(e){Jh=e}};function wg(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ji=1,Gi=2,Mn=3,Pg=4,tr=5,Qh=6378137,Sg=6356752314e-3,tl=.0066943799901413165,us=484813681109536e-20,F=Math.PI/2,kg=.16666666666666666,Lg=.04722222222222222,Tg=.022156084656084655,G=1e-10,Jt=.017453292519943295,je=57.29577951308232,xt=Math.PI/4,xs=Math.PI*2,Wt=3.14159265359,me={};me.greenwich=0;me.lisbon=-9.131906111111;me.paris=2.337229166667;me.bogota=-74.080916666667;me.madrid=-3.687938888889;me.rome=12.452333333333;me.bern=7.439583333333;me.jakarta=106.807719444444;me.ferro=-17.666666666667;me.brussels=4.367975;me.stockholm=18.058277777778;me.athens=23.7163375;me.oslo=10.722916666667;const Cg={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var el=/[\s_\-\/\(\)]/g;function xi(e,t){if(e[t])return e[t];for(var i=Object.keys(e),n=t.toLowerCase().replace(el,""),s=-1,o,r;++s<i.length;)if(o=i[s],r=o.toLowerCase().replace(el,""),r===n)return e[o]}function er(e){var t={},i=e.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,c){var f=c.split("=");return f.push(!0),l[f[0].toLowerCase()]=f[1],l},{}),n,s,o,r={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*Jt},lat_1:function(l){t.lat1=l*Jt},lat_2:function(l){t.lat2=l*Jt},lat_ts:function(l){t.lat_ts=l*Jt},lon_0:function(l){t.long0=l*Jt},lon_1:function(l){t.long1=l*Jt},lon_2:function(l){t.long2=l*Jt},alpha:function(l){t.alpha=parseFloat(l)*Jt},gamma:function(l){t.rectified_grid_angle=parseFloat(l)},lonc:function(l){t.longc=l*Jt},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(c){return parseFloat(c)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var c=xi(Cg,l);c&&(t.to_meter=c.to_meter)},from_greenwich:function(l){t.from_greenwich=l*Jt},pm:function(l){var c=xi(me,l);t.from_greenwich=(c||parseFloat(l))*Jt},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var c="ewnsud";l.length===3&&c.indexOf(l.substr(0,1))!==-1&&c.indexOf(l.substr(1,1))!==-1&&c.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0}};for(n in i)s=i[n],n in r?(o=r[n],typeof o=="function"?o(s):t[o]=s):t[n]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var bs=1,iu=2,nu=3,Fa=4,su=5,Mr=-1,Eg=/\s/,Ag=/[A-Za-z]/,Og=/[A-Za-z84_]/,Qa=/[,\]]/,au=/[\d\.E\-\+]/;function li(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=bs}li.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Fa)for(;Eg.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case bs:return this.neutral(e);case iu:return this.keyword(e);case Fa:return this.quoted(e);case su:return this.afterquote(e);case nu:return this.number(e);case Mr:return}};li.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Fa;return}if(Qa.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};li.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=bs;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=bs,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Mr);return}};li.prototype.number=function(e){if(au.test(e)){this.word+=e;return}if(Qa.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};li.prototype.quoted=function(e){if(e==='"'){this.state=su;return}this.word+=e};li.prototype.keyword=function(e){if(Og.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=bs;return}if(Qa.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};li.prototype.neutral=function(e){if(Ag.test(e)){this.word=e,this.state=iu;return}if(e==='"'){this.word="",this.state=Fa;return}if(au.test(e)){this.word=e,this.state=nu;return}if(Qa.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};li.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Mr)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Ig(e){var t=new li(e);return t.output()}function il(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var n=t?{}:e,s=i.reduce(function(o,r){return _n(r,o),o},n);t&&(e[t]=s)}function _n(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},_n(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var n;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&_n(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&_n(e[3],t[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],il(t,i,e);return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return _n(e,t[i]);return il(t,i,e)}}var zg=.017453292519943295;function Dg(e,t){var i=t[0],n=t[1];!(i in e)&&n in e&&(e[i]=e[n],t.length===3&&(e[i]=t[2](e[i])))}function ti(e){return e*zg}function Rg(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,n=e.AXIS.length;i<n;++i){var s=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var o=e.GEOGCS;e.type==="GEOGCS"&&(o=e),o&&(o.DATUM?e.datumCode=o.DATUM.name.toLowerCase():e.datumCode=o.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(e.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=o.DATUM.SPHEROID.a,e.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(e.datum_params=o.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function r(f){var d=e.to_meter||1;return f*d}var l=function(f){return Dg(e,f)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ti],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ti],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",ti],["lat0","latitude_of_origin",ti],["lat0","standard_parallel_1",ti],["lat1","standard_parallel_1",ti],["lat2","standard_parallel_2",ti],["azimuth","Azimuth"],["alpha","azimuth",ti],["srsCode","name"]];c.forEach(l),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=ti(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function ou(e){var t=Ig(e),i=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",i]);var s={};return _n(t,s),Rg(s),s}function he(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?he[e]=er(arguments[1]):he[e]=ou(arguments[1]):he[e]=i}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(n){Array.isArray(n)?he.apply(t,n):he(n)});if(typeof e=="string"){if(e in he)return he[e]}else"EPSG"in e?he["EPSG:"+e.EPSG]=e:"ESRI"in e?he["ESRI:"+e.ESRI]=e:"IAU2000"in e?he["IAU2000:"+e.IAU2000]=e:console.log(e);return}}wg(he);function Ng(e){return typeof e=="string"}function Bg(e){return e in he}var Fg=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Wg(e){return Fg.some(function(t){return e.indexOf(t)>-1})}var Hg=["3857","900913","3785","102113"];function Zg(e){var t=xi(e,"authority");if(t){var i=xi(t,"epsg");return i&&Hg.indexOf(i)>-1}}function jg(e){var t=xi(e,"extension");if(t)return xi(t,"proj4")}function Gg(e){return e[0]==="+"}function Vg(e){if(Ng(e)){if(Bg(e))return he[e];if(Wg(e)){var t=ou(e);if(Zg(t))return he["EPSG:3857"];var i=jg(t);return i?er(i):t}if(Gg(e))return er(e)}else return e}function nl(e,t){e=e||{};var i,n;if(!t)return e;for(n in t)i=t[n],i!==void 0&&(e[n]=i);return e}function qe(e,t,i){var n=e*t;return i/Math.sqrt(1-n*n)}function Is(e){return e<0?-1:1}function U(e){return Math.abs(e)<=Wt?e:e-Is(e)*xs}function De(e,t,i){var n=e*i,s=.5*e;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(F-t))/n}function Ms(e,t){for(var i=.5*e,n,s,o=F-2*Math.atan(t),r=0;r<=15;r++)if(n=e*Math.sin(o),s=F-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-o,o+=s,Math.abs(s)<=1e-10)return o;return-9999}function $g(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=qe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function qg(e){var t=e.x,i=e.y;if(i*je>90&&i*je<-90&&t*je>180&&t*je<-180)return null;var n,s;if(Math.abs(Math.abs(i)-F)<=G)return null;if(this.sphere)n=this.x0+this.a*this.k0*U(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(xt+.5*i));else{var o=Math.sin(i),r=De(this.e,i,o);n=this.x0+this.a*this.k0*U(t-this.long0),s=this.y0-this.a*this.k0*Math.log(r)}return e.x=n,e.y=s,e}function Ug(e){var t=e.x-this.x0,i=e.y-this.y0,n,s;if(this.sphere)s=F-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(s=Ms(this.e,o),s===-9999)return null}return n=U(this.long0+t/(this.a*this.k0)),e.x=n,e.y=s,e}var Yg=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const Xg={init:$g,forward:qg,inverse:Ug,names:Yg};function Kg(){}function sl(e){return e}var Jg=["longlat","identity"];const Qg={init:Kg,forward:sl,inverse:sl,names:Jg};var tm=[Xg,Qg],Sa={},Wa=[];function ru(e,t){var i=Wa.length;return e.names?(Wa[i]=e,e.names.forEach(function(n){Sa[n.toLowerCase()]=i}),this):(console.log(t),!0)}function em(e){if(!e)return!1;var t=e.toLowerCase();if(typeof Sa[t]<"u"&&Wa[Sa[t]])return Wa[Sa[t]]}function im(){tm.forEach(ru)}const nm={start:im,add:ru,get:em};var rt={};rt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};rt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};rt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};rt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};rt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};rt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};rt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};rt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};rt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};rt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};rt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};rt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};rt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};rt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};rt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};rt.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};rt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};rt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};rt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};rt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};rt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};rt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};rt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};rt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};rt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};rt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};rt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};rt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};rt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};rt.hough={a:6378270,rf:297,ellipseName:"Hough"};rt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};rt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};rt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};rt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};rt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};rt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};rt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};rt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};rt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};rt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};rt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};rt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var sm=rt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};rt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function am(e,t,i,n){var s=e*e,o=t*t,r=(s-o)/s,l=0;n?(e*=1-r*(kg+r*(Lg+r*Tg)),s=e*e,r=0):l=Math.sqrt(r);var c=(s-o)/o;return{es:r,e:l,ep2:c}}function om(e,t,i,n,s){if(!e){var o=xi(rt,n);o||(o=sm),e=o.a,t=o.b,i=o.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<G)&&(s=!0,t=e),{a:e,b:t,rf:i,sphere:s}}var Gt={};Gt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Gt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Gt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Gt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Gt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Gt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Gt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Gt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Gt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Gt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Gt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Gt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Gt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Gt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Gt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Gt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Gt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function rm(e,t,i,n,s,o,r){var l={};return e===void 0||e==="none"?l.datum_type=tr:l.datum_type=Pg,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=ji),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=Gi,l.datum_params[3]*=us,l.datum_params[4]*=us,l.datum_params[5]*=us,l.datum_params[6]=l.datum_params[6]/1e6+1)),r&&(l.datum_type=Mn,l.grids=r),l.a=i,l.b=n,l.es=s,l.ep2=o,l}var hu={};function hm(e,t){var i=new DataView(t),n=um(i),s=fm(i,n);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=dm(i,s,n),r={header:s,subgrids:o};return hu[e]=r,r}function lm(e){if(e===void 0)return null;var t=e.split(",");return t.map(cm)}function cm(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:hu[e]||null,isNull:!1}}function vn(e){return e/3600*Math.PI/180}function um(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function fm(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:ir(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function ir(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function dm(e,t,i){for(var n=176,s=[],o=0;o<t.nSubgrids;o++){var r=mm(e,n,i),l=pm(e,n,r,i),c=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),f=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);s.push({ll:[vn(r.lowerLongitude),vn(r.lowerLatitude)],del:[vn(r.longitudeInterval),vn(r.latitudeInterval)],lim:[c,f],count:r.gridNodeCount,cvs:gm(l)})}return s}function gm(e){return e.map(function(t){return[vn(t.longitudeShift),vn(t.latitudeShift)]})}function mm(e,t,i){return{name:ir(e,t+8,t+16).trim(),parent:ir(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function pm(e,t,i,n){for(var s=t+176,o=16,r=[],l=0;l<i.gridNodeCount;l++){var c={latitudeShift:e.getFloat32(s+l*o,n),longitudeShift:e.getFloat32(s+l*o+4,n),latitudeAccuracy:e.getFloat32(s+l*o+8,n),longitudeAccuracy:e.getFloat32(s+l*o+12,n)};r.push(c)}return r}function Ve(e,t){if(!(this instanceof Ve))return new Ve(e);t=t||function(f){if(f)throw f};var i=Vg(e);if(typeof i!="object"){t(e);return}var n=Ve.projections.get(i.projName);if(!n){t(e);return}if(i.datumCode&&i.datumCode!=="none"){var s=xi(Gt,i.datumCode);s&&(i.datum_params=i.datum_params||(s.towgs84?s.towgs84.split(","):null),i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var o=om(i.a,i.b,i.rf,i.ellps,i.sphere),r=am(o.a,o.b,o.rf,i.R_A),l=lm(i.nadgrids),c=i.datum||rm(i.datumCode,i.datum_params,o.a,o.b,r.es,r.ep2,l);nl(this,i),nl(this,n),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=c,this.init(),t(null,this)}Ve.projections=nm;Ve.projections.start();function _m(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===ji?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Gi?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function lu(e,t,i){var n=e.x,s=e.y,o=e.z?e.z:0,r,l,c,f;if(s<-F&&s>-1.001*F)s=-F;else if(s>F&&s<1.001*F)s=F;else{if(s<-F)return{x:-1/0,y:-1/0,z:e.z};if(s>F)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),l=Math.sin(s),f=Math.cos(s),c=l*l,r=i/Math.sqrt(1-t*c),{x:(r+o)*f*Math.cos(n),y:(r+o)*f*Math.sin(n),z:(r*(1-t)+o)*l}}function cu(e,t,i,n){var s=1e-12,o=s*s,r=30,l,c,f,d,m,_,v,y,b,M,w,S,k,E=e.x,T=e.y,O=e.z?e.z:0,I,z,W;if(l=Math.sqrt(E*E+T*T),c=Math.sqrt(E*E+T*T+O*O),l/i<s){if(I=0,c/i<s)return z=F,W=-n,{x:e.x,y:e.y,z:e.z}}else I=Math.atan2(T,E);f=O/c,d=l/c,m=1/Math.sqrt(1-t*(2-t)*d*d),y=d*(1-t)*m,b=f*m,k=0;do k++,v=i/Math.sqrt(1-t*b*b),W=l*y+O*b-v*(1-t*b*b),_=t*v/(v+W),m=1/Math.sqrt(1-_*(2-_)*d*d),M=d*(1-_)*m,w=f*m,S=w*y-M*b,y=M,b=w;while(S*S>o&&k<r);return z=Math.atan(w/Math.abs(M)),{x:I,y:z,z:W}}function vm(e,t,i){if(t===ji)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===Gi){var n=i[0],s=i[1],o=i[2],r=i[3],l=i[4],c=i[5],f=i[6];return{x:f*(e.x-c*e.y+l*e.z)+n,y:f*(c*e.x+e.y-r*e.z)+s,z:f*(-l*e.x+r*e.y+e.z)+o}}}function ym(e,t,i){if(t===ji)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===Gi){var n=i[0],s=i[1],o=i[2],r=i[3],l=i[4],c=i[5],f=i[6],d=(e.x-n)/f,m=(e.y-s)/f,_=(e.z-o)/f;return{x:d+c*m-l*_,y:-c*d+m+r*_,z:l*d-r*m+_}}}function ra(e){return e===ji||e===Gi}function xm(e,t,i){if(_m(e,t)||e.datum_type===tr||t.datum_type===tr)return i;var n=e.a,s=e.es;if(e.datum_type===Mn){var o=al(e,!1,i);if(o!==0)return;n=Qh,s=tl}var r=t.a,l=t.b,c=t.es;if(t.datum_type===Mn&&(r=Qh,l=Sg,c=tl),s===c&&n===r&&!ra(e.datum_type)&&!ra(t.datum_type))return i;if(i=lu(i,s,n),ra(e.datum_type)&&(i=vm(i,e.datum_type,e.datum_params)),ra(t.datum_type)&&(i=ym(i,t.datum_type,t.datum_params)),i=cu(i,c,r,l),t.datum_type===Mn){var f=al(t,!0,i);if(f!==0)return}return i}function al(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},o=[],r=0;r<e.grids.length;r++){var l=e.grids[r];if(o.push(l.name),l.isNull){s=n;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}var c=l.grid.subgrids[0],f=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,d=c.ll[0]-f,m=c.ll[1]-f,_=c.ll[0]+(c.lim[0]-1)*c.del[0]+f,v=c.ll[1]+(c.lim[1]-1)*c.del[1]+f;if(!(m>n.y||d>n.x||v<n.y||_<n.x)&&(s=bm(n,t,c),!isNaN(s.x)))break}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*je+" "+n.y*je+" tried: '"+o+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function bm(e,t,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var s={x:e.x,y:e.y};s.x-=i.ll[0],s.y-=i.ll[1],s.x=U(s.x-Math.PI)+Math.PI;var o=ol(s,i);if(t){if(isNaN(o.x))return n;o.x=s.x-o.x,o.y=s.y-o.y;var r=9,l=1e-12,c,f;do{if(f=ol(o,i),isNaN(f.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c={x:s.x-(f.x+o.x),y:s.y-(f.y+o.y)},o.x+=c.x,o.y+=c.y}while(r--&&Math.abs(c.x)>l&&Math.abs(c.y)>l);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=U(o.x+i.ll[0]),n.y=o.y+i.ll[1]}else isNaN(o.x)||(n.x=e.x+o.x,n.y=e.y+o.y);return n}function ol(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},n={x:Math.floor(i.x),y:Math.floor(i.y)},s={x:i.x-1*n.x,y:i.y-1*n.y},o={x:Number.NaN,y:Number.NaN},r;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return o;r=n.y*t.lim[0]+n.x;var l={x:t.cvs[r][0],y:t.cvs[r][1]};r++;var c={x:t.cvs[r][0],y:t.cvs[r][1]};r+=t.lim[0];var f={x:t.cvs[r][0],y:t.cvs[r][1]};r--;var d={x:t.cvs[r][0],y:t.cvs[r][1]},m=s.x*s.y,_=s.x*(1-s.y),v=(1-s.x)*(1-s.y),y=(1-s.x)*s.y;return o.x=v*l.x+_*c.x+y*d.x+m*f.x,o.y=v*l.y+_*c.y+y*d.y+m*f.y,o}function rl(e,t,i){var n=i.x,s=i.y,o=i.z||0,r,l,c,f={};for(c=0;c<3;c++)if(!(t&&c===2&&i.z===void 0))switch(c===0?(r=n,"ew".indexOf(e.axis[c])!==-1?l="x":l="y"):c===1?(r=s,"ns".indexOf(e.axis[c])!==-1?l="y":l="x"):(r=o,l="z"),e.axis[c]){case"e":f[l]=r;break;case"w":f[l]=-r;break;case"n":f[l]=r;break;case"s":f[l]=-r;break;case"u":i[l]!==void 0&&(f.z=r);break;case"d":i[l]!==void 0&&(f.z=-r);break;default:return null}return f}function uu(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function Mm(e){hl(e.x),hl(e.y)}function hl(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function wm(e,t){return(e.datum.datum_type===ji||e.datum.datum_type===Gi||e.datum.datum_type===Mn)&&t.datumCode!=="WGS84"||(t.datum.datum_type===ji||t.datum.datum_type===Gi||t.datum.datum_type===Mn)&&e.datumCode!=="WGS84"}function Ha(e,t,i,n){var s;Array.isArray(i)?i=uu(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var o=i.z!==void 0;if(Mm(i),e.datum&&t.datum&&wm(e,t)&&(s=new Ve("WGS84"),i=Ha(e,s,i,n),e=s),n&&e.axis!=="enu"&&(i=rl(e,!1,i)),e.projName==="longlat")i={x:i.x*Jt,y:i.y*Jt,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=xm(e.datum,t.datum,i),!!i)return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*je,y:i.y*je,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),n&&t.axis!=="enu"?rl(t,!0,i):(o||delete i.z,i)}var ll=Ve("WGS84");function Bo(e,t,i,n){var s,o,r;return Array.isArray(i)?(s=Ha(e,t,i,n)||{x:NaN,y:NaN},i.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(i.splice(3)):[s.x,s.y,i[2]].concat(i.splice(3)):[s.x,s.y].concat(i.splice(2)):[s.x,s.y]):(o=Ha(e,t,i,n),r=Object.keys(i),r.length===2||r.forEach(function(l){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;o[l]=i[l]}),o)}function cl(e){return e instanceof Ve?e:e.oProj?e.oProj:Ve(e)}function Bt(e,t,i){e=cl(e);var n=!1,s;return typeof t>"u"?(t=e,e=ll,n=!0):(typeof t.x<"u"||Array.isArray(t))&&(i=t,t=e,e=ll,n=!0),t=cl(t),i?Bo(e,t,i):(s={forward:function(o,r){return Bo(e,t,o,r)},inverse:function(o,r){return Bo(t,e,o,r)}},n&&(s.oProj=t),s)}var ul=6,fu="AJSAJS",du="AFAFAF",yn=65,de=73,ke=79,es=86,is=90;const Pm={forward:gu,inverse:Sm,toPoint:mu};function gu(e,t){return t=t||5,Tm(km({lat:e[1],lon:e[0]}),t)}function Sm(e){var t=wr(_u(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function mu(e){var t=wr(_u(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Fo(e){return e*(Math.PI/180)}function fl(e){return 180*(e/Math.PI)}function km(e){var t=e.lat,i=e.lon,n=6378137,s=.00669438,o=.9996,r,l,c,f,d,m,_,v=Fo(t),y=Fo(i),b,M;M=Math.floor((i+180)/6)+1,i===180&&(M=60),t>=56&&t<64&&i>=3&&i<12&&(M=32),t>=72&&t<84&&(i>=0&&i<9?M=31:i>=9&&i<21?M=33:i>=21&&i<33?M=35:i>=33&&i<42&&(M=37)),r=(M-1)*6-180+3,b=Fo(r),l=s/(1-s),c=n/Math.sqrt(1-s*Math.sin(v)*Math.sin(v)),f=Math.tan(v)*Math.tan(v),d=l*Math.cos(v)*Math.cos(v),m=Math.cos(v)*(y-b),_=n*((1-s/4-3*s*s/64-5*s*s*s/256)*v-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*v)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*v)-35*s*s*s/3072*Math.sin(6*v));var w=o*c*(m+(1-f+d)*m*m*m/6+(5-18*f+f*f+72*d-58*l)*m*m*m*m*m/120)+5e5,S=o*(_+c*Math.tan(v)*(m*m/2+(5-f+9*d+4*d*d)*m*m*m*m/24+(61-58*f+f*f+600*d-330*l)*m*m*m*m*m*m/720));return t<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(w),zoneNumber:M,zoneLetter:Lm(t)}}function wr(e){var t=e.northing,i=e.easting,n=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var o=.9996,r=6378137,l=.00669438,c,f=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),d,m,_,v,y,b,M,w,S,k=i-5e5,E=t;n<"N"&&(E-=1e7),M=(s-1)*6-180+3,c=l/(1-l),b=E/o,w=b/(r*(1-l/4-3*l*l/64-5*l*l*l/256)),S=w+(3*f/2-27*f*f*f/32)*Math.sin(2*w)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*w)+151*f*f*f/96*Math.sin(6*w),d=r/Math.sqrt(1-l*Math.sin(S)*Math.sin(S)),m=Math.tan(S)*Math.tan(S),_=c*Math.cos(S)*Math.cos(S),v=r*(1-l)/Math.pow(1-l*Math.sin(S)*Math.sin(S),1.5),y=k/(d*o);var T=S-d*Math.tan(S)/v*(y*y/2-(5+3*m+10*_-4*_*_-9*c)*y*y*y*y/24+(61+90*m+298*_+45*m*m-252*c-3*_*_)*y*y*y*y*y*y/720);T=fl(T);var O=(y-(1+2*m+_)*y*y*y/6+(5-2*_+28*m-3*_*_+8*c+24*m*m)*y*y*y*y*y/120)/Math.cos(S);O=M+fl(O);var I;if(e.accuracy){var z=wr({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});I={top:z.lat,right:z.lon,bottom:T,left:O}}else I={lat:T,lon:O};return I}function Lm(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function Tm(e,t){var i="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Cm(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+n.substr(n.length-5,t)}function Cm(e,t,i){var n=pu(i),s=Math.floor(e/1e5),o=Math.floor(t/1e5)%20;return Em(s,o,n)}function pu(e){var t=e%ul;return t===0&&(t=ul),t}function Em(e,t,i){var n=i-1,s=fu.charCodeAt(n),o=du.charCodeAt(n),r=s+e-1,l=o+t,c=!1;r>is&&(r=r-is+yn-1,c=!0),(r===de||s<de&&r>de||(r>de||s<de)&&c)&&r++,(r===ke||s<ke&&r>ke||(r>ke||s<ke)&&c)&&(r++,r===de&&r++),r>is&&(r=r-is+yn-1),l>es?(l=l-es+yn-1,c=!0):c=!1,(l===de||o<de&&l>de||(l>de||o<de)&&c)&&l++,(l===ke||o<ke&&l>ke||(l>ke||o<ke)&&c)&&(l++,l===de&&l++),l>es&&(l=l-es+yn-1);var f=String.fromCharCode(r)+String.fromCharCode(l);return f}function _u(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,n="",s,o=0;!/[A-Z]/.test(s=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;n+=s,o++}var r=parseInt(n,10);if(o===0||o+3>t)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(o++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+e;i=e.substring(o,o+=2);for(var c=pu(r),f=Am(i.charAt(0),c),d=Om(i.charAt(1),c);d<Im(l);)d+=2e6;var m=t-o;if(m%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var _=m/2,v=0,y=0,b,M,w,S,k;return _>0&&(b=1e5/Math.pow(10,_),M=e.substring(o,o+_),v=parseFloat(M)*b,w=e.substring(o+_),y=parseFloat(w)*b),S=v+f,k=y+d,{easting:S,northing:k,zoneLetter:l,zoneNumber:r,accuracy:b}}function Am(e,t){for(var i=fu.charCodeAt(t-1),n=1e5,s=!1;i!==e.charCodeAt(0);){if(i++,i===de&&i++,i===ke&&i++,i>is){if(s)throw"Bad character: "+e;i=yn,s=!0}n+=1e5}return n}function Om(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=du.charCodeAt(t-1),n=0,s=!1;i!==e.charCodeAt(0);){if(i++,i===de&&i++,i===ke&&i++,i>es){if(s)throw"Bad character: "+e;i=yn,s=!0}n+=1e5}return n}function Im(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function kn(e,t,i){if(!(this instanceof kn))return new kn(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}kn.fromMGRS=function(e){return new kn(mu(e))};kn.prototype.toMGRS=function(e){return gu([this.x,this.y],e)};var zm=1,Dm=.25,dl=.046875,gl=.01953125,ml=.01068115234375,Rm=.75,Nm=.46875,Bm=.013020833333333334,Fm=.007120768229166667,Wm=.3645833333333333,Hm=.005696614583333333,Zm=.3076171875;function vu(e){var t=[];t[0]=zm-e*(Dm+e*(dl+e*(gl+e*ml))),t[1]=e*(Rm-e*(dl+e*(gl+e*ml)));var i=e*e;return t[2]=i*(Nm-e*(Bm+e*Fm)),i*=e,t[3]=i*(Wm-e*Hm),t[4]=i*e*Zm,t}function to(e,t,i,n){return i*=t,t*=t,n[0]*e-i*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var jm=20;function yu(e,t,i){for(var n=1/(1-t),s=e,o=jm;o;--o){var r=Math.sin(s),l=1-t*r*r;if(l=(to(s,r,Math.cos(s),i)-e)*(l*Math.sqrt(l))*n,s-=l,Math.abs(l)<G)return s}return s}function Gm(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=vu(this.es),this.ml0=to(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Vm(e){var t=e.x,i=e.y,n=U(t-this.long0),s,o,r,l=Math.sin(i),c=Math.cos(i);if(this.es){var d=c*n,m=Math.pow(d,2),_=this.ep2*Math.pow(c,2),v=Math.pow(_,2),y=Math.abs(c)>G?Math.tan(i):0,b=Math.pow(y,2),M=Math.pow(b,2);s=1-this.es*Math.pow(l,2),d=d/Math.sqrt(s);var w=to(i,l,c,this.en);o=this.a*(this.k0*d*(1+m/6*(1-b+_+m/20*(5-18*b+M+14*_-58*b*_+m/42*(61+179*M-M*b-479*b)))))+this.x0,r=this.a*(this.k0*(w-this.ml0+l*n*d/2*(1+m/12*(5-b+9*_+4*v+m/30*(61+M-58*b+270*_-330*b*_+m/56*(1385+543*M-M*b-3111*b))))))+this.y0}else{var f=c*Math.sin(n);if(Math.abs(Math.abs(f)-1)<G)return 93;if(o=.5*this.a*this.k0*Math.log((1+f)/(1-f))+this.x0,r=c*Math.cos(n)/Math.sqrt(1-Math.pow(f,2)),f=Math.abs(r),f>=1){if(f-1>G)return 93;r=0}else r=Math.acos(r);i<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=o,e.y=r,e}function $m(e){var t,i,n,s,o=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+r/this.k0,i=yu(t,this.es,this.en),Math.abs(i)<F){var m=Math.sin(i),_=Math.cos(i),v=Math.abs(_)>G?Math.tan(i):0,y=this.ep2*Math.pow(_,2),b=Math.pow(y,2),M=Math.pow(v,2),w=Math.pow(M,2);t=1-this.es*Math.pow(m,2);var S=o*Math.sqrt(t)/this.k0,k=Math.pow(S,2);t=t*v,n=i-t*k/(1-this.es)*.5*(1-k/12*(5+3*M-9*y*M+y-4*b-k/30*(61+90*M-252*y*M+45*w+46*y-k/56*(1385+3633*M+4095*w+1574*w*M)))),s=U(this.long0+S*(1-k/6*(1+2*M+y-k/20*(5+28*M+24*w+8*y*M+6*y-k/42*(61+662*M+1320*w+720*w*M))))/_)}else n=F*Is(r),s=0;else{var l=Math.exp(o/this.k0),c=.5*(l-1/l),f=this.lat0+r/this.k0,d=Math.cos(f);t=Math.sqrt((1-Math.pow(d,2))/(1+Math.pow(c,2))),n=Math.asin(t),r<0&&(n=-n),c===0&&d===0?s=0:s=U(Math.atan2(c,d)+this.long0)}return e.x=s,e.y=n,e}var qm=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const ka={init:Gm,forward:Vm,inverse:$m,names:qm};function xu(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function Ie(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),n=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function Um(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function Ym(e){var t=Math.abs(e);return t=Um(t*(1+t/(Ie(1,t)+1))),e<0?-t:t}function Pr(e,t){for(var i=2*Math.cos(2*t),n=e.length-1,s=e[n],o=0,r;--n>=0;)r=-o+i*s+e[n],o=s,s=r;return t+r*Math.sin(2*t)}function Xm(e,t){for(var i=2*Math.cos(t),n=e.length-1,s=e[n],o=0,r;--n>=0;)r=-o+i*s+e[n],o=s,s=r;return Math.sin(t)*r}function Km(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function bu(e,t,i){for(var n=Math.sin(t),s=Math.cos(t),o=xu(i),r=Km(i),l=2*s*r,c=-2*n*o,f=e.length-1,d=e[f],m=0,_=0,v=0,y,b;--f>=0;)y=_,b=m,_=d,m=v,d=-y+l*_-c*m+e[f],v=-b+c*_+l*m;return l=n*r,c=s*o,[l*d-c*v,l*v+c*d]}function Jm(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ka.init.apply(this),this.forward=ka.forward,this.inverse=ka.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var n=Pr(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Xm(this.gtu,2*n))}function Qm(e){var t=U(e.x-this.long0),i=e.y;i=Pr(this.cbg,i);var n=Math.sin(i),s=Math.cos(i),o=Math.sin(t),r=Math.cos(t);i=Math.atan2(n,r*s),t=Math.atan2(o*s,Ie(n,s*r)),t=Ym(Math.tan(t));var l=bu(this.gtu,2*i,2*t);i=i+l[0],t=t+l[1];var c,f;return Math.abs(t)<=2.623395162778?(c=this.a*(this.Qn*t)+this.x0,f=this.a*(this.Qn*i+this.Zb)+this.y0):(c=1/0,f=1/0),e.x=c,e.y=f,e}function tp(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var n,s;if(Math.abs(t)<=2.623395162778){var o=bu(this.utg,2*i,2*t);i=i+o[0],t=t+o[1],t=Math.atan(xu(t));var r=Math.sin(i),l=Math.cos(i),c=Math.sin(t),f=Math.cos(t);i=Math.atan2(r*f,Ie(c,f*l)),t=Math.atan2(c,f*l),n=U(t+this.long0),s=Pr(this.cgb,i)}else n=1/0,s=1/0;return e.x=n,e.y=s,e}var ep=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const La={init:Jm,forward:Qm,inverse:tp,names:ep};function ip(e,t){if(e===void 0){if(e=Math.floor((U(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var np="etmerc";function sp(){var e=ip(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Jt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,La.init.apply(this),this.forward=La.forward,this.inverse=La.inverse}var ap=["Universal Transverse Mercator System","utm"];const op={init:sp,names:ap,dependsOn:np};function Sr(e,t){return Math.pow((1-e)/(1+e),t)}var rp=20;function hp(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+xt)/(Math.pow(Math.tan(.5*this.lat0+xt),this.C)*Sr(this.e*e,this.ratexp))}function lp(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+xt),this.C)*Sr(this.e*Math.sin(i),this.ratexp))-F,e.x=this.C*t,e}function cp(e){for(var t=1e-14,i=e.x/this.C,n=e.y,s=Math.pow(Math.tan(.5*n+xt)/this.K,1/this.C),o=rp;o>0&&(n=2*Math.atan(s*Sr(this.e*Math.sin(e.y),-.5*this.e))-F,!(Math.abs(n-e.y)<t));--o)e.y=n;return o?(e.x=i,e.y=n,e):null}var up=["gauss"];const kr={init:hp,forward:lp,inverse:cp,names:up};function fp(){kr.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function dp(e){var t,i,n,s;return e.x=U(e.x-this.long0),kr.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*n),e.x=s*i*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*i*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function gp(e){var t,i,n,s,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var r=2*Math.atan2(o,this.R2);t=Math.sin(r),i=Math.cos(r),s=Math.asin(i*this.sinc0+e.y*t*this.cosc0/o),n=Math.atan2(e.x*t,o*this.cosc0*i-e.y*this.sinc0*t)}else s=this.phic0,n=0;return e.x=n,e.y=s,kr.inverse.apply(this,[e]),e.x=U(e.x+this.long0),e}var mp=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const pp={init:fp,forward:dp,inverse:gp,names:mp};function _p(e,t,i){return t*=i,Math.tan(.5*(F+e))*Math.pow((1-t)/(1+t),.5*i)}function vp(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=G&&(this.k0=.5*(1+Is(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=G&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=G&&(this.k0=.5*this.cons*qe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/De(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=qe(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-F,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function yp(e){var t=e.x,i=e.y,n=Math.sin(i),s=Math.cos(i),o,r,l,c,f,d,m=U(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=G&&Math.abs(i+this.lat0)<=G?(e.x=NaN,e.y=NaN,e):this.sphere?(o=2*this.k0/(1+this.sinlat0*n+this.coslat0*s*Math.cos(m)),e.x=this.a*o*s*Math.sin(m)+this.x0,e.y=this.a*o*(this.coslat0*n-this.sinlat0*s*Math.cos(m))+this.y0,e):(r=2*Math.atan(this.ssfn_(i,n,this.e))-F,c=Math.cos(r),l=Math.sin(r),Math.abs(this.coslat0)<=G?(f=De(this.e,i*this.con,this.con*n),d=2*this.a*this.k0*f/this.cons,e.x=this.x0+d*Math.sin(t-this.long0),e.y=this.y0-this.con*d*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<G?(o=2*this.a*this.k0/(1+c*Math.cos(m)),e.y=o*l):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*c*Math.cos(m))),e.y=o*(this.cosX0*l-this.sinX0*c*Math.cos(m))+this.y0),e.x=o*c*Math.sin(m)+this.x0,e))}function xp(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,o,r=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(r/(2*this.a*this.k0));return t=this.long0,i=this.lat0,r<=G?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/r),Math.abs(this.coslat0)<G?this.lat0>0?t=U(this.long0+Math.atan2(e.x,-1*e.y)):t=U(this.long0+Math.atan2(e.x,e.y)):t=U(this.long0+Math.atan2(e.x*Math.sin(l),r*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=G){if(r<=G)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,n=r*this.cons/(2*this.a*this.k0),i=this.con*Ms(this.e,n),t=this.con*U(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=G?o=this.X0:(o=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/r),t=U(this.long0+Math.atan2(e.x*Math.sin(s),r*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),i=-1*Ms(this.e,Math.tan(.5*(F+o)));return e.x=t,e.y=i,e}var bp=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];const Mp={init:vp,forward:yp,inverse:xp,names:bp,ssfn_:_p};function wp(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,n=this.rf,s=1/n,o=2*s-Math.pow(s,2),r=this.e=Math.sqrt(o);this.R=this.k0*i*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+e/2)),f=Math.log((1+r*t)/(1-r*t));this.K=l-this.alpha*c+this.alpha*r/2*f}function Pp(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+i)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),r=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(o))),l=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,e.x=this.R*r+this.x0,e}function Sp(e){for(var t=e.x-this.x0,i=e.y-this.y0,n=t/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),r=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),l=this.lambda0+r/this.alpha,c=0,f=o,d=-1e3,m=0;Math.abs(f-d)>1e-7;){if(++m>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(f))/2)),d=f,f=2*Math.atan(Math.exp(c))-Math.PI/2}return e.x=l,e.y=f,e}var kp=["somerc"];const Lp={init:wp,forward:Pp,inverse:Sp,names:kp};var un=1e-7;function Tp(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1}function Cp(){var e,t,i,n,s,o,r,l,c,f,d=0,m,_=0,v=0,y=0,b=0,M=0,w=0;this.no_off=Tp(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var k=!1;if("rectified_grid_angle"in this&&(k=!0),S&&(w=this.alpha),k&&(d=this.rectified_grid_angle*Jt),S||k)_=this.longc;else if(v=this.long1,b=this.lat1,y=this.long2,M=this.lat2,Math.abs(b-M)<=un||(e=Math.abs(b))<=un||Math.abs(e-F)<=un||Math.abs(Math.abs(this.lat0)-F)<=un||Math.abs(Math.abs(M)-F)<=un)throw new Error;var E=1-this.es;t=Math.sqrt(E),Math.abs(this.lat0)>G?(l=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*l*l,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/E),this.A=this.B*this.k0*t/e,n=this.B*t/(i*Math.sqrt(e)),s=n*n-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(De(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=s=1),S||k?(S?(m=Math.asin(Math.sin(w)/n),k||(d=w)):(m=d,w=Math.asin(n*Math.sin(m))),this.lam0=_-Math.asin(.5*(s-1/s)*Math.tan(m))/this.B):(o=Math.pow(De(this.e,b,Math.sin(b)),this.B),r=Math.pow(De(this.e,M,Math.sin(M)),this.B),s=this.E/o,c=(r-o)/(r+o),f=this.E*this.E,f=(f-r*o)/(f+r*o),e=v-y,e<-Math.pi?y-=xs:e>Math.pi&&(y+=xs),this.lam0=U(.5*(v+y)-Math.atan(f*Math.tan(.5*this.B*(v-y))/c)/this.B),m=Math.atan(2*Math.sin(this.B*U(v-this.lam0))/(s-1/s)),d=w=Math.asin(n*Math.sin(m))),this.singam=Math.sin(m),this.cosgam=Math.cos(m),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(w))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*m,this.v_pole_n=this.ArB*Math.log(Math.tan(xt-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(xt+s))}function Ep(e){var t={},i,n,s,o,r,l,c,f;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-F)>G){if(r=this.E/Math.pow(De(this.e,e.y,Math.sin(e.y)),this.B),l=1/r,i=.5*(r-l),n=.5*(r+l),o=Math.sin(this.B*e.x),s=(i*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(s)-1)<G)throw new Error;f=.5*this.ArB*Math.log((1-s)/(1+s)),l=Math.cos(this.B*e.x),Math.abs(l)<un?c=this.A*e.x:c=this.ArB*Math.atan2(i*this.cosgam+o*this.singam,l)}else f=e.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*e.y;return this.no_rot?(t.x=c,t.y=f):(c-=this.u_0,t.x=f*this.cosrot+c*this.sinrot,t.y=c*this.cosrot-f*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Ap(e){var t,i,n,s,o,r,l,c={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*i),s=.5*(n-1/n),o=.5*(n+1/n),r=Math.sin(this.BrA*t),l=(r*this.cosgam+s*this.singam)/o,Math.abs(Math.abs(l)-1)<G)c.x=0,c.y=l<0?-F:F;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=Ms(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(s*this.cosgam-r*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c}var Op=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Ip={init:Cp,forward:Ep,inverse:Ap,names:Op};function zp(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<G)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),n=qe(this.e,t,i),s=De(this.e,this.lat1,t),o=Math.sin(this.lat2),r=Math.cos(this.lat2),l=qe(this.e,o,r),c=De(this.e,this.lat2,o),f=De(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>G?this.ns=Math.log(n/l)/Math.log(s/c):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Dp(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=G&&(i=Is(i)*(F-2*G));var n=Math.abs(Math.abs(i)-F),s,o;if(n>G)s=De(this.e,i,Math.sin(i)),o=this.a*this.f0*Math.pow(s,this.ns);else{if(n=i*this.ns,n<=0)return null;o=0}var r=this.ns*U(t-this.long0);return e.x=this.k0*(o*Math.sin(r))+this.x0,e.y=this.k0*(this.rh-o*Math.cos(r))+this.y0,e}function Rp(e){var t,i,n,s,o,r=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+l*l),i=1):(t=-Math.sqrt(r*r+l*l),i=-1);var c=0;if(t!==0&&(c=Math.atan2(i*r,i*l)),t!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(t/(this.a*this.f0),i),s=Ms(this.e,n),s===-9999)return null}else s=-F;return o=U(c/this.ns+this.long0),e.x=o,e.y=s,e}var Np=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Bp={init:zp,forward:Dp,inverse:Rp,names:Np};function Fp(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Wp(e){var t,i,n,s,o,r,l,c=e.x,f=e.y,d=U(c-this.long0);return t=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/t)-this.s45),n=-d*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),o=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(s)),r=this.n*o,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=l*Math.cos(r)/1,e.x=l*Math.sin(r)/1,this.czech||(e.y*=-1,e.x*=-1),e}function Hp(e){var t,i,n,s,o,r,l,c,f=e.x;e.x=e.y,e.y=f,this.czech||(e.y*=-1,e.x*=-1),r=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.atan2(e.y,e.x),s=o/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),i=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(t)),e.x=this.long0-i/this.alfa,l=t,c=0;var d=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-e.y)<1e-10&&(c=1),l=e.y,d+=1;while(c===0&&d<15);return d>=15?null:e}var Zp=["Krovak","krovak"];const jp={init:Fp,forward:Wp,inverse:Hp,names:Zp};function le(e,t,i,n,s){return e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)}function zs(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Ds(e){return .375*e*(1+.25*e*(1+.46875*e))}function Rs(e){return .05859375*e*e*(1+.75*e)}function Ns(e){return e*e*e*(35/3072)}function Ln(e,t,i){var n=t*i;return e/Math.sqrt(1-n*n)}function In(e){return Math.abs(e)<F?e:e-Is(e)*Math.PI}function Za(e,t,i,n,s){var o,r;o=e/t;for(var l=0;l<15;l++)if(r=(e-(t*o-i*Math.sin(2*o)+n*Math.sin(4*o)-s*Math.sin(6*o)))/(t-2*i*Math.cos(2*o)+4*n*Math.cos(4*o)-6*s*Math.cos(6*o)),o+=r,Math.abs(r)<=1e-10)return o;return NaN}function Gp(){this.sphere||(this.e0=zs(this.es),this.e1=Ds(this.es),this.e2=Rs(this.es),this.e3=Ns(this.es),this.ml0=this.a*le(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Vp(e){var t,i,n=e.x,s=e.y;if(n=U(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var o=Math.sin(s),r=Math.cos(s),l=Ln(this.a,this.e,o),c=Math.tan(s)*Math.tan(s),f=n*Math.cos(s),d=f*f,m=this.es*r*r/(1-this.es),_=this.a*le(this.e0,this.e1,this.e2,this.e3,s);t=l*f*(1-d*c*(1/6-(8-c+8*m)*d/120)),i=_-this.ml0+l*o/r*d*(.5+(5-c+6*m)*d/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function $p(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,s;if(this.sphere){var o=i+this.lat0;n=Math.asin(Math.sin(o)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(o))}else{var r=this.ml0/this.a+i,l=Za(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-F)<=G)return e.x=this.long0,e.y=F,i<0&&(e.y*=-1),e;var c=Ln(this.a,this.e,Math.sin(l)),f=c*c*c/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(l),2),m=t*this.a/c,_=m*m;n=l-c*Math.tan(l)/f*m*m*(.5-(1+3*d)*m*m/24),s=m*(1-_*(d/3+(1+3*d)*d*_/15))/Math.cos(l)}return e.x=U(s+this.long0),e.y=In(n),e}var qp=["Cassini","Cassini_Soldner","cass"];const Up={init:Gp,forward:Vp,inverse:$p,names:qp};function vi(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var Yp=1,Xp=2,Kp=3,Jp=4;function Qp(){var e=Math.abs(this.lat0);if(Math.abs(e-F)<G?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<G?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=vi(this.e,1),this.mmf=.5/(1-this.es),this.apa=h_(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=vi(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function t_(e){var t,i,n,s,o,r,l,c,f,d,m=e.x,_=e.y;if(m=U(m-this.long0),this.sphere){if(o=Math.sin(_),d=Math.cos(_),n=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+d*n:1+this.sinph0*o+this.cosph0*d*n,i<=G)return null;i=Math.sqrt(2/i),t=i*d*Math.sin(m),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*d*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(_+this.lat0)<G)return null;i=xt-_*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(m),i*=n}}else{switch(l=0,c=0,f=0,n=Math.cos(m),s=Math.sin(m),o=Math.sin(_),r=vi(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=r/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:f=1+this.sinb1*l+this.cosb1*c*n;break;case this.EQUIT:f=1+c*n;break;case this.N_POLE:f=F+_,r=this.qp-r;break;case this.S_POLE:f=_-F,r=this.qp+r;break}if(Math.abs(f)<G)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),this.mode===this.OBLIQ?i=this.ymf*f*(this.cosb1*l-this.sinb1*c*n):i=(f=Math.sqrt(2/(1+c*n)))*l*this.ymf,t=this.xmf*f*c*s;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(f=Math.sqrt(r))*s,i=n*(this.mode===this.S_POLE?f:-f)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function e_(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,s,o,r,l,c,f;if(this.sphere){var d=0,m,_=0;if(m=Math.sqrt(t*t+i*i),s=m*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_=Math.sin(s),d=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(m)<=G?0:Math.asin(i*_/m),t*=_,i=d*m;break;case this.OBLIQ:s=Math.abs(m)<=G?this.lat0:Math.asin(d*this.sinph0+i*_*this.cosph0/m),t*=_*this.cosph0,i=(d-Math.sin(s)*this.sinph0)*m;break;case this.N_POLE:i=-i,s=F-s;break;case this.S_POLE:s-=F;break}n=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(f=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,c=Math.sqrt(t*t+i*i),c<G)return e.x=this.long0,e.y=this.lat0,e;r=2*Math.asin(.5*c/this.rq),o=Math.cos(r),t*=r=Math.sin(r),this.mode===this.OBLIQ?(f=o*this.sinb1+i*r*this.cosb1/c,l=this.qp*f,i=c*this.cosb1*o-i*this.sinb1*r):(f=i*r/c,l=this.qp*f,i=c*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),l=t*t+i*i,!l)return e.x=this.long0,e.y=this.lat0,e;f=1-l/this.qp,this.mode===this.S_POLE&&(f=-f)}n=Math.atan2(t,i),s=l_(Math.asin(f),this.apa)}return e.x=U(this.long0+n),e.y=s,e}var i_=.3333333333333333,n_=.17222222222222222,s_=.10257936507936508,a_=.06388888888888888,o_=.0664021164021164,r_=.016415012942191543;function h_(e){var t,i=[];return i[0]=e*i_,t=e*e,i[0]+=t*n_,i[1]=t*a_,t*=e,i[0]+=t*s_,i[1]+=t*o_,i[2]=t*r_,i}function l_(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var c_=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const u_={init:Qp,forward:t_,inverse:e_,names:c_,S_POLE:Yp,N_POLE:Xp,EQUIT:Kp,OBLIQ:Jp};function bi(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function f_(){Math.abs(this.lat1+this.lat2)<G||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=qe(this.e3,this.sin_po,this.cos_po),this.qs1=vi(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=qe(this.e3,this.sin_po,this.cos_po),this.qs2=vi(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=vi(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>G?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function d_(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=vi(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*U(t-this.long0),r=s*Math.sin(o)+this.x0,l=this.rh-s*Math.cos(o)+this.y0;return e.x=r,e.y=l,e}function g_(e){var t,i,n,s,o,r;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),s=0,t!==0&&(s=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,r=this.phi1z(this.e3,i)),o=U(s/this.ns0+this.long0),e.x=o,e.y=r,e}function m_(e,t){var i,n,s,o,r,l=bi(.5*t);if(e<G)return l;for(var c=e*e,f=1;f<=25;f++)if(i=Math.sin(l),n=Math.cos(l),s=e*i,o=1-s*s,r=.5*o*o/n*(t/(1-c)-i/o+.5/e*Math.log((1-s)/(1+s))),l=l+r,Math.abs(r)<=1e-7)return l;return null}var p_=["Albers_Conic_Equal_Area","Albers","aea"];const __={init:f_,forward:d_,inverse:g_,names:p_,phi1z:m_};function v_(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function y_(e){var t,i,n,s,o,r,l,c,f=e.x,d=e.y;return n=U(f-this.long0),t=Math.sin(d),i=Math.cos(d),s=Math.cos(n),r=this.sin_p14*t+this.cos_p14*i*s,o=1,r>0||Math.abs(r)<=G?(l=this.x0+this.a*o*i*Math.sin(n)/r,c=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*i*s)/r):(l=this.x0+this.infinity_dist*i*Math.sin(n),c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*s)),e.x=l,e.y=c,e}function x_(e){var t,i,n,s,o,r;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),i=Math.sin(s),n=Math.cos(s),r=bi(n*this.sin_p14+e.y*i*this.cos_p14/t),o=Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i),o=U(this.long0+o)):(r=this.phic0,o=0),e.x=o,e.y=r,e}var b_=["gnom"];const M_={init:v_,forward:y_,inverse:x_,names:b_};function w_(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*F:F;for(var n=Math.asin(.5*t),s,o,r,l,c=0;c<30;c++)if(o=Math.sin(n),r=Math.cos(n),l=e*o,s=Math.pow(1-l*l,2)/(2*r)*(t/(1-e*e)-o/(1-l*l)+.5/e*Math.log((1-l)/(1+l))),n+=s,Math.abs(s)<=1e-10)return n;return NaN}function P_(){this.sphere||(this.k0=qe(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function S_(e){var t=e.x,i=e.y,n,s,o=U(t-this.long0);if(this.sphere)n=this.x0+this.a*o*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var r=vi(this.e,Math.sin(i));n=this.x0+this.a*this.k0*o,s=this.y0+this.a*r*.5/this.k0}return e.x=n,e.y=s,e}function k_(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=U(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=w_(this.e,2*e.y*this.k0/this.a),t=U(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}var L_=["cea"];const T_={init:P_,forward:S_,inverse:k_,names:L_};function C_(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function E_(e){var t=e.x,i=e.y,n=U(t-this.long0),s=In(i-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*s,e}function A_(e){var t=e.x,i=e.y;return e.x=U(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=In(this.lat0+(i-this.y0)/this.a),e}var O_=["Equirectangular","Equidistant_Cylindrical","eqc"];const I_={init:C_,forward:E_,inverse:A_,names:O_};var pl=20;function z_(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=zs(this.es),this.e1=Ds(this.es),this.e2=Rs(this.es),this.e3=Ns(this.es),this.ml0=this.a*le(this.e0,this.e1,this.e2,this.e3,this.lat0)}function D_(e){var t=e.x,i=e.y,n,s,o,r=U(t-this.long0);if(o=r*Math.sin(i),this.sphere)Math.abs(i)<=G?(n=this.a*r,s=-1*this.a*this.lat0):(n=this.a*Math.sin(o)/Math.tan(i),s=this.a*(In(i-this.lat0)+(1-Math.cos(o))/Math.tan(i)));else if(Math.abs(i)<=G)n=this.a*r,s=-1*this.ml0;else{var l=Ln(this.a,this.e,Math.sin(i))/Math.tan(i);n=l*Math.sin(o),s=this.a*le(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+l*(1-Math.cos(o))}return e.x=n+this.x0,e.y=s+this.y0,e}function R_(e){var t,i,n,s,o,r,l,c,f;if(n=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=G)t=U(n/this.a+this.long0),i=0;else{r=this.lat0+s/this.a,l=n*n/this.a/this.a+r*r,c=r;var d;for(o=pl;o;--o)if(d=Math.tan(c),f=-1*(r*(c*d+1)-c-.5*(c*c+l)*d)/((c-r)/d-1),c+=f,Math.abs(f)<=G){i=c;break}t=U(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=G)i=0,t=U(this.long0+n/this.a);else{r=(this.ml0+s)/this.a,l=n*n/this.a/this.a+r*r,c=r;var m,_,v,y,b;for(o=pl;o;--o)if(b=this.e*Math.sin(c),m=Math.sqrt(1-b*b)*Math.tan(c),_=this.a*le(this.e0,this.e1,this.e2,this.e3,c),v=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),y=_/this.a,f=(r*(m*y+1)-y-.5*m*(y*y+l))/(this.es*Math.sin(2*c)*(y*y+l-2*r*y)/(4*m)+(r-y)*(m*v-2/Math.sin(2*c))-v),c-=f,Math.abs(f)<=G){i=c;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=U(this.long0+Math.asin(n*m/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}var N_=["Polyconic","poly"];const B_={init:z_,forward:D_,inverse:R_,names:N_};function F_(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function W_(e){var t,i=e.x,n=e.y,s=n-this.lat0,o=i-this.long0,r=s/us*1e-5,l=o,c=1,f=0;for(t=1;t<=10;t++)c=c*r,f=f+this.A[t]*c;var d=f,m=l,_=1,v=0,y,b,M=0,w=0;for(t=1;t<=6;t++)y=_*d-v*m,b=v*d+_*m,_=y,v=b,M=M+this.B_re[t]*_-this.B_im[t]*v,w=w+this.B_im[t]*_+this.B_re[t]*v;return e.x=w*this.a+this.x0,e.y=M*this.a+this.y0,e}function H_(e){var t,i=e.x,n=e.y,s=i-this.x0,o=n-this.y0,r=o/this.a,l=s/this.a,c=1,f=0,d,m,_=0,v=0;for(t=1;t<=6;t++)d=c*r-f*l,m=f*r+c*l,c=d,f=m,_=_+this.C_re[t]*c-this.C_im[t]*f,v=v+this.C_im[t]*c+this.C_re[t]*f;for(var y=0;y<this.iterations;y++){var b=_,M=v,w,S,k=r,E=l;for(t=2;t<=6;t++)w=b*_-M*v,S=M*_+b*v,b=w,M=S,k=k+(t-1)*(this.B_re[t]*b-this.B_im[t]*M),E=E+(t-1)*(this.B_im[t]*b+this.B_re[t]*M);b=1,M=0;var T=this.B_re[1],O=this.B_im[1];for(t=2;t<=6;t++)w=b*_-M*v,S=M*_+b*v,b=w,M=S,T=T+t*(this.B_re[t]*b-this.B_im[t]*M),O=O+t*(this.B_im[t]*b+this.B_re[t]*M);var I=T*T+O*O;_=(k*T+E*O)/I,v=(E*T-k*O)/I}var z=_,W=v,Z=1,j=0;for(t=1;t<=9;t++)Z=Z*z,j=j+this.D[t]*Z;var Y=this.lat0+j*us*1e5,it=this.long0+W;return e.x=it,e.y=Y,e}var Z_=["New_Zealand_Map_Grid","nzmg"];const j_={init:F_,forward:W_,inverse:H_,names:Z_};function G_(){}function V_(e){var t=e.x,i=e.y,n=U(t-this.long0),s=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=s,e.y=o,e}function $_(e){e.x-=this.x0,e.y-=this.y0;var t=U(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var q_=["Miller_Cylindrical","mill"];const U_={init:G_,forward:V_,inverse:$_,names:q_};var Y_=20;function X_(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=vu(this.es)}function K_(e){var t,i,n=e.x,s=e.y;if(n=U(n-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var o=this.n*Math.sin(s),r=Y_;r;--r){var l=(this.m*s+Math.sin(s)-o)/(this.m+Math.cos(s));if(s-=l,Math.abs(l)<G)break}t=this.a*this.C_x*n*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var c=Math.sin(s),f=Math.cos(s);i=this.a*to(s,c,f,this.en),t=this.a*n*f/Math.sqrt(1-this.es*c*c)}return e.x=t,e.y=i,e}function J_(e){var t,i,n,s;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=bi((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=bi(Math.sin(t)/this.n)),n=U(n+this.long0),t=In(t)):(t=yu(e.y/this.a,this.es,this.en),s=Math.abs(t),s<F?(s=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),n=U(i)):s-G<F&&(n=this.long0)),e.x=n,e.y=t,e}var Q_=["Sinusoidal","sinu"];const t0={init:X_,forward:K_,inverse:J_,names:Q_};function e0(){}function i0(e){for(var t=e.x,i=e.y,n=U(t-this.long0),s=i,o=Math.PI*Math.sin(i);;){var r=-(s+Math.sin(s)-o)/(1+Math.cos(s));if(s+=r,Math.abs(r)<G)break}s/=2,Math.PI/2-Math.abs(i)<G&&(n=0);var l=.900316316158*this.a*n*Math.cos(s)+this.x0,c=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=l,e.y=c,e}function n0(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var n=U(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return e.x=n,e.y=s,e}var s0=["Mollweide","moll"];const a0={init:e0,forward:i0,inverse:n0,names:s0};function o0(){Math.abs(this.lat1+this.lat2)<G||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=zs(this.es),this.e1=Ds(this.es),this.e2=Rs(this.es),this.e3=Ns(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=qe(this.e,this.sinphi,this.cosphi),this.ml1=le(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<G?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=qe(this.e,this.sinphi,this.cosphi),this.ml2=le(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=le(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function r0(e){var t=e.x,i=e.y,n;if(this.sphere)n=this.a*(this.g-i);else{var s=le(this.e0,this.e1,this.e2,this.e3,i);n=this.a*(this.g-s)}var o=this.ns*U(t-this.long0),r=this.x0+n*Math.sin(o),l=this.y0+this.rh-n*Math.cos(o);return e.x=r,e.y=l,e}function h0(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,n,s;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;if(i!==0&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return s=U(this.long0+o/this.ns),n=In(this.g-i/this.a),e.x=s,e.y=n,e;var r=this.g-i/this.a;return n=Za(r,this.e0,this.e1,this.e2,this.e3),s=U(this.long0+o/this.ns),e.x=s,e.y=n,e}var l0=["Equidistant_Conic","eqdc"];const c0={init:o0,forward:r0,inverse:h0,names:l0};function u0(){this.R=this.a}function f0(e){var t=e.x,i=e.y,n=U(t-this.long0),s,o;Math.abs(i)<=G&&(s=this.x0+this.R*n,o=this.y0);var r=bi(2*Math.abs(i/Math.PI));(Math.abs(n)<=G||Math.abs(Math.abs(i)-F)<=G)&&(s=this.x0,i>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*r):o=this.y0+Math.PI*this.R*-Math.tan(.5*r));var l=.5*Math.abs(Math.PI/n-n/Math.PI),c=l*l,f=Math.sin(r),d=Math.cos(r),m=d/(f+d-1),_=m*m,v=m*(2/f-1),y=v*v,b=Math.PI*this.R*(l*(m-y)+Math.sqrt(c*(m-y)*(m-y)-(y+c)*(_-y)))/(y+c);n<0&&(b=-b),s=this.x0+b;var M=c+m;return b=Math.PI*this.R*(v*M-l*Math.sqrt((y+c)*(c+1)-M*M))/(y+c),i>=0?o=this.y0+b:o=this.y0-b,e.x=s,e.y=o,e}function d0(e){var t,i,n,s,o,r,l,c,f,d,m,_,v;return e.x-=this.x0,e.y-=this.y0,m=Math.PI*this.R,n=e.x/m,s=e.y/m,o=n*n+s*s,r=-Math.abs(s)*(1+o),l=r-2*s*s+n*n,c=-2*r+1+2*s*s+o*o,v=s*s/c+(2*l*l*l/c/c/c-9*r*l/c/c)/27,f=(r-l*l/3/c)/c,d=2*Math.sqrt(-f/3),m=3*v/f/d,Math.abs(m)>1&&(m>=0?m=1:m=-1),_=Math.acos(m)/3,e.y>=0?i=(-d*Math.cos(_+Math.PI/3)-l/3/c)*Math.PI:i=-(-d*Math.cos(_+Math.PI/3)-l/3/c)*Math.PI,Math.abs(n)<G?t=this.long0:t=U(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-s*s)+o*o))/2/n),e.x=t,e.y=i,e}var g0=["Van_der_Grinten_I","VanDerGrinten","vandg"];const m0={init:u0,forward:f0,inverse:d0,names:g0};function p0(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _0(e){var t=e.x,i=e.y,n=Math.sin(e.y),s=Math.cos(e.y),o=U(t-this.long0),r,l,c,f,d,m,_,v,y,b,M,w,S,k,E,T,O,I,z,W,Z,j,Y;return this.sphere?Math.abs(this.sin_p12-1)<=G?(e.x=this.x0+this.a*(F-i)*Math.sin(o),e.y=this.y0-this.a*(F-i)*Math.cos(o),e):Math.abs(this.sin_p12+1)<=G?(e.x=this.x0+this.a*(F+i)*Math.sin(o),e.y=this.y0+this.a*(F+i)*Math.cos(o),e):(I=this.sin_p12*n+this.cos_p12*s*Math.cos(o),T=Math.acos(I),O=T?T/Math.sin(T):1,e.x=this.x0+this.a*O*s*Math.sin(o),e.y=this.y0+this.a*O*(this.cos_p12*n-this.sin_p12*s*Math.cos(o)),e):(r=zs(this.es),l=Ds(this.es),c=Rs(this.es),f=Ns(this.es),Math.abs(this.sin_p12-1)<=G?(d=this.a*le(r,l,c,f,F),m=this.a*le(r,l,c,f,i),e.x=this.x0+(d-m)*Math.sin(o),e.y=this.y0-(d-m)*Math.cos(o),e):Math.abs(this.sin_p12+1)<=G?(d=this.a*le(r,l,c,f,F),m=this.a*le(r,l,c,f,i),e.x=this.x0+(d+m)*Math.sin(o),e.y=this.y0+(d+m)*Math.cos(o),e):(_=n/s,v=Ln(this.a,this.e,this.sin_p12),y=Ln(this.a,this.e,n),b=Math.atan((1-this.es)*_+this.es*v*this.sin_p12/(y*s)),M=Math.atan2(Math.sin(o),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(o)),M===0?z=Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(M)-Math.PI)<=G?z=-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):z=Math.asin(Math.sin(o)*Math.cos(b)/Math.sin(M)),w=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(M)/Math.sqrt(1-this.es),k=w*S,E=S*S,W=z*z,Z=W*z,j=Z*z,Y=j*z,T=v*z*(1-W*E*(1-E)/6+Z/8*k*(1-2*E)+j/120*(E*(4-7*E)-3*w*w*(1-7*E))-Y/48*k),e.x=this.x0+T*Math.sin(M),e.y=this.y0+T*Math.cos(M),e))}function v0(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,o,r,l,c,f,d,m,_,v,y,b,M,w,S,k,E,T,O,I,z;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*F*this.a?void 0:(i=t/this.a,n=Math.sin(i),s=Math.cos(i),o=this.long0,Math.abs(t)<=G?r=this.lat0:(r=bi(s*this.sin_p12+e.y*n*this.cos_p12/t),l=Math.abs(this.lat0)-F,Math.abs(l)<=G?this.lat0>=0?o=U(this.long0+Math.atan2(e.x,-e.y)):o=U(this.long0-Math.atan2(-e.x,e.y)):o=U(this.long0+Math.atan2(e.x*n,t*this.cos_p12*s-e.y*this.sin_p12*n))),e.x=o,e.y=r,e)):(c=zs(this.es),f=Ds(this.es),d=Rs(this.es),m=Ns(this.es),Math.abs(this.sin_p12-1)<=G?(_=this.a*le(c,f,d,m,F),t=Math.sqrt(e.x*e.x+e.y*e.y),v=_-t,r=Za(v/this.a,c,f,d,m),o=U(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=r,e):Math.abs(this.sin_p12+1)<=G?(_=this.a*le(c,f,d,m,F),t=Math.sqrt(e.x*e.x+e.y*e.y),v=t-_,r=Za(v/this.a,c,f,d,m),o=U(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=r,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),M=Math.atan2(e.x,e.y),y=Ln(this.a,this.e,this.sin_p12),w=Math.cos(M),S=this.e*this.cos_p12*w,k=-S*S/(1-this.es),E=3*this.es*(1-k)*this.sin_p12*this.cos_p12*w/(1-this.es),T=t/y,O=T-k*(1+k)*Math.pow(T,3)/6-E*(1+3*k)*Math.pow(T,4)/24,I=1-k*O*O/2-T*O*O*O/6,b=Math.asin(this.sin_p12*Math.cos(O)+this.cos_p12*Math.sin(O)*w),o=U(this.long0+Math.asin(Math.sin(M)*Math.sin(O)/Math.cos(b))),z=Math.sin(b),r=Math.atan2((z-this.es*I*this.sin_p12)*Math.tan(b),z*(1-this.es)),e.x=o,e.y=r,e))}var y0=["Azimuthal_Equidistant","aeqd"];const x0={init:p0,forward:_0,inverse:v0,names:y0};function b0(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function M0(e){var t,i,n,s,o,r,l,c,f=e.x,d=e.y;return n=U(f-this.long0),t=Math.sin(d),i=Math.cos(d),s=Math.cos(n),r=this.sin_p14*t+this.cos_p14*i*s,o=1,(r>0||Math.abs(r)<=G)&&(l=this.a*o*i*Math.sin(n),c=this.y0+this.a*o*(this.cos_p14*t-this.sin_p14*i*s)),e.x=l,e.y=c,e}function w0(e){var t,i,n,s,o,r,l;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=bi(t/this.a),n=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(t)<=G?(l=this.lat0,e.x=r,e.y=l,e):(l=bi(s*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.abs(this.lat0)-F,Math.abs(o)<=G?(this.lat0>=0?r=U(this.long0+Math.atan2(e.x,-e.y)):r=U(this.long0-Math.atan2(-e.x,e.y)),e.x=r,e.y=l,e):(r=U(this.long0+Math.atan2(e.x*n,t*this.cos_p14*s-e.y*this.sin_p14*n)),e.x=r,e.y=l,e))}var P0=["ortho"];const S0={init:b0,forward:M0,inverse:w0,names:P0};var zt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},bt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function k0(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=F-xt/2?this.face=zt.TOP:this.lat0<=-(F-xt/2)?this.face=zt.BOTTOM:Math.abs(this.long0)<=xt?this.face=zt.FRONT:Math.abs(this.long0)<=F+xt?this.face=this.long0>0?zt.RIGHT:zt.LEFT:this.face=zt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function L0(e){var t={x:0,y:0},i,n,s,o,r,l,c={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,n=e.x,this.face===zt.TOP)o=F-i,n>=xt&&n<=F+xt?(c.value=bt.AREA_0,s=n-F):n>F+xt||n<=-(F+xt)?(c.value=bt.AREA_1,s=n>0?n-Wt:n+Wt):n>-(F+xt)&&n<=-xt?(c.value=bt.AREA_2,s=n+F):(c.value=bt.AREA_3,s=n);else if(this.face===zt.BOTTOM)o=F+i,n>=xt&&n<=F+xt?(c.value=bt.AREA_0,s=-n+F):n<xt&&n>=-xt?(c.value=bt.AREA_1,s=-n):n<-xt&&n>=-(F+xt)?(c.value=bt.AREA_2,s=-n-F):(c.value=bt.AREA_3,s=n>0?-n+Wt:-n-Wt);else{var f,d,m,_,v,y,b;this.face===zt.RIGHT?n=wn(n,+F):this.face===zt.BACK?n=wn(n,+Wt):this.face===zt.LEFT&&(n=wn(n,-F)),_=Math.sin(i),v=Math.cos(i),y=Math.sin(n),b=Math.cos(n),f=v*b,d=v*y,m=_,this.face===zt.FRONT?(o=Math.acos(f),s=ha(o,m,d,c)):this.face===zt.RIGHT?(o=Math.acos(d),s=ha(o,m,-f,c)):this.face===zt.BACK?(o=Math.acos(-f),s=ha(o,m,-d,c)):this.face===zt.LEFT?(o=Math.acos(-d),s=ha(o,m,f,c)):(o=s=0,c.value=bt.AREA_0)}return l=Math.atan(12/Wt*(s+Math.acos(Math.sin(s)*Math.cos(xt))-F)),r=Math.sqrt((1-Math.cos(o))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(s))))),c.value===bt.AREA_1?l+=F:c.value===bt.AREA_2?l+=Wt:c.value===bt.AREA_3&&(l+=1.5*Wt),t.x=r*Math.cos(l),t.y=r*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function T0(e){var t={lam:0,phi:0},i,n,s,o,r,l,c,f,d,m={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?m.value=bt.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(m.value=bt.AREA_1,i-=F):e.x<0&&-e.x>=Math.abs(e.y)?(m.value=bt.AREA_2,i=i<0?i+Wt:i-Wt):(m.value=bt.AREA_3,i+=F),d=Wt/12*Math.tan(i),r=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),l=Math.atan(r),s=Math.cos(i),o=Math.tan(n),c=1-s*s*o*o*(1-Math.cos(Math.atan(1/Math.cos(l)))),c<-1?c=-1:c>1&&(c=1),this.face===zt.TOP)f=Math.acos(c),t.phi=F-f,m.value===bt.AREA_0?t.lam=l+F:m.value===bt.AREA_1?t.lam=l<0?l+Wt:l-Wt:m.value===bt.AREA_2?t.lam=l-F:t.lam=l;else if(this.face===zt.BOTTOM)f=Math.acos(c),t.phi=f-F,m.value===bt.AREA_0?t.lam=-l+F:m.value===bt.AREA_1?t.lam=-l:m.value===bt.AREA_2?t.lam=-l-F:t.lam=l<0?-l-Wt:-l+Wt;else{var _,v,y;_=c,d=_*_,d>=1?y=0:y=Math.sqrt(1-d)*Math.sin(l),d+=y*y,d>=1?v=0:v=Math.sqrt(1-d),m.value===bt.AREA_1?(d=v,v=-y,y=d):m.value===bt.AREA_2?(v=-v,y=-y):m.value===bt.AREA_3&&(d=v,v=y,y=-d),this.face===zt.RIGHT?(d=_,_=-v,v=d):this.face===zt.BACK?(_=-_,v=-v):this.face===zt.LEFT&&(d=_,_=v,v=-d),t.phi=Math.acos(-y)-F,t.lam=Math.atan2(v,_),this.face===zt.RIGHT?t.lam=wn(t.lam,-F):this.face===zt.BACK?t.lam=wn(t.lam,-Wt):this.face===zt.LEFT&&(t.lam=wn(t.lam,+F))}if(this.es!==0){var b,M,w;b=t.phi<0?1:0,M=Math.tan(t.phi),w=this.b/Math.sqrt(M*M+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-w*w)/(this.one_minus_f*w)),b&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function ha(e,t,i,n){var s;return e<G?(n.value=bt.AREA_0,s=0):(s=Math.atan2(t,i),Math.abs(s)<=xt?n.value=bt.AREA_0:s>xt&&s<=F+xt?(n.value=bt.AREA_1,s-=F):s>F+xt||s<=-(F+xt)?(n.value=bt.AREA_2,s=s>=0?s-Wt:s+Wt):(n.value=bt.AREA_3,s+=F)),s}function wn(e,t){var i=e+t;return i<-Wt?i+=xs:i>+Wt&&(i-=xs),i}var C0=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const E0={init:k0,forward:L0,inverse:T0,names:C0};var nr=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ns=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Mu=.8487,wu=1.3523,Pu=je/5,A0=1/Pu,xn=18,ja=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},O0=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function I0(e,t,i,n){for(var s=t;n;--n){var o=e(s);if(s-=o,Math.abs(o)<i)break}return s}function z0(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function D0(e){var t=U(e.x-this.long0),i=Math.abs(e.y),n=Math.floor(i*Pu);n<0?n=0:n>=xn&&(n=xn-1),i=je*(i-A0*n);var s={x:ja(nr[n],i)*t,y:ja(ns[n],i)};return e.y<0&&(s.y=-s.y),s.x=s.x*this.a*Mu+this.x0,s.y=s.y*this.a*wu+this.y0,s}function R0(e){var t={x:(e.x-this.x0)/(this.a*Mu),y:Math.abs(e.y-this.y0)/(this.a*wu)};if(t.y>=1)t.x/=nr[xn][0],t.y=e.y<0?-F:F;else{var i=Math.floor(t.y*xn);for(i<0?i=0:i>=xn&&(i=xn-1);;)if(ns[i][0]>t.y)--i;else if(ns[i+1][0]<=t.y)++i;else break;var n=ns[i],s=5*(t.y-n[0])/(ns[i+1][0]-n[0]);s=I0(function(o){return(ja(n,o)-t.y)/O0(n,o)},s,G,100),t.x/=ja(nr[i],s),t.y=(5*i+s)*Jt,e.y<0&&(t.y=-t.y)}return t.x=U(t.x+this.long0),t}var N0=["Robinson","robin"];const B0={init:z0,forward:D0,inverse:R0,names:N0};function F0(){this.name="geocent"}function W0(e){var t=lu(e,this.es,this.a);return t}function H0(e){var t=cu(e,this.es,this.a,this.b);return t}var Z0=["Geocentric","geocentric","geocent","Geocent"];const j0={init:F0,forward:W0,inverse:H0,names:Z0};var ne={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},qn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function G0(){if(Object.keys(qn).forEach(function(i){if(typeof this[i]>"u")this[i]=qn[i].def;else{if(qn[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);qn[i].num&&(this[i]=parseFloat(this[i]))}qn[i].degrees&&(this[i]=this[i]*Jt)}.bind(this)),Math.abs(Math.abs(this.lat0)-F)<G?this.mode=this.lat0<0?ne.S_POLE:ne.N_POLE:Math.abs(this.lat0)<G?this.mode=ne.EQUIT:(this.mode=ne.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function V0(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),s,o;switch(this.mode){case ne.OBLIQ:o=this.sinph0*t+this.cosph0*i*n;break;case ne.EQUIT:o=i*n;break;case ne.S_POLE:o=-t;break;case ne.N_POLE:o=t;break}switch(o=this.pn1/(this.p-o),s=o*i*Math.sin(e.x),this.mode){case ne.OBLIQ:o*=this.cosph0*t-this.sinph0*i*n;break;case ne.EQUIT:o*=t;break;case ne.N_POLE:o*=-(i*n);break;case ne.S_POLE:o*=i*n;break}var r,l;return r=o*this.cg+s*this.sg,l=1/(r*this.sw*this.h1+this.cw),s=(s*this.cg-o*this.sg)*this.cw*l,o=r*l,e.x=s*this.a,e.y=o*this.a,e}function $0(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,n,s;s=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*s,n=this.pn1*e.y*this.cw*s,e.x=i*this.cg+n*this.sg,e.y=n*this.cg-i*this.sg;var o=Ie(e.x,e.y);if(Math.abs(o)<G)t.x=0,t.y=e.y;else{var r,l;switch(l=1-o*o*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/o+o/this.pn1),r=Math.sqrt(1-l*l),this.mode){case ne.OBLIQ:t.y=Math.asin(r*this.sinph0+e.y*l*this.cosph0/o),e.y=(r-this.sinph0*Math.sin(t.y))*o,e.x*=l*this.cosph0;break;case ne.EQUIT:t.y=Math.asin(e.y*l/o),e.y=r*o,e.x*=l;break;case ne.N_POLE:t.y=Math.asin(r),e.y=-e.y;break;case ne.S_POLE:t.y=-Math.asin(r);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var q0=["Tilted_Perspective","tpers"];const U0={init:G0,forward:V0,inverse:$0,names:q0};function Y0(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function X0(e){var t=e.x,i=e.y,n,s,o,r;if(t=t-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var l=this.radius_p/Ie(this.radius_p*Math.cos(i),Math.sin(i));if(s=l*Math.cos(t)*Math.cos(i),o=l*Math.sin(t)*Math.cos(i),r=l*Math.sin(i),(this.radius_g-s)*s-o*o-r*r*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(o/Ie(r,n)),e.y=this.radius_g_1*Math.atan(r/n)):(e.x=this.radius_g_1*Math.atan(o/n),e.y=this.radius_g_1*Math.atan(r/Ie(o,n)))}else this.shape==="sphere"&&(n=Math.cos(i),s=Math.cos(t)*n,o=Math.sin(t)*n,r=Math.sin(i),n=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(o/Ie(r,n)),e.y=this.radius_g_1*Math.atan(r/n)):(e.x=this.radius_g_1*Math.atan(o/n),e.y=this.radius_g_1*Math.atan(r/Ie(o,n))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function K0(e){var t=-1,i=0,n=0,s,o,r,l;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Ie(1,n)):(i=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Ie(1,i));var c=n/this.radius_p;if(s=i*i+c*c+t*t,o=2*this.radius_g*t,r=o*o-4*s*this.C,r<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-o-Math.sqrt(r))/(2*s),t=this.radius_g+l*t,i*=l,n*=l,e.x=Math.atan2(i,t),e.y=Math.atan(n*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+n*n)):(i=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),s=i*i+n*n+t*t,o=2*this.radius_g*t,r=o*o-4*s*this.C,r<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-o-Math.sqrt(r))/(2*s),t=this.radius_g+l*t,i*=l,n*=l,e.x=Math.atan2(i,t),e.y=Math.atan(n*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var J0=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Q0={init:Y0,forward:X0,inverse:K0,names:J0};function tv(e){e.Proj.projections.add(ka),e.Proj.projections.add(La),e.Proj.projections.add(op),e.Proj.projections.add(pp),e.Proj.projections.add(Mp),e.Proj.projections.add(Lp),e.Proj.projections.add(Ip),e.Proj.projections.add(Bp),e.Proj.projections.add(jp),e.Proj.projections.add(Up),e.Proj.projections.add(u_),e.Proj.projections.add(__),e.Proj.projections.add(M_),e.Proj.projections.add(T_),e.Proj.projections.add(I_),e.Proj.projections.add(B_),e.Proj.projections.add(j_),e.Proj.projections.add(U_),e.Proj.projections.add(t0),e.Proj.projections.add(a0),e.Proj.projections.add(c0),e.Proj.projections.add(m0),e.Proj.projections.add(x0),e.Proj.projections.add(S0),e.Proj.projections.add(E0),e.Proj.projections.add(B0),e.Proj.projections.add(j0),e.Proj.projections.add(U0),e.Proj.projections.add(Q0)}Bt.defaultDatum="WGS84";Bt.Proj=Ve;Bt.WGS84=new Bt.Proj("WGS84");Bt.Point=kn;Bt.toPoint=uu;Bt.defs=he;Bt.nadgrid=hm;Bt.transform=Ha;Bt.mgrs=Pm;Bt.version="__VERSION__";tv(Bt);const ev=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"})),iv=xg(ev);(function(e){(function(t){var i,n;i=ys,n=iv,e.exports=t(i,n)})(function(t,i){return i.__esModule&&i.default&&(i=i.default),t.Proj={},t.Proj._isProj4Obj=function(n){return typeof n.inverse<"u"&&typeof n.forward<"u"},t.Proj.Projection=t.Class.extend({initialize:function(n,s,o){var r=t.Proj._isProj4Obj(n);this._proj=r?n:this._projFromCodeDef(n,s),this.bounds=r?s:o},project:function(n){var s=this._proj.forward([n.lng,n.lat]);return new t.Point(s[0],s[1])},unproject:function(n,s){var o=this._proj.inverse([n.x,n.y]);return new t.LatLng(o[1],o[0],s)},_projFromCodeDef:function(n,s){if(s)i.defs(n,s);else if(i.defs[n]===void 0){var o=n.split(":");if(o.length>3&&(n=o[o.length-3]+":"+o[o.length-1]),i.defs[n]===void 0)throw"No projection definition for code "+n}return i(n)}}),t.Proj.CRS=t.Class.extend({includes:t.CRS,options:{transformation:new t.Transformation(1,0,-1,0)},initialize:function(n,s,o){var r,l,c,f;if(t.Proj._isProj4Obj(n)?(l=n,r=l.srsCode,f=s||{},this.projection=new t.Proj.Projection(l,f.bounds)):(r=n,c=s,f=o||{},this.projection=new t.Proj.Projection(r,c,f.bounds)),t.Util.setOptions(this,f),this.code=r,this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new t.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales)this._scales=this.options.scales;else if(this.options.resolutions){this._scales=[];for(var d=this.options.resolutions.length-1;d>=0;d--)this.options.resolutions[d]&&(this._scales[d]=1/this.options.resolutions[d])}this.infinite=!this.options.bounds},scale:function(n){var s=Math.floor(n),o,r,l,c;return n===s?this._scales[n]:(o=this._scales[s],r=this._scales[s+1],l=r-o,c=n-s,o+l*c)},zoom:function(n){var s=this._closestElement(this._scales,n),o=this._scales.indexOf(s),r,l,c;return n===s?o:s===void 0?-1/0:(l=o+1,r=this._scales[l],r===void 0?1/0:(c=r-s,(n-s)/c+o))},distance:t.CRS.Earth.distance,R:t.CRS.Earth.R,_closestElement:function(n,s){for(var o,r=n.length;r--;)n[r]<=s&&(o===void 0||o<n[r])&&(o=n[r]);return o}}),t.Proj.GeoJSON=t.GeoJSON.extend({initialize:function(n,s){this._callLevel=0,t.GeoJSON.prototype.initialize.call(this,n,s)},addData:function(n){var s;n&&(n.crs&&n.crs.type==="name"?s=new t.Proj.CRS(n.crs.properties.name):n.crs&&n.crs.type&&(s=new t.Proj.CRS(n.crs.type+":"+n.crs.properties.code)),s!==void 0&&(this.options.coordsToLatLng=function(o){var r=t.point(o[0],o[1]);return s.projection.unproject(r)})),this._callLevel++;try{t.GeoJSON.prototype.addData.call(this,n)}finally{this._callLevel--,this._callLevel===0&&delete this.options.coordsToLatLng}}}),t.Proj.geoJson=function(n,s){return new t.Proj.GeoJSON(n,s)},t.Proj.ImageOverlay=t.ImageOverlay.extend({initialize:function(n,s,o){t.ImageOverlay.prototype.initialize.call(this,n,null,o),this._projectedBounds=s},_animateZoom:function(n){var s=this._map.getZoomScale(n.zoom),o=t.point(this._projectedBounds.min.x,this._projectedBounds.max.y),r=this._projectedToNewLayerPoint(o,n.zoom,n.center);t.DomUtil.setTransform(this._image,r,s)},_reset:function(){var n=this._map.getZoom(),s=this._map.getPixelOrigin(),o=t.bounds(this._transform(this._projectedBounds.min,n)._subtract(s),this._transform(this._projectedBounds.max,n)._subtract(s)),r=o.getSize();t.DomUtil.setPosition(this._image,o.min),this._image.style.width=r.x+"px",this._image.style.height=r.y+"px"},_projectedToNewLayerPoint:function(n,s,o){var r=this._map.getSize()._divideBy(2),l=this._map.project(o,s)._subtract(r)._round(),c=l.add(this._map._getMapPanePos());return this._transform(n,s)._subtract(c)},_transform:function(n,s){var o=this._map.options.crs,r=o.transformation,l=o.scale(s);return r.transform(n,l)}}),t.Proj.imageOverlay=function(n,s,o){return new t.Proj.ImageOverlay(n,s,o)},t.Proj})})(Mg);function nv(e){let t,i,n;return{c(){t=ut("div"),Ct(t,"id","leafletmap"),Ct(t,"class","svelte-kiuox0")},m(s,o){kt(s,t,o),i||(n=[ie(window,"resize",e[0]),ie(t,"resize",e[0])],i=!0)},p:qt,i:qt,o:qt,d(s){s&&wt(t),i=!1,Pi(n)}}}const sv="+proj=tmerc +lat_0=0 +lon_0=-7 +k=0.999997 +x_0=200000 +y_0=-6000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs",av="https://gis.us.fo/arcgis/services/lendiskort/us_lendiskort/MapServer/WMSServer";function ov(e,t,i){let n,s,o;Os(e,_t,d=>i(3,o=d));let r=[61.9,-6.85],l=new Ge.Proj.CRS("EPSG:5316",sv,{origin:[-5423100,4002100],resolutions:[1083.735500804335,541.8677504021675,270.93387520108377,135.46693760054188,67.73346880027094,33.86673440013547,16.933367200067735,8.466683600033868,4.233341800016934,2.116670900008467,1.0583354500042335,.5291677250021167,.26458386250105836,.13229193125052918,.06614596562526459]});function c(d,m){m.forEach(_=>{o.map.removeLayer(_.marker.onMap),o.map.removeLayer(_.polyline.onMap)}),d.forEach(_=>{_.marker.onMap.addTo(o.map),_.polyline.onMap.addTo(o.map)})}function f(){o.map&&o.map.invalidateSize()}return br(()=>{ls(_t,o.map=Ge.map("leafletmap",{crs:l,maxZoom:14,minZoom:0}),o),Ge.tileLayer.wms(av,{layers:"Sjógvur,Oyggjar - bólkur,Brúksøki,Hillshade - bólkur,Strandalinja,Áir,Bygningar,Vegir - bólkur,Bygdir - bólkur",format:"image/png",version:"1.3.0",crs:l}).addTo(o.map),o.map.setView(r,2)}),e.$$.update=()=>{e.$$.dirty&8&&i(2,n=o.chart.selected),e.$$.dirty&8&&i(1,s=o.stored.ridges),e.$$.dirty&6&&c(n,s)},[f,s,n,o]}let rv=class extends On{constructor(t){super(),An(this,t,ov,nv,qi,{})}};var sr={},hv={get exports(){return sr},set exports(e){sr=e}};(function(e,t){(function(){var i=Math.PI,n=Math.sin,s=Math.cos,o=Math.tan,r=Math.asin,l=Math.atan2,c=Math.acos,f=i/180,d=1e3*60*60*24,m=2440588,_=2451545;function v(B){return B.valueOf()/d-.5+m}function y(B){return new Date((B+.5-m)*d)}function b(B){return v(B)-_}var M=f*23.4397;function w(B,q){return l(n(B)*s(M)-o(q)*n(M),s(B))}function S(B,q){return r(n(q)*s(M)+s(q)*n(M)*n(B))}function k(B,q,J){return l(n(B),s(B)*n(q)-o(J)*s(q))}function E(B,q,J){return r(n(q)*n(J)+s(q)*s(J)*s(B))}function T(B,q){return f*(280.16+360.9856235*B)-q}function O(B){return B<0&&(B=0),2967e-7/Math.tan(B+.00312536/(B+.08901179))}function I(B){return f*(357.5291+.98560028*B)}function z(B){var q=f*(1.9148*n(B)+.02*n(2*B)+3e-4*n(3*B)),J=f*102.9372;return B+q+J+i}function W(B){var q=I(B),J=z(q);return{dec:S(J,0),ra:w(J,0)}}var Z={};Z.getPosition=function(B,q,J){var at=f*-J,Q=f*q,nt=b(B),mt=W(nt),St=T(nt,at)-mt.ra;return{azimuth:k(St,Q,mt.dec),altitude:E(St,Q,mt.dec)}};var j=Z.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];Z.addTime=function(B,q,J){j.push([B,q,J])};var Y=9e-4;function it(B,q){return Math.round(B-Y-q/(2*i))}function H(B,q,J){return Y+(B+q)/(2*i)+J}function $(B,q,J){return _+B+.0053*n(q)-.0069*n(2*J)}function X(B,q,J){return c((n(B)-n(q)*n(J))/(s(q)*s(J)))}function st(B){return-2.076*Math.sqrt(B)/60}function N(B,q,J,at,Q,nt,mt){var St=X(B,J,at),Xt=H(St,q,Q);return $(Xt,nt,mt)}Z.getTimes=function(B,q,J,at){at=at||0;var Q=f*-J,nt=f*q,mt=st(at),St=b(B),Xt=it(St,Q),oe=H(0,Q,Xt),ce=I(oe),re=z(ce),Ce=S(re,0),xe=$(oe,ce,re),be,Ue,ue,Qt,Ee,Ye,te={solarNoon:y(xe),nadir:y(xe-.5)};for(be=0,Ue=j.length;be<Ue;be+=1)ue=j[be],Qt=(ue[0]+mt)*f,Ee=N(Qt,Q,nt,Ce,Xt,ce,re),Ye=xe-(Ee-xe),te[ue[1]]=y(Ye),te[ue[2]]=y(Ee);return te};function ft(B){var q=f*(218.316+13.176396*B),J=f*(134.963+13.064993*B),at=f*(93.272+13.22935*B),Q=q+f*6.289*n(J),nt=f*5.128*n(at),mt=385001-20905*s(J);return{ra:w(Q,nt),dec:S(Q,nt),dist:mt}}Z.getMoonPosition=function(B,q,J){var at=f*-J,Q=f*q,nt=b(B),mt=ft(nt),St=T(nt,at)-mt.ra,Xt=E(St,Q,mt.dec),oe=l(n(St),o(Q)*s(mt.dec)-n(mt.dec)*s(St));return Xt=Xt+O(Xt),{azimuth:k(St,Q,mt.dec),altitude:Xt,distance:mt.dist,parallacticAngle:oe}},Z.getMoonIllumination=function(B){var q=b(B||new Date),J=W(q),at=ft(q),Q=149598e3,nt=c(n(J.dec)*n(at.dec)+s(J.dec)*s(at.dec)*s(J.ra-at.ra)),mt=l(Q*n(nt),at.dist-Q*s(nt)),St=l(s(J.dec)*n(J.ra-at.ra),n(J.dec)*s(at.dec)-s(J.dec)*n(at.dec)*s(J.ra-at.ra));return{fraction:(1+s(mt))/2,phase:.5+.5*mt*(St<0?-1:1)/Math.PI,angle:St}};function D(B,q){return new Date(B.valueOf()+q*d/24)}Z.getMoonTimes=function(B,q,J,at){var Q=new Date(B);at?Q.setUTCHours(0,0,0,0):Q.setHours(0,0,0,0);for(var nt=.133*f,mt=Z.getMoonPosition(Q,q,J).altitude-nt,St,Xt,oe,ce,re,Ce,xe,be,Ue,ue,Qt,Ee,Ye,te=1;te<=24&&(St=Z.getMoonPosition(D(Q,te),q,J).altitude-nt,Xt=Z.getMoonPosition(D(Q,te+1),q,J).altitude-nt,re=(mt+Xt)/2-St,Ce=(Xt-mt)/2,xe=-Ce/(2*re),be=(re*xe+Ce)*xe+St,Ue=Ce*Ce-4*re*St,ue=0,Ue>=0&&(Ye=Math.sqrt(Ue)/(Math.abs(re)*2),Qt=xe-Ye,Ee=xe+Ye,Math.abs(Qt)<=1&&ue++,Math.abs(Ee)<=1&&ue++,Qt<-1&&(Qt=Ee)),ue===1?mt<0?oe=te+Qt:ce=te+Qt:ue===2&&(oe=te+(be<0?Ee:Qt),ce=te+(be<0?Qt:Ee)),!(oe&&ce));te+=2)mt=Xt;var ki={};return oe&&(ki.rise=D(Q,oe)),ce&&(ki.set=D(Q,ce)),!oe&&!ce&&(ki[be>0?"alwaysUp":"alwaysDown"]=!0),ki},e.exports=Z})()})(hv);const Su=sr;function fn(e){for(;e<0||e>=360;)e<0?e+=360:e>=360&&(e-=360);return e}function rn(e,t,i){return e<t&&t<i}function lv(e,t,i,n){let s=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);s==0&&console.log("The lines are parallel or coincident!");let o=e.x*t.y-e.y*t.x,r=i.x*n.y-i.y*n.x,l=(o*(i.x-n.x)-(e.x-t.x)*r)/s,c=(o*(i.y-n.y)-(e.y-t.y)*r)/s;return{x:l,y:c,den:s}}function ku(e){return new Promise(t=>{if(document.querySelector(e))return t(document.querySelector(e));const i=new MutationObserver(n=>{document.querySelector(e)&&(t(document.querySelector(e)),i.disconnect())});i.observe(document.body,{childList:!0,subtree:!0})})}var pe=(e=>(e[e.MILLIS=31536e6]="MILLIS",e[e.SECONDS=31536e3]="SECONDS",e[e.MINUTE=525600]="MINUTE",e[e.HOUR=8760]="HOUR",e[e.DAY=365]="DAY",e[e.WEEK=52.142857142857146]="WEEK",e[e.MMVS=30.416666666666668]="MMVS",e[e.YEAR=1]="YEAR",e))(pe||{});let Lu={scales:{x:{type:"linear",min:0,max:360,ticks:{stepSize:45}},xCompass:{type:"linear",min:0,max:360,grid:{drawOnChartArea:!1},ticks:{stepSize:90,callback:function(e,t,i){if(typeof e!="number")return;let n=[{string:"North",value:0},{string:"East",value:90},{string:"South",value:180},{string:"West",value:270}];for(let s of n)if(e%360==s.value)return s.string}}},y:{type:"linear"}},plugins:{legend:{onClick:null}},maintainAspectRatio:!1,responsive:!0},_l={scales:{x:{type:"linear",min:0,max:365,grid:{drawOnChartArea:!1},ticks:{stepSize:1,callback:function(e,t,i){if(typeof e!="number")return;let n=new Date(Date.UTC(2022,0,e)),s=n.getDate(),o=n.getMonth(),r=[{string:"January",value:0},{string:"February",value:1},{string:"March",value:2},{string:"April",value:3},{string:"May",value:4},{string:"June",value:5},{string:"July",value:6},{string:"August",value:7},{string:"September",value:8},{string:"October",value:9},{string:"November",value:10},{string:"December",value:11}];for(let l of r)if(s==1&&o==l.value)return l.string}}},y:{type:"linear",min:0,max:24,ticks:{stepSize:2}}},plugins:{legend:{onClick:null}},maintainAspectRatio:!1,responsive:!0};function cv(){_t.update(e=>{let t=e.chart.chart;return e.chart.chartType=="Hillshade"?t.options=Lu:(e.chart.chartType=="Sunrise"||e.chart.chartType=="Sunset")&&(t.options=_l,ar("Sun"),Le(_t).chart.sun.show=!1),e.chart.selected.forEach(i=>{let n=i.datasets.find(r=>r.type==e.chart.chartType);if(n==null)return;n.updated==!1&&Tu(n,{points:i.points});let s=e.chart.chart.data.datasets,o=s.findIndex(r=>r.label==i.label);s[o]=n.dataset}),t.update(),e})}function Tu(e,t){if(t.points){let i=[];e.type=="Hillshade"?i=uv(t.points):e.type=="Sunrise"?i=vl(t.points,"Sunrise"):e.type=="Sunset"&&(i=vl(t.points,"Sunset")),e.dataset.data=i,e.updated=!0}t.label&&(e.dataset.label=t.label),t.color&&(e.dataset.backgroundColor=t.color,e.dataset.borderColor=t.color)}function uv(e){let t=[];return e.forEach(i=>{t.push({x:i.azi,y:i.alt})}),t}function vl(e,t){function i(d){let m=e.length,_=e[(d%m+m)%m];return{azi:_.azi,alt:_.alt}}function n(d){let m=Su.getPosition(d,62,-7);return{azi:fn(m.azimuth*180/Math.PI-180),alt:m.altitude*180/Math.PI}}let s=2022,o=0,r=5,l=new Date(Date.UTC(s,0)),c=0,f=[];for(o=1;o<=365;o++){let d=0,m=t=="Sunrise"?2:14,_=0;for(;d+=1,!(d>1e5);){let v=new Date(Date.UTC(s,0,o,m,_)),y=new Date(Date.UTC(s,0,o,m,_+r)),b=new Date(Date.UTC(s,0,o,m));if(pe.MILLIS/pe.DAY<Math.abs(v.getTime()-b.getTime())){console.log("oh nooo");let Z=(v.getTime()-l.getTime())*pe.DAY/pe.MILLIS;f.push({x:Z,y:0});break}let M=i(c),w=i(c+1),S=n(v),k=n(y),E=k.azi<S.azi?S.azi-360:S.azi,T=w.azi<M.azi?M.azi-360:M.azi,O=Math.min(E,T);if(S.azi=fn(E-O),M.azi=fn(T-O),k.azi=fn(k.azi-O),w.azi=fn(w.azi-O),!rn(S.azi,M.azi,k.azi)&&!rn(S.azi,w.azi,k.azi)&&!rn(M.azi,S.azi,w.azi)&&!rn(M.azi,k.azi,w.azi)){c+=1;continue}let I=lv({x:S.azi,y:S.alt},{x:k.azi,y:k.alt},{x:M.azi,y:M.alt},{x:w.azi,y:w.alt}),z=(I.x-S.azi)/(k.azi-S.azi),W=(I.x-M.azi)/(w.azi-M.azi);if(rn(0,z,1)&&rn(0,W,1)&&(I.den<0&&t=="Sunrise"||I.den>0&&t=="Sunset")){let Z=0,j=0;Z+=v.getUTCHours(),Z+=v.getUTCMinutes()*pe.HOUR/pe.MINUTE,Z+=v.getUTCSeconds()*pe.HOUR/pe.SECONDS,Z+=r*z*pe.HOUR/pe.MINUTE,j=(v.getTime()-l.getTime())*pe.DAY/pe.MILLIS,f.push({x:j,y:Z});break}w.azi<k.azi?c+=1:_+=r}}return f}function fv(e,t){e.data.length=0;let i=360;for(let n=0;n<i;n++){let s=n*24*60*60*1e3/i,o=new Date(s),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()),l=Su.getPosition(r,62,-7),c={x:fn(l.azimuth*180/Math.PI-180),y:l.altitude*180/Math.PI};e.data.push(c)}e.data.sort((n,s)=>n.x-s.x),Le(_t).chart.chart!=null&&Le(_t).chart.chart.update()}function ar(e){_t.update(t=>{if(t.chart.chart==null)return t;let i=t.chart.chart.data.datasets,n=typeof e=="string"?e:e.label,s=i.findIndex(o=>o.label==n);return s!=-1&&i.splice(s,1),t.chart.chart.update(),t})}function dv(e){_t.update(t=>{if(t.chart.chart==null)return t;let i=t.chart.chart.data.datasets;return i.findIndex(s=>s.label==e.label)==-1&&i.push(e),t.chart.chart.update(),t})}function gv(e){_t.update(t=>{if(t.chart.chart==null)return t;let i=t.chart.chart.data.datasets;return e.forEach(n=>{let s=!1;i.forEach(o=>{n==o&&(s=!0)}),!s&&n.label!="Sun"&&i.push(n)}),i.forEach((n,s)=>{let o=!1;e.forEach(r=>{r==n&&(o=!0)}),!o&&n.label!="Sun"&&i.splice(s,1)}),t.chart.chart.update(),t})}function mv(e,t){return{label:e,data:[],showLine:!0,borderColor:t,backgroundColor:t,radius:0}}function pv(){_t.update(e=>{if(e.chart.chart==null)return e;let t=e.chart.chart,i=e.chart.sun.dataset;return t.data.datasets.forEach((n,s)=>{n==i&&t.data.datasets.splice(s,1)}),t.update(),e.chart.sun.show=!1,e})}function _v(e,t){_t.update(i=>{if(i.chart.chart==null)return i;let n=i.chart.chart;return e.borderColor=t,e.backgroundColor=t,n.update(),i})}let _e={hideSunDataset:pv,updateSunDataset:fv,createDataset:mv,changeChartColor:_v,showDatasets:gv,updateDataset:Tu,changeChartType:cv,removeDataset:ar,addDataset:dv};function vv(e){let t=Le(_t).settings.center_of_FO;if(Array.isArray(e)){let i=[];return e.forEach(n=>{let s=Bt("EPSG:4326","EPSG:5316",[n.lng,n.lat]);i.push({x:s[0]-t.x,y:s[1]-t.y})}),i}else if(typeof e=="object"){let i=Bt("EPSG:4326","EPSG:5316",[e.lng,e.lat]);return{x:i[0]-t.x,y:i[1]-t.y}}}function yv(e){if(Array.isArray(e)){let t=[];return e.forEach(i=>{let n=Bt("EPSG:4326","EPSG:5316",[i.lng,i.lat]);t.push({x:n[0],y:n[1]})}),t}else if(typeof e=="object"){let t=Bt("EPSG:4326","EPSG:5316",[e.lng,e.lat]);return{x:t[0],y:t[1]}}}function xv(e){let t=Le(_t).settings.center_of_FO;if(Array.isArray(e)){let i=[];return e.forEach(n=>{let s=Bt("EPSG:5316","EPSG:4326",[n.x+t.x,n.y+t.y]);i.push({lng:s[0],lat:s[1]})}),i}else if(typeof e=="object"){let i=Bt("EPSG:5316","EPSG:4326",[e.x+t.x,e.y+t.y]);return{lng:i[0],lat:i[1]}}}function bv(e){if(Array.isArray(e)){let t=[];return e.forEach(i=>{let n=Bt("EPSG:5316","EPSG:4326",[i.x,i.y]);t.push({lng:n[0],lat:n[1]})}),t}else if(typeof e=="object"){let t=Bt("EPSG:5316","EPSG:4326",[e.x,e.y]);return{lng:t[0],lat:t[1]}}}function Mv(e){let t=Le(_t).settings.center_of_FO;if(Array.isArray(e)){let i=[];return e.forEach(n=>{i.push({x:n.x+t.x,y:n.y+t.y})}),i}else if(typeof e=="object")return{x:e.x+t.x,y:e.y+t.y}}function wv(e){let t=Le(_t).settings.center_of_FO;if(Array.isArray(e)){let i=[];return e.forEach(n=>{i.push({x:n.x-t.x,y:n.y-t.y})}),i}else if(typeof e=="object")return{x:e.x-t.x,y:e.y-t.y}}function Pv(e,t){let i=Le(_t).settings.center_of_FO;const n=Math.floor((e.x+i.x-t.xmin)/t.widthRatio),s=Math.floor((t.ymax-(e.y+i.y))/t.heightRatio);return{x:n,y:s}}function Sv(e,t){const i=Math.floor((e.x-t.xmin)/t.widthRatio),n=Math.floor((t.ymax-e.y)/t.heightRatio);return{x:i,y:n}}function kv(e,t){let i=Le(_t).settings.center_of_FO,n=e.x*t.widthRatio+t.xmin-i.x,s=t.ymax-e.y*t.heightRatio-i.y;return{x:n,y:s}}function Lv(e,t){let i=e.x*t.widthRatio+t.xmin,n=t.ymax-e.y*t.heightRatio;return{x:i,y:n}}let ws={LatLngToPos:vv,LatLngToAbsPos:yv,PosToLatLng:xv,AbsPosToLatLng:bv,PosToAbsPos:Mv,AbsPosToPos:wv,PosToPixel:Pv,AbsPosToPixel:Sv,PixelToPos:kv,PixelToAbsPos:Lv};var yl=Ge.icon({iconUrl:"marker.svg",shadowUrl:"marker-shadow.svg",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function Tv(e){return e?Ge.polyline(e):Ge.polyline([{lat:0,lng:0},{lat:.1,lng:.1}])}function Cv(e){return e?Ge.marker(e,{icon:yl}):Ge.marker([0,0],{icon:yl})}function Ev(e,t){e.setStyle({color:t})}function Av(e,t,i,n){let s="#00ff00",o=ws.PosToLatLng(t),r=[];Qo.forEach(c=>{r.push({type:c,updated:!1,dataset:_e.createDataset(e,s)})});let l={color:s,label:e,points:t,datasets:r,marker:{onMap:Cv(i),crd:i,pos:ws.LatLngToPos(i),mapHeight:n},polyline:{crds:o,onMap:Tv(o).setStyle({color:s})}};return _e.updateDataset(l.datasets.find(c=>c.type=="Hillshade"),{points:l.points}),l}function xl(e,t,i){const n=e.slice();return n[20]=t[i],n}function bl(e,t,i){const n=e.slice();return n[23]=t[i],n[24]=t,n[25]=i,n}function Ml(e,t,i){const n=e.slice();return n[1]=t[i],n}function wl(e){let t,i=e[1]+"",n,s;return{c(){t=ut("option"),n=Vt(i),s=Mt(),t.__value=e[1],t.value=t.__value},m(o,r){kt(o,t,r),tt(t,n),tt(t,s)},p:qt,d(o){o&&wt(t)}}}function Pl(e){let t,i,n,s=e[23].label+"",o,r,l,c,f;function d(){return e[13](e[25])}function m(){e[14].call(l,e[24],e[25])}function _(){return e[15](e[23])}return{c(){t=ut("button"),t.textContent="Remove",i=Mt(),n=ut("div"),o=Vt(s),r=Mt(),l=ut("input"),Ct(n,"class","name svelte-1tdga8h"),Ct(l,"class","colorpicker svelte-1tdga8h"),Ct(l,"type","color")},m(v,y){kt(v,t,y),kt(v,i,y),kt(v,n,y),tt(n,o),kt(v,r,y),kt(v,l,y),dn(l,e[23].color),c||(f=[ie(t,"click",d),ie(l,"input",m),ie(l,"change",_)],c=!0)},p(v,y){e=v,y&1&&s!==(s=e[23].label+"")&&oi(o,s),y&1&&dn(l,e[23].color)},d(v){v&&wt(t),v&&wt(i),v&&wt(n),v&&wt(r),v&&wt(l),c=!1,Pi(f)}}}function Sl(e){let t,i=e[20].label+"",n,s,o;return{c(){t=ut("option"),n=Vt(i),s=Mt(),t.__value=o=e[20],t.value=t.__value},m(r,l){kt(r,t,l),tt(t,n),tt(t,s)},p(r,l){l&4&&i!==(i=r[20].label+"")&&oi(n,i),l&4&&o!==(o=r[20])&&(t.__value=o,t.value=t.__value)},d(r){r&&wt(t)}}}function kl(e){let t=!e[8](e[20]),i,n=t&&Sl(e);return{c(){n&&n.c(),i=eg()},m(s,o){n&&n.m(s,o),kt(s,i,o)},p(s,o){o&4&&(t=!s[8](s[20])),t?n?n.p(s,o):(n=Sl(s),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(s){n&&n.d(s),s&&wt(i)}}}function Ov(e){let t,i,n,s,o,r,l,c,f,d,m,_=e[4].show?"Hide":"Show",v,y,b,M,w,S,k,E,T,O,I,z,W,Z,j,Y=Qo,it=[];for(let N=0;N<Y.length;N+=1)it[N]=wl(Ml(e,Y,N));let H=e[0],$=[];for(let N=0;N<H.length;N+=1)$[N]=Pl(bl(e,H,N));let X=e[2],st=[];for(let N=0;N<X.length;N+=1)st[N]=kl(xl(e,X,N));return{c(){t=ut("div"),i=ut("header"),i.textContent="Chart Type",n=Mt(),s=ut("select");for(let N=0;N<it.length;N+=1)it[N].c();o=Mt(),r=ut("br"),l=Mt(),c=ut("header"),c.textContent="Locations",f=Mt(),d=ut("div"),m=ut("button"),v=Vt(_),y=Vt(" sun"),b=Mt(),M=ut("input"),w=Mt();for(let N=0;N<$.length;N+=1)$[N].c();S=Mt(),k=ut("button"),k.textContent="Remove",E=Mt(),T=ut("select");for(let N=0;N<st.length;N+=1)st[N].c();O=ut("option"),O.textContent="none",z=Mt(),W=ut("input"),e[1]===void 0&&vs(()=>e[10].call(s)),Ct(m,"class","showSun svelte-1tdga8h"),Ct(M,"class","colorpicker svelte-1tdga8h"),Ct(M,"type","color"),Ct(k,"class","placeholder svelte-1tdga8h"),O.__value="none",O.value=O.__value,T.disabled=I=e[0].length==e[2].length,e[3]===void 0&&vs(()=>e[16].call(T)),Ct(d,"class","select svelte-1tdga8h"),Ct(W,"type","date"),Ct(t,"class","settings svelte-1tdga8h")},m(N,ft){kt(N,t,ft),tt(t,i),tt(t,n),tt(t,s);for(let D=0;D<it.length;D+=1)it[D]&&it[D].m(s,null);oa(s,e[1],!0),tt(t,o),tt(t,r),tt(t,l),tt(t,c),tt(t,f),tt(t,d),tt(d,m),tt(m,v),tt(m,y),tt(d,b),tt(d,M),dn(M,e[4].color),tt(d,w);for(let D=0;D<$.length;D+=1)$[D]&&$[D].m(d,null);tt(d,S),tt(d,k),tt(d,E),tt(d,T);for(let D=0;D<st.length;D+=1)st[D]&&st[D].m(T,null);tt(T,O),oa(T,e[3],!0),tt(t,z),tt(t,W),dn(W,e[4].date),Z||(j=[ie(s,"change",e[10]),ie(s,"change",_e.changeChartType),ie(m,"click",e[5]),ie(M,"input",e[11]),ie(M,"change",e[12]),ie(T,"change",e[16]),ie(T,"change",e[17]),ie(W,"input",e[18]),ie(W,"change",e[19])],Z=!0)},p(N,[ft]){if(ft&0){Y=Qo;let D;for(D=0;D<Y.length;D+=1){const B=Ml(N,Y,D);it[D]?it[D].p(B,ft):(it[D]=wl(B),it[D].c(),it[D].m(s,null))}for(;D<it.length;D+=1)it[D].d(1);it.length=Y.length}if(ft&2&&oa(s,N[1]),ft&16&&_!==(_=N[4].show?"Hide":"Show")&&oi(v,_),ft&16&&dn(M,N[4].color),ft&129){H=N[0];let D;for(D=0;D<H.length;D+=1){const B=bl(N,H,D);$[D]?$[D].p(B,ft):($[D]=Pl(B),$[D].c(),$[D].m(d,S))}for(;D<$.length;D+=1)$[D].d(1);$.length=H.length}if(ft&260){X=N[2];let D;for(D=0;D<X.length;D+=1){const B=xl(N,X,D);st[D]?st[D].p(B,ft):(st[D]=kl(B),st[D].c(),st[D].m(T,O))}for(;D<st.length;D+=1)st[D].d(1);st.length=X.length}ft&5&&I!==(I=N[0].length==N[2].length)&&(T.disabled=I),ft&12&&oa(T,N[3]),ft&16&&dn(W,N[4].date)},i:qt,o:qt,d(N){N&&wt(t),wa(it,N),wa($,N),wa(st,N),Z=!1,Pi(j)}}}function Iv(e,t,i){let n;Os(e,_t,I=>i(9,n=I));let s=[],o=[],r="none",l="Hillshade";ls(_t,n.chart.sun={dataset:_e.createDataset("Sun","#ffff00"),show:!1,color:"#ffff00",date:"2022-01-01"},n);let c=n.chart.sun;_e.updateSunDataset(c.dataset,new Date(c.date));function f(){c.show?(_e.removeDataset(c.dataset),i(4,c.show=!1,c)):(_e.addDataset(c.dataset),i(4,c.show=!0,c))}function d(I){i(3,r="none"),i(0,o=[...o,I]);let z=I.datasets.find(W=>W.type==l);z.updated==!1&&_e.updateDataset(z,{points:I.points}),_e.addDataset(z.dataset)}function m(I){let z=o.splice(I,1)[0];i(0,o);let W=z.datasets.find(Z=>Z.type==l);_e.removeDataset(W.dataset)}function _(I){for(let z of o)if(I.label==z.label)return!0;return!1}function v(){l=Uh(this),i(1,l)}function y(){c.color=this.value,i(4,c),i(9,n),i(1,l),i(0,o)}const b=()=>_e.changeChartColor(c.dataset,c.color),M=I=>{m(I)};function w(I,z){I[z].color=this.value,i(0,o)}const S=I=>{I.datasets.forEach(z=>{_e.changeChartColor(z.dataset,I.color)}),Ev(I.polyline.onMap,I.color)};function k(){r=Uh(this),i(3,r),i(2,s),i(9,n),i(1,l),i(0,o)}const E=()=>{d(r)};function T(){c.date=this.value,i(4,c),i(9,n),i(1,l),i(0,o)}const O=()=>_e.updateSunDataset(c.dataset,new Date(c.date));return e.$$.update=()=>{e.$$.dirty&2&&ls(_t,n.chart.chartType=l,n),e.$$.dirty&1&&ls(_t,n.chart.selected=o,n),e.$$.dirty&512&&i(4,c=n.chart.sun),e.$$.dirty&512&&i(2,s=n.stored.ridges)},[o,l,s,r,c,f,d,m,_,n,v,y,b,M,w,S,k,E,T,O]}class zv extends On{constructor(t){super(),An(this,t,Iv,Ov,qi,{})}}function Ll(e,t,i){const n=e.slice();return n[3]=t[i],n}function Tl(e){let t,i=e[3].label+"",n,s;return{c(){t=ut("div"),n=Vt(i),s=Mt()},m(o,r){kt(o,t,r),tt(t,n),tt(t,s)},p(o,r){r&1&&i!==(i=o[3].label+"")&&oi(n,i)},d(o){o&&wt(t)}}}function Dv(e){let t,i,n,s,o,r,l,c,f,d,m,_,v,y,b,M,w,S,k,E,T,O,I,z,W,Z,j,Y=e[0].stored.ridges,it=[];for(let H=0;H<Y.length;H+=1)it[H]=Tl(Ll(e,Y,H));return E=new zv({}),{c(){t=ut("div"),i=ut("header"),i.textContent="Current Selection",n=Mt(),s=ut("button"),s.textContent="console.log($system)",o=Mt(),r=ut("button"),r.textContent="weee",l=Mt(),c=ut("hr"),f=Mt(),d=ut("div"),m=ut("header"),m.textContent="Ridges",_=Mt(),v=ut("div"),v.textContent="Current ridges stored:",y=Mt();for(let H=0;H<it.length;H+=1)it[H].c();b=Mt(),M=ut("hr"),w=Mt(),S=ut("header"),S.textContent="Chart",k=Mt(),ts(E.$$.fragment),T=Mt(),O=ut("hr"),I=Mt(),z=ut("header"),z.textContent="Settings",Ct(i,"class","svelte-qtw7n7"),Ct(t,"class","current"),Ct(m,"class","svelte-qtw7n7"),Ct(d,"class","ridge"),Ct(S,"class","svelte-qtw7n7"),Ct(z,"class","svelte-qtw7n7")},m(H,$){kt(H,t,$),tt(t,i),tt(t,n),tt(t,s),tt(t,o),tt(t,r),kt(H,l,$),kt(H,c,$),kt(H,f,$),kt(H,d,$),tt(d,m),tt(d,_),tt(d,v),tt(d,y);for(let X=0;X<it.length;X+=1)it[X]&&it[X].m(d,null);kt(H,b,$),kt(H,M,$),kt(H,w,$),kt(H,S,$),kt(H,k,$),mn(E,H,$),kt(H,T,$),kt(H,O,$),kt(H,I,$),kt(H,z,$),W=!0,Z||(j=[ie(s,"click",e[1]),ie(r,"click",e[2])],Z=!0)},p(H,[$]){if($&1){Y=H[0].stored.ridges;let X;for(X=0;X<Y.length;X+=1){const st=Ll(H,Y,X);it[X]?it[X].p(st,$):(it[X]=Tl(st),it[X].c(),it[X].m(d,null))}for(;X<it.length;X+=1)it[X].d(1);it.length=Y.length}},i(H){W||(gn(E.$$.fragment,H),W=!0)},o(H){Qn(E.$$.fragment,H),W=!1},d(H){H&&wt(t),H&&wt(l),H&&wt(c),H&&wt(f),H&&wt(d),wa(it,H),H&&wt(b),H&&wt(M),H&&wt(w),H&&wt(S),H&&wt(k),pn(E,H),H&&wt(T),H&&wt(O),H&&wt(I),H&&wt(z),Z=!1,Pi(j)}}}function Rv(e,t,i){let n;return Os(e,_t,r=>i(0,n=r)),[n,()=>console.log(n),()=>console.log("Wee")]}class Nv extends On{constructor(t){super(),An(this,t,Rv,Dv,qi,{})}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Bs(e){return e+.5|0}const gi=(e,t,i)=>Math.max(Math.min(e,i),t);function ss(e){return gi(Bs(e*2.55),0,255)}function yi(e){return gi(Bs(e*255),0,255)}function si(e){return gi(Bs(e/2.55)/100,0,1)}function Cl(e){return gi(Bs(e*100),0,100)}const Se={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},or=[..."0123456789ABCDEF"],Bv=e=>or[e&15],Fv=e=>or[(e&240)>>4]+or[e&15],la=e=>(e&240)>>4===(e&15),Wv=e=>la(e.r)&&la(e.g)&&la(e.b)&&la(e.a);function Hv(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&Se[e[1]]*17,g:255&Se[e[2]]*17,b:255&Se[e[3]]*17,a:t===5?Se[e[4]]*17:255}:(t===7||t===9)&&(i={r:Se[e[1]]<<4|Se[e[2]],g:Se[e[3]]<<4|Se[e[4]],b:Se[e[5]]<<4|Se[e[6]],a:t===9?Se[e[7]]<<4|Se[e[8]]:255})),i}const Zv=(e,t)=>e<255?t(e):"";function jv(e){var t=Wv(e)?Bv:Fv;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Zv(e.a,t):void 0}const Gv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Cu(e,t,i){const n=t*Math.min(i,1-i),s=(o,r=(o+e/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function Vv(e,t,i){const n=(s,o=(s+e/60)%6)=>i-i*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function $v(e,t,i){const n=Cu(e,1,.5);let s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function qv(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function Lr(e){const i=e.r/255,n=e.g/255,s=e.b/255,o=Math.max(i,n,s),r=Math.min(i,n,s),l=(o+r)/2;let c,f,d;return o!==r&&(d=o-r,f=l>.5?d/(2-o-r):d/(o+r),c=qv(i,n,s,d,o),c=c*60+.5),[c|0,f||0,l]}function Tr(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(yi)}function Cr(e,t,i){return Tr(Cu,e,t,i)}function Uv(e,t,i){return Tr($v,e,t,i)}function Yv(e,t,i){return Tr(Vv,e,t,i)}function Eu(e){return(e%360+360)%360}function Xv(e){const t=Gv.exec(e);let i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?ss(+t[5]):yi(+t[5]));const s=Eu(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=Uv(s,o,r):t[1]==="hsv"?n=Yv(s,o,r):n=Cr(s,o,r),{r:n[0],g:n[1],b:n[2],a:i}}function Kv(e,t){var i=Lr(e);i[0]=Eu(i[0]+t),i=Cr(i),e.r=i[0],e.g=i[1],e.b=i[2]}function Jv(e){if(!e)return;const t=Lr(e),i=t[0],n=Cl(t[1]),s=Cl(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${si(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const El={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Al={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Qv(){const e={},t=Object.keys(Al),i=Object.keys(El);let n,s,o,r,l;for(n=0;n<t.length;n++){for(r=l=t[n],s=0;s<i.length;s++)o=i[s],l=l.replace(o,El[o]);o=parseInt(Al[r],16),e[l]=[o>>16&255,o>>8&255,o&255]}return e}let ca;function ty(e){ca||(ca=Qv(),ca.transparent=[0,0,0,0]);const t=ca[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const ey=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function iy(e){const t=ey.exec(e);let i=255,n,s,o;if(t){if(t[7]!==n){const r=+t[7];i=t[8]?ss(r):gi(r*255,0,255)}return n=+t[1],s=+t[3],o=+t[5],n=255&(t[2]?ss(n):gi(n,0,255)),s=255&(t[4]?ss(s):gi(s,0,255)),o=255&(t[6]?ss(o):gi(o,0,255)),{r:n,g:s,b:o,a:i}}}function ny(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${si(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Wo=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,hn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function sy(e,t,i){const n=hn(si(e.r)),s=hn(si(e.g)),o=hn(si(e.b));return{r:yi(Wo(n+i*(hn(si(t.r))-n))),g:yi(Wo(s+i*(hn(si(t.g))-s))),b:yi(Wo(o+i*(hn(si(t.b))-o))),a:e.a+i*(t.a-e.a)}}function ua(e,t,i){if(e){let n=Lr(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=Cr(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Au(e,t){return e&&Object.assign(t||{},e)}function Ol(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=yi(e[3]))):(t=Au(e,{r:0,g:0,b:0,a:1}),t.a=yi(t.a)),t}function ay(e){return e.charAt(0)==="r"?iy(e):Xv(e)}class Ps{constructor(t){if(t instanceof Ps)return t;const i=typeof t;let n;i==="object"?n=Ol(t):i==="string"&&(n=Hv(t)||ty(t)||ay(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Au(this._rgb);return t&&(t.a=si(t.a)),t}set rgb(t){this._rgb=Ol(t)}rgbString(){return this._valid?ny(this._rgb):void 0}hexString(){return this._valid?jv(this._rgb):void 0}hslString(){return this._valid?Jv(this._rgb):void 0}mix(t,i){if(t){const n=this.rgb,s=t.rgb;let o;const r=i===o?.5:i,l=2*r-1,c=n.a-s.a,f=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;o=1-f,n.r=255&f*n.r+o*s.r+.5,n.g=255&f*n.g+o*s.g+.5,n.b=255&f*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=sy(this._rgb,t._rgb,i)),this}clone(){return new Ps(this.rgb)}alpha(t){return this._rgb.a=yi(t),this}clearer(t){const i=this._rgb;return i.a*=1-t,this}greyscale(){const t=this._rgb,i=Bs(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){const i=this._rgb;return i.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ua(this._rgb,2,t),this}darken(t){return ua(this._rgb,2,-t),this}saturate(t){return ua(this._rgb,1,t),this}desaturate(t){return ua(this._rgb,1,-t),this}rotate(t){return Kv(this._rgb,t),this}}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function ei(){}const oy=(()=>{let e=0;return()=>e++})();function vt(e){return e===null||typeof e>"u"}function Et(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function gt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Rt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ve(e,t){return Rt(e)?e:t}function lt(e,t){return typeof e>"u"?t:e}const ry=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Ou=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Tt(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function Pt(e,t,i,n){let s,o,r;if(Et(e))if(o=e.length,n)for(s=o-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<o;s++)t.call(i,e[s],s);else if(gt(e))for(r=Object.keys(e),o=r.length,s=0;s<o;s++)t.call(i,e[r[s]],r[s])}function Ga(e,t){let i,n,s,o;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],o=t[i],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Va(e){if(Et(e))return e.map(Va);if(gt(e)){const t=Object.create(null),i=Object.keys(e),n=i.length;let s=0;for(;s<n;++s)t[i[s]]=Va(e[i[s]]);return t}return e}function Iu(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function hy(e,t,i,n){if(!Iu(e))return;const s=t[e],o=i[e];gt(s)&&gt(o)?Ss(s,o,n):t[e]=Va(o)}function Ss(e,t,i){const n=Et(t)?t:[t],s=n.length;if(!gt(e))return e;i=i||{};const o=i.merger||hy;let r;for(let l=0;l<s;++l){if(r=n[l],!gt(r))continue;const c=Object.keys(r);for(let f=0,d=c.length;f<d;++f)o(c[f],e,r,i)}return e}function fs(e,t){return Ss(e,t,{merger:ly})}function ly(e,t,i){if(!Iu(e))return;const n=t[e],s=i[e];gt(n)&&gt(s)?fs(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Va(s))}const Il={"":e=>e,x:e=>e.x,y:e=>e.y};function cy(e){const t=e.split("."),i=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function uy(e){const t=cy(e);return i=>{for(const n of t){if(n==="")break;i=i&&i[n]}return i}}function Mi(e,t){return(Il[t]||(Il[t]=uy(t)))(e)}function Er(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Te=e=>typeof e<"u",wi=e=>typeof e=="function",zl=(e,t)=>{if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0};function fy(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ot=Math.PI,At=2*Ot,dy=At+Ot,$a=Number.POSITIVE_INFINITY,gy=Ot/180,Nt=Ot/2,Ii=Ot/4,Dl=Ot*2/3,mi=Math.log10,$e=Math.sign;function ds(e,t,i){return Math.abs(e-t)<i}function Rl(e){const t=Math.round(e);e=ds(e,t,e/1e3)?t:e;const i=Math.pow(10,Math.floor(mi(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function my(e){const t=[],i=Math.sqrt(e);let n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,o)=>s-o).pop(),t}function Tn(e){return!isNaN(parseFloat(e))&&isFinite(e)}function py(e,t){const i=Math.round(e);return i-t<=e&&i+t>=e}function zu(e,t,i){let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n][i],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ze(e){return e*(Ot/180)}function Ar(e){return e*(180/Ot)}function Nl(e){if(!Rt(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Du(e,t){const i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*Ot&&(o+=At),{angle:o,distance:s}}function rr(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _y(e,t){return(e-t+dy)%At-Ot}function ye(e){return(e%At+At)%At}function ks(e,t,i,n){const s=ye(e),o=ye(t),r=ye(i),l=ye(o-s),c=ye(r-s),f=ye(s-o),d=ye(s-r);return s===o||s===r||n&&o===r||l>c&&f<d}function Ut(e,t,i){return Math.max(t,Math.min(i,e))}function vy(e){return Ut(e,-32768,32767)}function ri(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function Or(e,t,i){i=i||(r=>e[r]<t);let n=e.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,i(o)?s=o:n=o;return{lo:s,hi:n}}const hi=(e,t,i,n)=>Or(e,i,n?s=>{const o=e[s][t];return o<i||o===i&&e[s+1][t]===i}:s=>e[s][t]<i),yy=(e,t,i)=>Or(e,i,n=>e[n][t]>=i);function xy(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}const Ru=["push","pop","shift","splice","unshift"];function by(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ru.forEach(i=>{const n="_onData"+Er(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return e._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...o)}),r}})})}function Bl(e,t){const i=e._chartjs;if(!i)return;const n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(Ru.forEach(o=>{delete e[o]}),delete e._chartjs)}function Nu(e){const t=new Set;let i,n;for(i=0,n=e.length;i<n;++i)t.add(e[i]);return t.size===n?e:Array.from(t)}const Bu=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Fu(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,Bu.call(window,()=>{n=!1,e.apply(t,i)}))}}function My(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}const Ir=e=>e==="start"?"left":e==="end"?"right":"center",ee=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,wy=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function Wu(e,t,i){const n=t.length;let s=0,o=n;if(e._sorted){const{iScale:r,_parsed:l}=e,c=r.axis,{min:f,max:d,minDefined:m,maxDefined:_}=r.getUserBounds();m&&(s=Ut(Math.min(hi(l,r.axis,f).lo,i?n:hi(t,c,r.getPixelForValue(f)).lo),0,n-1)),_?o=Ut(Math.max(hi(l,r.axis,d,!0).hi+1,i?0:hi(t,c,r.getPixelForValue(d),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function Hu(e){const{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),o}const fa=e=>e===0||e===1,Fl=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*At/i)),Wl=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*At/i)+1,gs={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Nt)+1,easeOutSine:e=>Math.sin(e*Nt),easeInOutSine:e=>-.5*(Math.cos(Ot*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>fa(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>fa(e)?e:Fl(e,.075,.3),easeOutElastic:e=>fa(e)?e:Wl(e,.075,.3),easeInOutElastic(e){return fa(e)?e:e<.5?.5*Fl(e*2,.1125,.45):.5+.5*Wl(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-gs.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?gs.easeInBounce(e*2)*.5:gs.easeOutBounce(e*2-1)*.5+.5};function Zu(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Hl(e){return Zu(e)?e:new Ps(e)}function Ho(e){return Zu(e)?e:new Ps(e).saturate(.5).darken(.1).hexString()}const Py=["x","y","borderWidth","radius","tension"],Sy=["color","borderColor","backgroundColor"];function ky(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Sy},numbers:{type:"number",properties:Py}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ly(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zl=new Map;function Ty(e,t){t=t||{};const i=e+JSON.stringify(t);let n=Zl.get(i);return n||(n=new Intl.NumberFormat(e,t),Zl.set(i,n)),n}function Fs(e,t,i){return Ty(t,i).format(e)}const ju={values(e){return Et(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";const n=this.chart.options.locale;let s,o=e;if(i.length>1){const f=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),o=Cy(e,i)}const r=mi(Math.abs(o)),l=Math.max(Math.min(-1*Math.floor(r),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Fs(e,n,c)},logarithmic(e,t,i){if(e===0)return"0";const n=i[t].significand||e/Math.pow(10,Math.floor(mi(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?ju.numeric.call(this,e,t,i):""}};function Cy(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var eo={formatters:ju};function Ey(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:eo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Vi=Object.create(null),hr=Object.create(null);function ms(e,t){if(!t)return e;const i=t.split(".");for(let n=0,s=i.length;n<s;++n){const o=i[n];e=e[o]||(e[o]=Object.create(null))}return e}function Zo(e,t,i){return typeof t=="string"?Ss(ms(e,t),i):Ss(ms(e,""),t)}class Ay{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Ho(s.backgroundColor),this.hoverBorderColor=(n,s)=>Ho(s.borderColor),this.hoverColor=(n,s)=>Ho(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Zo(this,t,i)}get(t){return ms(this,t)}describe(t,i){return Zo(hr,t,i)}override(t,i){return Zo(Vi,t,i)}route(t,i,n,s){const o=ms(this,t),r=ms(this,n),l="_"+i;Object.defineProperties(o,{[l]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){const c=this[l],f=r[s];return gt(c)?Object.assign({},f,c):lt(c,f)},set(c){this[l]=c}}})}apply(t){t.forEach(i=>i(this))}}var Ht=new Ay({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ky,Ly,Ey]);function Oy(e){return!e||vt(e.size)||vt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function qa(e,t,i,n,s){let o=t[s];return o||(o=t[s]=e.measureText(s).width,i.push(s)),o>n&&(n=o),n}function Iy(e,t,i,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},o=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let r=0;const l=i.length;let c,f,d,m,_;for(c=0;c<l;c++)if(m=i[c],m!=null&&Et(m)!==!0)r=qa(e,s,o,r,m);else if(Et(m))for(f=0,d=m.length;f<d;f++)_=m[f],_!=null&&!Et(_)&&(r=qa(e,s,o,r,_));e.restore();const v=o.length/2;if(v>i.length){for(c=0;c<v;c++)delete s[o[c]];o.splice(0,v)}return r}function zi(e,t,i){const n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function jl(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function lr(e,t,i,n){Gu(e,t,i,n,null)}function Gu(e,t,i,n,s){let o,r,l,c,f,d,m,_;const v=t.pointStyle,y=t.rotation,b=t.radius;let M=(y||0)*gy;if(v&&typeof v=="object"&&(o=v.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(M),e.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),e.restore();return}if(!(isNaN(b)||b<=0)){switch(e.beginPath(),v){default:s?e.ellipse(i,n,s/2,b,0,0,At):e.arc(i,n,b,0,At),e.closePath();break;case"triangle":d=s?s/2:b,e.moveTo(i+Math.sin(M)*d,n-Math.cos(M)*b),M+=Dl,e.lineTo(i+Math.sin(M)*d,n-Math.cos(M)*b),M+=Dl,e.lineTo(i+Math.sin(M)*d,n-Math.cos(M)*b),e.closePath();break;case"rectRounded":f=b*.516,c=b-f,r=Math.cos(M+Ii)*c,m=Math.cos(M+Ii)*(s?s/2-f:c),l=Math.sin(M+Ii)*c,_=Math.sin(M+Ii)*(s?s/2-f:c),e.arc(i-m,n-l,f,M-Ot,M-Nt),e.arc(i+_,n-r,f,M-Nt,M),e.arc(i+m,n+l,f,M,M+Nt),e.arc(i-_,n+r,f,M+Nt,M+Ot),e.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*b,d=s?s/2:c,e.rect(i-d,n-c,2*d,2*c);break}M+=Ii;case"rectRot":m=Math.cos(M)*(s?s/2:b),r=Math.cos(M)*b,l=Math.sin(M)*b,_=Math.sin(M)*(s?s/2:b),e.moveTo(i-m,n-l),e.lineTo(i+_,n-r),e.lineTo(i+m,n+l),e.lineTo(i-_,n+r),e.closePath();break;case"crossRot":M+=Ii;case"cross":m=Math.cos(M)*(s?s/2:b),r=Math.cos(M)*b,l=Math.sin(M)*b,_=Math.sin(M)*(s?s/2:b),e.moveTo(i-m,n-l),e.lineTo(i+m,n+l),e.moveTo(i+_,n-r),e.lineTo(i-_,n+r);break;case"star":m=Math.cos(M)*(s?s/2:b),r=Math.cos(M)*b,l=Math.sin(M)*b,_=Math.sin(M)*(s?s/2:b),e.moveTo(i-m,n-l),e.lineTo(i+m,n+l),e.moveTo(i+_,n-r),e.lineTo(i-_,n+r),M+=Ii,m=Math.cos(M)*(s?s/2:b),r=Math.cos(M)*b,l=Math.sin(M)*b,_=Math.sin(M)*(s?s/2:b),e.moveTo(i-m,n-l),e.lineTo(i+m,n+l),e.moveTo(i+_,n-r),e.lineTo(i-_,n+r);break;case"line":r=s?s/2:Math.cos(M)*b,l=Math.sin(M)*b,e.moveTo(i-r,n-l),e.lineTo(i+r,n+l);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(M)*(s?s/2:b),n+Math.sin(M)*b);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Ls(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function io(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function no(e){e.restore()}function zy(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){const o=(t.x+i.x)/2;e.lineTo(o,t.y),e.lineTo(o,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function Dy(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function $i(e,t,i,n,s,o={}){const r=Et(t)?t:[t],l=o.strokeWidth>0&&o.strokeColor!=="";let c,f;for(e.save(),e.font=s.string,Ry(e,o),c=0;c<r.length;++c)f=r[c],o.backdrop&&By(e,o.backdrop),l&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),vt(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(f,i,n,o.maxWidth)),e.fillText(f,i,n,o.maxWidth),Ny(e,i,n,f,o),n+=s.lineHeight;e.restore()}function Ry(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),vt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Ny(e,t,i,n,s){if(s.strikethrough||s.underline){const o=e.measureText(n),r=t-o.actualBoundingBoxLeft,l=t+o.actualBoundingBoxRight,c=i-o.actualBoundingBoxAscent,f=i+o.actualBoundingBoxDescent,d=s.strikethrough?(c+f)/2:f;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(r,d),e.lineTo(l,d),e.stroke()}}function By(e,t){const i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function Ts(e,t){const{x:i,y:n,w:s,h:o,radius:r}=t;e.arc(i+r.topLeft,n+r.topLeft,r.topLeft,-Nt,Ot,!0),e.lineTo(i,n+o-r.bottomLeft),e.arc(i+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,Ot,Nt,!0),e.lineTo(i+s-r.bottomRight,n+o),e.arc(i+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,Nt,0,!0),e.lineTo(i+s,n+r.topRight),e.arc(i+s-r.topRight,n+r.topRight,r.topRight,0,-Nt,!0),e.lineTo(i+r.topLeft,n)}const Fy=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Wy=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hy(e,t){const i=(""+e).match(Fy);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}const Zy=e=>+e||0;function zr(e,t){const i={},n=gt(t),s=n?Object.keys(t):t,o=gt(e)?n?r=>lt(e[r],e[t[r]]):r=>e[r]:()=>e;for(const r of s)i[r]=Zy(o(r));return i}function Vu(e){return zr(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Hi(e){return zr(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ae(e){const t=Vu(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function $t(e,t){e=e||{},t=t||Ht.font;let i=lt(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=lt(e.style,t.style);n&&!(""+n).match(Wy)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:lt(e.family,t.family),lineHeight:Hy(lt(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:lt(e.weight,t.weight),string:""};return s.string=Oy(s),s}function as(e,t,i,n){let s=!0,o,r,l;for(o=0,r=e.length;o<r;++o)if(l=e[o],l!==void 0&&(t!==void 0&&typeof l=="function"&&(l=l(t),s=!1),i!==void 0&&Et(l)&&(l=l[i%l.length],s=!1),l!==void 0))return n&&!s&&(n.cacheable=!1),l}function jy(e,t,i){const{min:n,max:s}=e,o=Ou(t,(s-n)/2),r=(l,c)=>i&&l===0?0:l+c;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function Si(e,t){return Object.assign(Object.create(e),t)}function Dr(e,t=[""],i=e,n,s=()=>e[0]){Te(n)||(n=Yu("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:s,override:r=>Dr([r,...e],t,i,n)};return new Proxy(o,{deleteProperty(r,l){return delete r[l],delete r._keys,delete e[0][l],!0},get(r,l){return qu(r,l,()=>Ky(l,t,e,r))},getOwnPropertyDescriptor(r,l){return Reflect.getOwnPropertyDescriptor(r._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(r,l){return Vl(r).includes(l)},ownKeys(r){return Vl(r)},set(r,l,c){const f=r._storage||(r._storage=s());return r[l]=f[l]=c,delete r._keys,!0}})}function Cn(e,t,i,n){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:$u(e,n),setContext:o=>Cn(e,o,i,n),override:o=>Cn(e.override(o),t,i,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete e[r],!0},get(o,r,l){return qu(o,r,()=>Vy(o,r,l))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(e,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,r)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,r){return Reflect.has(e,r)},ownKeys(){return Reflect.ownKeys(e)},set(o,r,l){return e[r]=l,delete o[r],!0}})}function $u(e,t={scriptable:!0,indexable:!0}){const{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:wi(i)?i:()=>i,isIndexable:wi(n)?n:()=>n}}const Gy=(e,t)=>e?e+Er(t):t,Rr=(e,t)=>gt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function qu(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const n=i();return e[t]=n,n}function Vy(e,t,i){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=e;let l=n[t];return wi(l)&&r.isScriptable(t)&&(l=$y(t,l,e,i)),Et(l)&&l.length&&(l=qy(t,l,e,r.isIndexable)),Rr(t,l)&&(l=Cn(l,s,o&&o[t],r)),l}function $y(e,t,i,n){const{_proxy:s,_context:o,_subProxy:r,_stack:l}=i;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);return l.add(e),t=t(o,r||n),l.delete(e),Rr(e,t)&&(t=Nr(s._scopes,s,e,t)),t}function qy(e,t,i,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:l}=i;if(Te(o.index)&&n(e))t=t[o.index%t.length];else if(gt(t[0])){const c=t,f=s._scopes.filter(d=>d!==c);t=[];for(const d of c){const m=Nr(f,s,e,d);t.push(Cn(m,o,r&&r[e],l))}}return t}function Uu(e,t,i){return wi(e)?e(t,i):e}const Uy=(e,t)=>e===!0?t:typeof e=="string"?Mi(t,e):void 0;function Yy(e,t,i,n,s){for(const o of t){const r=Uy(i,o);if(r){e.add(r);const l=Uu(r._fallback,i,s);if(Te(l)&&l!==i&&l!==n)return l}else if(r===!1&&Te(n)&&i!==n)return null}return!1}function Nr(e,t,i,n){const s=t._rootScopes,o=Uu(t._fallback,i,n),r=[...e,...s],l=new Set;l.add(n);let c=Gl(l,r,i,o||i,n);return c===null||Te(o)&&o!==i&&(c=Gl(l,r,o,c,n),c===null)?!1:Dr(Array.from(l),[""],s,o,()=>Xy(t,i,n))}function Gl(e,t,i,n,s){for(;i;)i=Yy(e,t,i,n,s);return i}function Xy(e,t,i){const n=e._getTarget();t in n||(n[t]={});const s=n[t];return Et(s)&&gt(i)?i:s||{}}function Ky(e,t,i,n){let s;for(const o of t)if(s=Yu(Gy(o,e),i),Te(s))return Rr(e,s)?Nr(i,n,e,s):s}function Yu(e,t){for(const i of t){if(!i)continue;const n=i[e];if(Te(n))return n}}function Vl(e){let t=e._keys;return t||(t=e._keys=Jy(e._scopes)),t}function Jy(e){const t=new Set;for(const i of e)for(const n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function Xu(e,t,i,n){const{iScale:s}=e,{key:o="r"}=this._parsing,r=new Array(n);let l,c,f,d;for(l=0,c=n;l<c;++l)f=l+i,d=t[f],r[l]={r:s.parse(Mi(d,o),f)};return r}const Qy=Number.EPSILON||1e-14,En=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ku=e=>e==="x"?"y":"x";function tx(e,t,i,n){const s=e.skip?t:e,o=t,r=i.skip?t:i,l=rr(o,s),c=rr(r,o);let f=l/(l+c),d=c/(l+c);f=isNaN(f)?0:f,d=isNaN(d)?0:d;const m=n*f,_=n*d;return{previous:{x:o.x-m*(r.x-s.x),y:o.y-m*(r.y-s.y)},next:{x:o.x+_*(r.x-s.x),y:o.y+_*(r.y-s.y)}}}function ex(e,t,i){const n=e.length;let s,o,r,l,c,f=En(e,0);for(let d=0;d<n-1;++d)if(c=f,f=En(e,d+1),!(!c||!f)){if(ds(t[d],0,Qy)){i[d]=i[d+1]=0;continue}s=i[d]/t[d],o=i[d+1]/t[d],l=Math.pow(s,2)+Math.pow(o,2),!(l<=9)&&(r=3/Math.sqrt(l),i[d]=s*r*t[d],i[d+1]=o*r*t[d])}}function ix(e,t,i="x"){const n=Ku(i),s=e.length;let o,r,l,c=En(e,0);for(let f=0;f<s;++f){if(r=l,l=c,c=En(e,f+1),!l)continue;const d=l[i],m=l[n];r&&(o=(d-r[i])/3,l[`cp1${i}`]=d-o,l[`cp1${n}`]=m-o*t[f]),c&&(o=(c[i]-d)/3,l[`cp2${i}`]=d+o,l[`cp2${n}`]=m+o*t[f])}}function nx(e,t="x"){const i=Ku(t),n=e.length,s=Array(n).fill(0),o=Array(n);let r,l,c,f=En(e,0);for(r=0;r<n;++r)if(l=c,c=f,f=En(e,r+1),!!c){if(f){const d=f[t]-c[t];s[r]=d!==0?(f[i]-c[i])/d:0}o[r]=l?f?$e(s[r-1])!==$e(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}ex(e,s,o),ix(e,o,t)}function da(e,t,i){return Math.max(Math.min(e,i),t)}function sx(e,t){let i,n,s,o,r,l=Ls(e[0],t);for(i=0,n=e.length;i<n;++i)r=o,o=l,l=i<n-1&&Ls(e[i+1],t),o&&(s=e[i],r&&(s.cp1x=da(s.cp1x,t.left,t.right),s.cp1y=da(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=da(s.cp2x,t.left,t.right),s.cp2y=da(s.cp2y,t.top,t.bottom)))}function ax(e,t,i,n,s){let o,r,l,c;if(t.spanGaps&&(e=e.filter(f=>!f.skip)),t.cubicInterpolationMode==="monotone")nx(e,s);else{let f=n?e[e.length-1]:e[0];for(o=0,r=e.length;o<r;++o)l=e[o],c=tx(f,l,e[Math.min(o+1,r-(n?0:1))%r],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,f=l}t.capBezierPoints&&sx(e,i)}function Ju(){return typeof window<"u"&&typeof document<"u"}function Br(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ua(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}const so=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function ox(e,t){return so(e).getPropertyValue(t)}const rx=["top","right","bottom","left"];function Zi(e,t,i){const n={};i=i?"-"+i:"";for(let s=0;s<4;s++){const o=rx[s];n[o]=parseFloat(e[t+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const hx=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function lx(e,t){const i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:o}=n;let r=!1,l,c;if(hx(s,o,e.target))l=s,c=o;else{const f=t.getBoundingClientRect();l=n.clientX-f.left,c=n.clientY-f.top,r=!0}return{x:l,y:c,box:r}}function Ni(e,t){if("native"in e)return e;const{canvas:i,currentDevicePixelRatio:n}=t,s=so(i),o=s.boxSizing==="border-box",r=Zi(s,"padding"),l=Zi(s,"border","width"),{x:c,y:f,box:d}=lx(e,i),m=r.left+(d&&l.left),_=r.top+(d&&l.top);let{width:v,height:y}=t;return o&&(v-=r.width+l.width,y-=r.height+l.height),{x:Math.round((c-m)/v*i.width/n),y:Math.round((f-_)/y*i.height/n)}}function cx(e,t,i){let n,s;if(t===void 0||i===void 0){const o=Br(e);if(!o)t=e.clientWidth,i=e.clientHeight;else{const r=o.getBoundingClientRect(),l=so(o),c=Zi(l,"border","width"),f=Zi(l,"padding");t=r.width-f.width-c.width,i=r.height-f.height-c.height,n=Ua(l.maxWidth,o,"clientWidth"),s=Ua(l.maxHeight,o,"clientHeight")}}return{width:t,height:i,maxWidth:n||$a,maxHeight:s||$a}}const ga=e=>Math.round(e*10)/10;function ux(e,t,i,n){const s=so(e),o=Zi(s,"margin"),r=Ua(s.maxWidth,e,"clientWidth")||$a,l=Ua(s.maxHeight,e,"clientHeight")||$a,c=cx(e,t,i);let{width:f,height:d}=c;if(s.boxSizing==="content-box"){const _=Zi(s,"border","width"),v=Zi(s,"padding");f-=v.width+_.width,d-=v.height+_.height}return f=Math.max(0,f-o.width),d=Math.max(0,n?f/n:d-o.height),f=ga(Math.min(f,r,c.maxWidth)),d=ga(Math.min(d,l,c.maxHeight)),f&&!d&&(d=ga(f/2)),(t!==void 0||i!==void 0)&&n&&c.height&&d>c.height&&(d=c.height,f=ga(Math.floor(d*n))),{width:f,height:d}}function $l(e,t,i){const n=t||1,s=Math.floor(e.height*n),o=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const r=e.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${e.height}px`,r.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(e.currentDevicePixelRatio=n,r.height=s,r.width=o,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const fx=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function ql(e,t){const i=ox(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Bi(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function dx(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function gx(e,t,i,n){const s={x:e.cp2x,y:e.cp2y},o={x:t.cp1x,y:t.cp1y},r=Bi(e,s,i),l=Bi(s,o,i),c=Bi(o,t,i),f=Bi(r,l,i),d=Bi(l,c,i);return Bi(f,d,i)}const mx=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},px=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Pn(e,t,i){return e?mx(t,i):px()}function Qu(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function tf(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ef(e){return e==="angle"?{between:ks,compare:_y,normalize:ye}:{between:ri,compare:(t,i)=>t-i,normalize:t=>t}}function Ul({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function _x(e,t,i){const{property:n,start:s,end:o}=i,{between:r,normalize:l}=ef(n),c=t.length;let{start:f,end:d,loop:m}=e,_,v;if(m){for(f+=c,d+=c,_=0,v=c;_<v&&r(l(t[f%c][n]),s,o);++_)f--,d--;f%=c,d%=c}return d<f&&(d+=c),{start:f,end:d,loop:m,style:e.style}}function nf(e,t,i){if(!i)return[e];const{property:n,start:s,end:o}=i,r=t.length,{compare:l,between:c,normalize:f}=ef(n),{start:d,end:m,loop:_,style:v}=_x(e,t,i),y=[];let b=!1,M=null,w,S,k;const E=()=>c(s,k,w)&&l(s,k)!==0,T=()=>l(o,w)===0||c(o,k,w),O=()=>b||E(),I=()=>!b||T();for(let z=d,W=d;z<=m;++z)S=t[z%r],!S.skip&&(w=f(S[n]),w!==k&&(b=c(w,s,o),M===null&&O()&&(M=l(w,s)===0?z:W),M!==null&&I()&&(y.push(Ul({start:M,end:z,loop:_,count:r,style:v})),M=null),W=z,k=w));return M!==null&&y.push(Ul({start:M,end:m,loop:_,count:r,style:v})),y}function sf(e,t){const i=[],n=e.segments;for(let s=0;s<n.length;s++){const o=nf(n[s],e.points,t);o.length&&i.push(...o)}return i}function vx(e,t,i,n){let s=0,o=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(o+=s);o>s&&e[o%t].skip;)o--;return o%=t,{start:s,end:o}}function yx(e,t,i,n){const s=e.length,o=[];let r=t,l=e[t],c;for(c=t+1;c<=i;++c){const f=e[c%s];f.skip||f.stop?l.skip||(n=!1,o.push({start:t%s,end:(c-1)%s,loop:n}),t=r=f.stop?c:null):(r=c,l.skip&&(t=c)),l=f}return r!==null&&o.push({start:t%s,end:r%s,loop:n}),o}function xx(e,t){const i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];const o=!!e._loop,{start:r,end:l}=vx(i,s,o,n);if(n===!0)return Yl(e,[{start:r,end:l,loop:o}],i,t);const c=l<r?l+s:l,f=!!e._fullLoop&&r===0&&l===s-1;return Yl(e,yx(i,r,c,f),i,t)}function Yl(e,t,i,n){return!n||!n.setContext||!i?t:bx(e,t,i,n)}function bx(e,t,i,n){const s=e._chart.getContext(),o=Xl(e.options),{_datasetIndex:r,options:{spanGaps:l}}=e,c=i.length,f=[];let d=o,m=t[0].start,_=m;function v(y,b,M,w){const S=l?-1:1;if(y!==b){for(y+=c;i[y%c].skip;)y-=S;for(;i[b%c].skip;)b+=S;y%c!==b%c&&(f.push({start:y%c,end:b%c,loop:M,style:w}),d=w,m=b%c)}}for(const y of t){m=l?m:y.start;let b=i[m%c],M;for(_=m+1;_<=y.end;_++){const w=i[_%c];M=Xl(n.setContext(Si(s,{type:"segment",p0:b,p1:w,p0DataIndex:(_-1)%c,p1DataIndex:_%c,datasetIndex:r}))),Mx(M,d)&&v(m,_-1,y.loop,d),b=w,d=M}m<_-1&&v(m,_-1,y.loop,d)}return f}function Xl(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Mx(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v4.2.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class wx{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){const o=i.listeners[s],r=i.duration;o.forEach(l=>l({chart:t,initial:i.initial,numSteps:r,currentStep:Math.min(n-i.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Bu.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,l=!1,c;for(;r>=0;--r)c=o[r],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(t),l=!0):(o[r]=o[o.length-1],o.pop());l&&(s.draw(),this._notify(s,n,t,"progress")),o.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=o.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){const i=this._charts;let n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){const i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){const i=this._charts.get(t);if(!i||!i.items.length)return;const n=i.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ii=new wx;const Kl="transparent",Px={boolean(e,t,i){return i>.5?t:e},color(e,t,i){const n=Hl(e||Kl),s=n.valid&&Hl(t||Kl);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}};class Sx{constructor(t,i,n,s){const o=i[n];s=as([t.to,s,o,t.from]);const r=as([t.from,o,s]);this._active=!0,this._fn=t.fn||Px[t.type||typeof r],this._easing=gs[t.easing]||gs.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=as([t.to,i,s,t.from]),this._from=as([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const i=t-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,l=this._to;let c;if(this._active=o!==l&&(r||i<n),!this._active){this._target[s]=l,this._notify(!0);return}if(i<0){this._target[s]=o;return}c=i/n%2,c=r&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(o,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){const i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}}class af{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!gt(t))return;const i=Object.keys(Ht.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!gt(o))return;const r={};for(const l of i)r[l]=o[l];(Et(o.properties)&&o.properties||[s]).forEach(l=>{(l===s||!n.has(l))&&n.set(l,r)})})}_animateOptions(t,i){const n=i.options,s=Lx(t,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&kx(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,i){const n=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(i),l=Date.now();let c;for(c=r.length-1;c>=0;--c){const f=r[c];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(t,i));continue}const d=i[f];let m=o[f];const _=n.get(f);if(m)if(_&&m.active()){m.update(_,d,l);continue}else m.cancel();if(!_||!_.duration){t[f]=d;continue}o[f]=m=new Sx(_,t,f,d),s.push(m)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}const n=this._createAnimations(t,i);if(n.length)return ii.add(this._chart,n),!0}}function kx(e,t){const i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const o=e[n[s]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function Lx(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Jl(e,t){const i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,o=i.max===void 0?t:0;return{start:n?o:s,end:n?s:o}}function Tx(e,t,i){if(i===!1)return!1;const n=Jl(e,i),s=Jl(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Cx(e){let t,i,n,s;return gt(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function of(e,t){const i=[],n=e._getSortedDatasetMetas(t);let s,o;for(s=0,o=n.length;s<o;++s)i.push(n[s].index);return i}function Ql(e,t,i,n={}){const s=e.keys,o=n.mode==="single";let r,l,c,f;if(t!==null){for(r=0,l=s.length;r<l;++r){if(c=+s[r],c===i){if(n.all)continue;break}f=e.values[c],Rt(f)&&(o||t===0||$e(t)===$e(f))&&(t+=f)}return t}}function Ex(e){const t=Object.keys(e),i=new Array(t.length);let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n],i[n]={x:o,y:e[o]};return i}function tc(e,t){const i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function Ax(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function Ox(e){const{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function Ix(e,t,i){const n=e[t]||(e[t]={});return n[i]||(n[i]={})}function ec(e,t,i,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const o=e[s.index];if(i&&o>0||!i&&o<0)return s.index}return null}function ic(e,t){const{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:l}=n,c=o.axis,f=r.axis,d=Ax(o,r,n),m=t.length;let _;for(let v=0;v<m;++v){const y=t[v],{[c]:b,[f]:M}=y,w=y._stacks||(y._stacks={});_=w[f]=Ix(s,d,b),_[l]=M,_._top=ec(_,r,!0,n.type),_._bottom=ec(_,r,!1,n.type);const S=_._visualValues||(_._visualValues={});S[l]=M}}function jo(e,t){const i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function zx(e,t){return Si(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Dx(e,t,i){return Si(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function Un(e,t){const i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const s of t){const o=s._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i],o[n]._visualValues!==void 0&&o[n]._visualValues[i]!==void 0&&delete o[n]._visualValues[i]}}}const Go=e=>e==="reset"||e==="none",nc=(e,t)=>t?e:Object.assign({},e),Rx=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:of(i,!0),values:null};class Re{constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=tc(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Un(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,i=this._cachedMeta,n=this.getDataset(),s=(m,_,v,y)=>m==="x"?_:m==="r"?y:v,o=i.xAxisID=lt(n.xAxisID,jo(t,"x")),r=i.yAxisID=lt(n.yAxisID,jo(t,"y")),l=i.rAxisID=lt(n.rAxisID,jo(t,"r")),c=i.indexAxis,f=i.iAxisID=s(c,o,r,l),d=i.vAxisID=s(c,r,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(r),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(f),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Bl(this._data,this),t._stacked&&Un(t)}_dataCheck(){const t=this.getDataset(),i=t.data||(t.data=[]),n=this._data;if(gt(i))this._data=Ex(i);else if(n!==i){if(n){Bl(n,this);const s=this._cachedMeta;Un(s),s._parsed=[]}i&&Object.isExtensible(i)&&by(i,this),this._syncList=[],this._data=i}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const i=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=tc(i.vScale,i),i.stack!==n.stack&&(s=!0,Un(i),i.stack=n.stack),this._resyncElements(t),(s||o!==i._stacked)&&ic(this,i._parsed)}configure(){const t=this.chart.config,i=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,l=o.axis;let c=t===0&&i===s.length?!0:n._sorted,f=t>0&&n._parsed[t-1],d,m,_;if(this._parsing===!1)n._parsed=s,n._sorted=!0,_=s;else{Et(s[t])?_=this.parseArrayData(n,s,t,i):gt(s[t])?_=this.parseObjectData(n,s,t,i):_=this.parsePrimitiveData(n,s,t,i);const v=()=>m[l]===null||f&&m[l]<f[l];for(d=0;d<i;++d)n._parsed[d+t]=m=_[d],c&&(v()&&(c=!1),f=m);n._sorted=c}r&&ic(this,_)}parsePrimitiveData(t,i,n,s){const{iScale:o,vScale:r}=t,l=o.axis,c=r.axis,f=o.getLabels(),d=o===r,m=new Array(s);let _,v,y;for(_=0,v=s;_<v;++_)y=_+n,m[_]={[l]:d||o.parse(f[y],y),[c]:r.parse(i[y],y)};return m}parseArrayData(t,i,n,s){const{xScale:o,yScale:r}=t,l=new Array(s);let c,f,d,m;for(c=0,f=s;c<f;++c)d=c+n,m=i[d],l[c]={x:o.parse(m[0],d),y:r.parse(m[1],d)};return l}parseObjectData(t,i,n,s){const{xScale:o,yScale:r}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,f=new Array(s);let d,m,_,v;for(d=0,m=s;d<m;++d)_=d+n,v=i[_],f[d]={x:o.parse(Mi(v,l),_),y:r.parse(Mi(v,c),_)};return f}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,n){const s=this.chart,o=this._cachedMeta,r=i[t.axis],l={keys:of(s,!0),values:i._stacks[t.axis]._visualValues};return Ql(l,r,o.index,{mode:n})}updateRangeFromParsed(t,i,n,s){const o=n[i.axis];let r=o===null?NaN:o;const l=s&&n._stacks[i.axis];s&&l&&(s.values=l,r=Ql(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,i){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&t===n.iScale,r=s.length,l=this._getOtherScale(t),c=Rx(i,n,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:m}=Ox(l);let _,v;function y(){v=s[_];const b=v[l.axis];return!Rt(v[t.axis])||d>b||m<b}for(_=0;_<r&&!(!y()&&(this.updateRangeFromParsed(f,t,v,c),o));++_);if(o){for(_=r-1;_>=0;--_)if(!y()){this.updateRangeFromParsed(f,t,v,c);break}}return f}getAllParsedValues(t){const i=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=i.length;s<o;++s)r=i[s][t.axis],Rt(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const i=this._cachedMeta,n=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const i=this._cachedMeta;this.update(t||"default"),i._clip=Cx(lt(this.options.clip,Tx(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this.chart,n=this._cachedMeta,s=n.data||[],o=i.chartArea,r=[],l=this._drawStart||0,c=this._drawCount||s.length-l,f=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(t,o,l,c),d=l;d<l+c;++d){const m=s[d];m.hidden||(m.active&&f?r.push(m):m.draw(t,o))}for(d=0;d<r.length;++d)r[d].draw(t,o)}getStyle(t,i){const n=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,i,n){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=Dx(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=zx(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",n){const s=i==="active",o=this._cachedDataOpts,r=t+"-"+i,l=o[r],c=this.enableOptionSharing&&Te(n);if(l)return nc(l,c);const f=this.chart.config,d=f.datasetElementScopeKeys(this._type,t),m=s?[`${t}Hover`,"hover",t,""]:[t,""],_=f.getOptionScopes(this.getDataset(),d),v=Object.keys(Ht.elements[t]),y=()=>this.getContext(n,s,i),b=f.resolveNamedOptions(_,v,y,m);return b.$shared&&(b.$shared=c,o[r]=Object.freeze(nc(b,c))),b}_resolveAnimations(t,i,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${i}`,l=o[r];if(l)return l;let c;if(s.options.animation!==!1){const d=this.chart.config,m=d.datasetAnimationScopeKeys(this._type,i),_=d.getOptionScopes(this.getDataset(),m);c=d.createResolver(_,this.getContext(t,n,i))}const f=new af(s,c&&c.animations);return c&&c._cacheable&&(o[r]=Object.freeze(f)),f}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Go(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){const n=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:r}}updateElement(t,i,n,s){Go(s)?Object.assign(t,n):this._resolveAnimations(i,s).update(t,n)}updateSharedOptions(t,i,n){t&&!Go(i)&&this._resolveAnimations(void 0,i).update(t,n)}_setStyle(t,i,n,s){t.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,n,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,i,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const i=this._data,n=this._cachedMeta.data;for(const[l,c,f]of this._syncList)this[l](c,f);this._syncList=[];const s=n.length,o=i.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,n=!0){const s=this._cachedMeta,o=s.data,r=t+i;let l;const c=f=>{for(f.length+=i,l=f.length-1;l>=r;l--)f[l]=f[l-i]};for(c(o),l=t;l<r;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,i),n&&this.updateElements(o,t,i,"reset")}updateElements(t,i,n,s){}_removeElements(t,i){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,i);n._stacked&&Un(n,s)}n.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[i,n,s]=t;this[i](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}K(Re,"defaults",{}),K(Re,"datasetElementType",null),K(Re,"dataElementType",null);function Nx(e,t){if(!e._cache.$bar){const i=e.getMatchingVisibleMetas(t);let n=[];for(let s=0,o=i.length;s<o;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=Nu(n.sort((s,o)=>s-o))}return e._cache.$bar}function Bx(e){const t=e.iScale,i=Nx(t,e.type);let n=t._length,s,o,r,l;const c=()=>{r===32767||r===-32768||(Te(l)&&(n=Math.min(n,Math.abs(r-l)||n)),l=r)};for(s=0,o=i.length;s<o;++s)r=t.getPixelForValue(i[s]),c();for(l=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),c();return n}function Fx(e,t,i,n){const s=i.barThickness;let o,r;return vt(s)?(o=t.min*i.categoryPercentage,r=i.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:t.pixels[e]-o/2}}function Wx(e,t,i,n){const s=t.pixels,o=s[e];let r=e>0?s[e-1]:null,l=e<s.length-1?s[e+1]:null;const c=i.categoryPercentage;r===null&&(r=o-(l===null?t.end-t.start:l-o)),l===null&&(l=o+o-r);const f=o-(o-Math.min(r,l))/2*c;return{chunk:Math.abs(l-r)/2*c/n,ratio:i.barPercentage,start:f}}function Hx(e,t,i,n){const s=i.parse(e[0],n),o=i.parse(e[1],n),r=Math.min(s,o),l=Math.max(s,o);let c=r,f=l;Math.abs(r)>Math.abs(l)&&(c=l,f=r),t[i.axis]=f,t._custom={barStart:c,barEnd:f,start:s,end:o,min:r,max:l}}function rf(e,t,i,n){return Et(e)?Hx(e,t,i,n):t[i.axis]=i.parse(e,n),t}function sc(e,t,i,n){const s=e.iScale,o=e.vScale,r=s.getLabels(),l=s===o,c=[];let f,d,m,_;for(f=i,d=i+n;f<d;++f)_=t[f],m={},m[s.axis]=l||s.parse(r[f],f),c.push(rf(_,m,o,f));return c}function Vo(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Zx(e,t,i){return e!==0?$e(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function jx(e){let t,i,n,s,o;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",o="start"):(s="start",o="end"),{start:i,end:n,reverse:t,top:s,bottom:o}}function Gx(e,t,i,n){let s=t.borderSkipped;const o={};if(!s){e.borderSkipped=o;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:l,reverse:c,top:f,bottom:d}=jx(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=f:(i._bottom||0)===n?s=d:(o[ac(d,r,l,c)]=!0,s=f)),o[ac(s,r,l,c)]=!0,e.borderSkipped=o}function ac(e,t,i,n){return n?(e=Vx(e,t,i),e=oc(e,i,t)):e=oc(e,t,i),e}function Vx(e,t,i){return e===t?i:e===i?t:e}function oc(e,t,i){return e==="start"?t:e==="end"?i:e}function $x(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}class Ta extends Re{parsePrimitiveData(t,i,n,s){return sc(t,i,n,s)}parseArrayData(t,i,n,s){return sc(t,i,n,s)}parseObjectData(t,i,n,s){const{iScale:o,vScale:r}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,f=o.axis==="x"?l:c,d=r.axis==="x"?l:c,m=[];let _,v,y,b;for(_=n,v=n+s;_<v;++_)b=i[_],y={},y[o.axis]=o.parse(Mi(b,f),_),m.push(rf(Mi(b,d),y,r,_));return m}updateRangeFromParsed(t,i,n,s){super.updateRangeFromParsed(t,i,n,s);const o=n._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const i=this._cachedMeta,{iScale:n,vScale:s}=i,o=this.getParsed(t),r=o._custom,l=Vo(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,n,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),f=l.isHorizontal(),d=this._getRuler(),{sharedOptions:m,includeOptions:_}=this._getSharedOptions(i,s);for(let v=i;v<i+n;v++){const y=this.getParsed(v),b=o||vt(y[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(v),M=this._calculateBarIndexPixels(v,d),w=(y._stacks||{})[l.axis],S={horizontal:f,base:b.base,enableBorderRadius:!w||Vo(y._custom)||r===w._top||r===w._bottom,x:f?b.head:M.center,y:f?M.center:b.head,height:f?M.size:Math.abs(b.size),width:f?Math.abs(b.size):M.size};_&&(S.options=m||this.resolveDataElementOptions(v,t[v].active?"active":s));const k=S.options||t[v].options;Gx(S,k,w,r),$x(S,k,d.ratio),this.updateElement(t[v],v,S,s)}}_getStacks(t,i){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=n.options.stacked,r=[],l=c=>{const f=c.controller.getParsed(i),d=f&&f[c.vScale.axis];if(vt(d)||isNaN(d))return!0};for(const c of s)if(!(i!==void 0&&l(c))&&((o===!1||r.indexOf(c.stack)===-1||o===void 0&&c.stack===void 0)&&r.push(c.stack),c.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,n){const s=this._getStacks(t,n),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,i=this._cachedMeta,n=i.iScale,s=[];let o,r;for(o=0,r=i.data.length;o<r;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const l=t.barThickness;return{min:l||Bx(i),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:i,_stacked:n,index:s},options:{base:o,minBarLength:r}}=this,l=o||0,c=this.getParsed(t),f=c._custom,d=Vo(f);let m=c[i.axis],_=0,v=n?this.applyStack(i,c,n):m,y,b;v!==m&&(_=v-m,v=m),d&&(m=f.barStart,v=f.barEnd-f.barStart,m!==0&&$e(m)!==$e(f.barEnd)&&(_=0),_+=m);const M=!vt(o)&&!d?o:_;let w=i.getPixelForValue(M);if(this.chart.getDataVisibility(t)?y=i.getPixelForValue(_+v):y=w,b=y-w,Math.abs(b)<r){b=Zx(b,i,l)*r,m===l&&(w-=b/2);const S=i.getPixelForDecimal(0),k=i.getPixelForDecimal(1),E=Math.min(S,k),T=Math.max(S,k);w=Math.max(Math.min(w,T),E),y=w+b,n&&!d&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(y)-i.getValueForPixel(w))}if(w===i.getPixelForValue(l)){const S=$e(b)*i.getLineWidthForValue(l)/2;w+=S,b-=S}return{size:b,base:w,head:y,center:y+b/2}}_calculateBarIndexPixels(t,i){const n=i.scale,s=this.options,o=s.skipNull,r=lt(s.maxBarThickness,1/0);let l,c;if(i.grouped){const f=o?this._getStackCount(t):i.stackCount,d=s.barThickness==="flex"?Wx(t,i,s,f):Fx(t,i,s,f),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);l=d.start+d.chunk*m+d.chunk/2,c=Math.min(r,d.chunk*d.ratio)}else l=n.getPixelForValue(this.getParsed(t)[n.axis],t),c=Math.min(r,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,i=t.vScale,n=t.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&n[o].draw(this._ctx)}}K(Ta,"id","bar"),K(Ta,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),K(Ta,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ca extends Re{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,n,s){const o=super.parsePrimitiveData(t,i,n,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+n).radius;return o}parseArrayData(t,i,n,s){const o=super.parseArrayData(t,i,n,s);for(let r=0;r<o.length;r++){const l=i[n+r];o[r]._custom=lt(l[2],this.resolveDataElementOptions(r+n).radius)}return o}parseObjectData(t,i,n,s){const o=super.parseObjectData(t,i,n,s);for(let r=0;r<o.length;r++){const l=i[n+r];o[r]._custom=lt(l&&l.r&&+l.r,this.resolveDataElementOptions(r+n).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(t),l=s.getLabelForValue(r.x),c=o.getLabelForValue(r.y),f=r._custom;return{label:n[t]||"",value:"("+l+", "+c+(f?", "+f:"")+")"}}update(t){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,n,s){const o=s==="reset",{iScale:r,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:f}=this._getSharedOptions(i,s),d=r.axis,m=l.axis;for(let _=i;_<i+n;_++){const v=t[_],y=!o&&this.getParsed(_),b={},M=b[d]=o?r.getPixelForDecimal(.5):r.getPixelForValue(y[d]),w=b[m]=o?l.getBasePixel():l.getPixelForValue(y[m]);b.skip=isNaN(M)||isNaN(w),f&&(b.options=c||this.resolveDataElementOptions(_,v.active?"active":s),o&&(b.options.radius=0)),this.updateElement(v,_,b,s)}}resolveDataElementOptions(t,i){const n=this.getParsed(t);let s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=lt(n&&n._custom,o),s}}K(Ca,"id","bubble"),K(Ca,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),K(Ca,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function qx(e,t,i){let n=1,s=1,o=0,r=0;if(t<At){const l=e,c=l+t,f=Math.cos(l),d=Math.sin(l),m=Math.cos(c),_=Math.sin(c),v=(k,E,T)=>ks(k,l,c,!0)?1:Math.max(E,E*i,T,T*i),y=(k,E,T)=>ks(k,l,c,!0)?-1:Math.min(E,E*i,T,T*i),b=v(0,f,m),M=v(Nt,d,_),w=y(Ot,f,m),S=y(Ot+Nt,d,_);n=(b-w)/2,s=(M-S)/2,o=-(b+w)/2,r=-(M+S)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class Fi extends Re{constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=c=>+n[c];if(gt(n[t])){const{key:c="value"}=this._parsing;o=f=>+Mi(n[f],c)}let r,l;for(r=t,l=t+i;r<l;++r)s._parsed[r]=o(r)}}_getRotation(){return ze(this.options.rotation-90)}_getCircumference(){return ze(this.options.circumference)}_getRotationExtents(){let t=At,i=-At;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+r)}return{rotation:t,circumference:i-t}}update(t){const i=this.chart,{chartArea:n}=i,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-r)/2,0),c=Math.min(ry(this.options.cutout,l),1),f=this._getRingWeight(this.index),{circumference:d,rotation:m}=this._getRotationExtents(),{ratioX:_,ratioY:v,offsetX:y,offsetY:b}=qx(m,d,c),M=(n.width-r)/_,w=(n.height-r)/v,S=Math.max(Math.min(M,w)/2,0),k=Ou(this.options.radius,S),E=Math.max(k*c,0),T=(k-E)/this._getVisibleDatasetWeightTotal();this.offsetX=y*k,this.offsetY=b*k,s.total=this.calculateTotal(),this.outerRadius=k-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*f,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/At)}updateElements(t,i,n,s){const o=s==="reset",r=this.chart,l=r.chartArea,f=r.options.animation,d=(l.left+l.right)/2,m=(l.top+l.bottom)/2,_=o&&f.animateScale,v=_?0:this.innerRadius,y=_?0:this.outerRadius,{sharedOptions:b,includeOptions:M}=this._getSharedOptions(i,s);let w=this._getRotation(),S;for(S=0;S<i;++S)w+=this._circumference(S,o);for(S=i;S<i+n;++S){const k=this._circumference(S,o),E=t[S],T={x:d+this.offsetX,y:m+this.offsetY,startAngle:w,endAngle:w+k,circumference:k,outerRadius:y,innerRadius:v};M&&(T.options=b||this.resolveDataElementOptions(S,E.active?"active":s)),w+=k,this.updateElement(E,S,T,s)}}calculateTotal(){const t=this._cachedMeta,i=t.data;let n=0,s;for(s=0;s<i.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const i=this._cachedMeta.total;return i>0&&!isNaN(t)?At*(Math.abs(t)/i):0}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Fs(i._parsed[t],n.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0;const n=this.chart;let s,o,r,l,c;if(!t){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),t=r.data,l=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let n=0,s=t.length;n<s;++n){const o=this.resolveDataElementOptions(n);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(t){return Math.max(lt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}K(Fi,"id","doughnut"),K(Fi,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),K(Fi,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"}),K(Fi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((o,r)=>{const c=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});class Ea extends Re{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const i=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=i,r=this.chart._animationsDisabled;let{start:l,count:c}=Wu(i,s,r);this._drawStart=l,this._drawCount=c,Hu(i)&&(l=0,c=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const f=this.resolveDatasetElementOptions(t);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:f},t),this.updateElements(s,l,c,t)}updateElements(t,i,n,s){const o=s==="reset",{iScale:r,vScale:l,_stacked:c,_dataset:f}=this._cachedMeta,{sharedOptions:d,includeOptions:m}=this._getSharedOptions(i,s),_=r.axis,v=l.axis,{spanGaps:y,segment:b}=this.options,M=Tn(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||s==="none",S=i+n,k=t.length;let E=i>0&&this.getParsed(i-1);for(let T=0;T<k;++T){const O=t[T],I=w?O:{};if(T<i||T>=S){I.skip=!0;continue}const z=this.getParsed(T),W=vt(z[v]),Z=I[_]=r.getPixelForValue(z[_],T),j=I[v]=o||W?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,z,c):z[v],T);I.skip=isNaN(Z)||isNaN(j)||W,I.stop=T>0&&Math.abs(z[_]-E[_])>M,b&&(I.parsed=z,I.raw=f.data[T]),m&&(I.options=d||this.resolveDataElementOptions(T,O.active?"active":s)),w||this.updateElement(O,T,I,s),E=z}}getMaxOverflow(){const t=this._cachedMeta,i=t.dataset,n=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}K(Ea,"id","line"),K(Ea,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),K(Ea,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ps extends Re{constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Fs(i._parsed[t].r,n.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,n,s){return Xu.bind(this)(t,i,n,s)}update(t){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){const t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const t=this.chart,i=t.chartArea,n=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),r=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),l=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,i,n,s){const o=s==="reset",r=this.chart,c=r.options.animation,f=this._cachedMeta.rScale,d=f.xCenter,m=f.yCenter,_=f.getIndexAngle(0)-.5*Ot;let v=_,y;const b=360/this.countVisibleElements();for(y=0;y<i;++y)v+=this._computeAngle(y,s,b);for(y=i;y<i+n;y++){const M=t[y];let w=v,S=v+this._computeAngle(y,s,b),k=r.getDataVisibility(y)?f.getDistanceFromCenterForValue(this.getParsed(y).r):0;v=S,o&&(c.animateScale&&(k=0),c.animateRotate&&(w=S=_));const E={x:d,y:m,innerRadius:0,outerRadius:k,startAngle:w,endAngle:S,options:this.resolveDataElementOptions(y,M.active?"active":s)};this.updateElement(M,y,E,s)}}countVisibleElements(){const t=this._cachedMeta;let i=0;return t.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,n){return this.chart.getDataVisibility(t)?ze(this.resolveDataElementOptions(t,i).angle||n):0}}K(ps,"id","polarArea"),K(ps,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),K(ps,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const i=t.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return i.labels.map((o,r)=>{const c=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class cr extends Fi{}K(cr,"id","pie"),K(cr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Aa extends Re{getLabelAndValue(t){const i=this._cachedMeta.vScale,n=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(t,i,n,s){return Xu.bind(this)(t,i,n,s)}update(t){const i=this._cachedMeta,n=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(n.points=s,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const l={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(n,void 0,l,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,n,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let l=i;l<i+n;l++){const c=t[l],f=this.resolveDataElementOptions(l,c.active?"active":s),d=o.getPointPositionForValue(l,this.getParsed(l).r),m=r?o.xCenter:d.x,_=r?o.yCenter:d.y,v={x:m,y:_,angle:d.angle,skip:isNaN(m)||isNaN(_),options:f};this.updateElement(c,l,v,s)}}}K(Aa,"id","radar"),K(Aa,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),K(Aa,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Oa extends Re{getLabelAndValue(t){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=i,r=this.getParsed(t),l=s.getLabelForValue(r.x),c=o.getLabelForValue(r.y);return{label:n[t]||"",value:"("+l+", "+c+")"}}update(t){const i=this._cachedMeta,{data:n=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:r}=Wu(i,n,s);if(this._drawStart=o,this._drawCount=r,Hu(i)&&(o=0,r=n.length),this.options.showLine){const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=n;const f=this.resolveDatasetElementOptions(t);f.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:f},t)}this.updateElements(n,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,n,s){const o=s==="reset",{iScale:r,vScale:l,_stacked:c,_dataset:f}=this._cachedMeta,d=this.resolveDataElementOptions(i,s),m=this.getSharedOptions(d),_=this.includeOptions(s,m),v=r.axis,y=l.axis,{spanGaps:b,segment:M}=this.options,w=Tn(b)?b:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||o||s==="none";let k=i>0&&this.getParsed(i-1);for(let E=i;E<i+n;++E){const T=t[E],O=this.getParsed(E),I=S?T:{},z=vt(O[y]),W=I[v]=r.getPixelForValue(O[v],E),Z=I[y]=o||z?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,O,c):O[y],E);I.skip=isNaN(W)||isNaN(Z)||z,I.stop=E>0&&Math.abs(O[v]-k[v])>w,M&&(I.parsed=O,I.raw=f.data[E]),_&&(I.options=m||this.resolveDataElementOptions(E,T.active?"active":s)),S||this.updateElement(T,E,I,s),k=O}this.updateSharedOptions(m,s,d)}getMaxOverflow(){const t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const n=t.dataset,s=n.options&&n.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,r)/2}}K(Oa,"id","scatter"),K(Oa,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),K(Oa,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Ux=Object.freeze({__proto__:null,BarController:Ta,BubbleController:Ca,DoughnutController:Fi,LineController:Ea,PolarAreaController:ps,PieController:cr,RadarController:Aa,ScatterController:Oa});function Di(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Fr{static override(t){Object.assign(Fr.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return Di()}parse(){return Di()}format(){return Di()}add(){return Di()}diff(){return Di()}startOf(){return Di()}endOf(){return Di()}}var Yx={_date:Fr};function Xx(e,t,i,n){const{controller:s,data:o,_sorted:r}=e,l=s._cachedMeta.iScale;if(l&&t===l.axis&&t!=="r"&&r&&o.length){const c=l._reversePixels?yy:hi;if(n){if(s._sharedOptions){const f=o[0],d=typeof f.getRange=="function"&&f.getRange(t);if(d){const m=c(o,t,i-d),_=c(o,t,i+d);return{lo:m.lo,hi:_.hi}}}}else return c(o,t,i)}return{lo:0,hi:o.length-1}}function Ws(e,t,i,n,s){const o=e.getSortedVisibleDatasetMetas(),r=i[t];for(let l=0,c=o.length;l<c;++l){const{index:f,data:d}=o[l],{lo:m,hi:_}=Xx(o[l],t,r,s);for(let v=m;v<=_;++v){const y=d[v];y.skip||n(y,f,v)}}}function Kx(e){const t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){const o=t?Math.abs(n.x-s.x):0,r=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function $o(e,t,i,n,s){const o=[];return!s&&!e.isPointInArea(t)||Ws(e,i,t,function(l,c,f){!s&&!Ls(l,e.chartArea,0)||l.inRange(t.x,t.y,n)&&o.push({element:l,datasetIndex:c,index:f})},!0),o}function Jx(e,t,i,n){let s=[];function o(r,l,c){const{startAngle:f,endAngle:d}=r.getProps(["startAngle","endAngle"],n),{angle:m}=Du(r,{x:t.x,y:t.y});ks(m,f,d)&&s.push({element:r,datasetIndex:l,index:c})}return Ws(e,i,t,o),s}function Qx(e,t,i,n,s,o){let r=[];const l=Kx(i);let c=Number.POSITIVE_INFINITY;function f(d,m,_){const v=d.inRange(t.x,t.y,s);if(n&&!v)return;const y=d.getCenterPoint(s);if(!(!!o||e.isPointInArea(y))&&!v)return;const M=l(t,y);M<c?(r=[{element:d,datasetIndex:m,index:_}],c=M):M===c&&r.push({element:d,datasetIndex:m,index:_})}return Ws(e,i,t,f),r}function qo(e,t,i,n,s,o){return!o&&!e.isPointInArea(t)?[]:i==="r"&&!n?Jx(e,t,i,s):Qx(e,t,i,n,s,o)}function rc(e,t,i,n,s){const o=[],r=i==="x"?"inXRange":"inYRange";let l=!1;return Ws(e,i,t,(c,f,d)=>{c[r](t[i],s)&&(o.push({element:c,datasetIndex:f,index:d}),l=l||c.inRange(t.x,t.y,s))}),n&&!l?[]:o}var tb={evaluateInteractionItems:Ws,modes:{index(e,t,i,n){const s=Ni(t,e),o=i.axis||"x",r=i.includeInvisible||!1,l=i.intersect?$o(e,s,o,n,r):qo(e,s,o,!1,n,r),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(f=>{const d=l[0].index,m=f.data[d];m&&!m.skip&&c.push({element:m,datasetIndex:f.index,index:d})}),c):[]},dataset(e,t,i,n){const s=Ni(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;let l=i.intersect?$o(e,s,o,n,r):qo(e,s,o,!1,n,r);if(l.length>0){const c=l[0].datasetIndex,f=e.getDatasetMeta(c).data;l=[];for(let d=0;d<f.length;++d)l.push({element:f[d],datasetIndex:c,index:d})}return l},point(e,t,i,n){const s=Ni(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return $o(e,s,o,n,r)},nearest(e,t,i,n){const s=Ni(t,e),o=i.axis||"xy",r=i.includeInvisible||!1;return qo(e,s,o,i.intersect,n,r)},x(e,t,i,n){const s=Ni(t,e);return rc(e,s,"x",i.intersect,n)},y(e,t,i,n){const s=Ni(t,e);return rc(e,s,"y",i.intersect,n)}}};const hf=["left","top","right","bottom"];function Yn(e,t){return e.filter(i=>i.pos===t)}function hc(e,t){return e.filter(i=>hf.indexOf(i.pos)===-1&&i.box.axis===t)}function Xn(e,t){return e.sort((i,n)=>{const s=t?n:i,o=t?i:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function eb(e){const t=[];let i,n,s,o,r,l;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:o,options:{stack:r,stackWeight:l=1}}=s,t.push({index:i,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:l});return t}function ib(e){const t={};for(const i of e){const{stack:n,pos:s,stackWeight:o}=i;if(!n||!hf.includes(s))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function nb(e,t){const i=ib(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let o,r,l;for(o=0,r=e.length;o<r;++o){l=e[o];const{fullSize:c}=l.box,f=i[l.stack],d=f&&l.stackWeight/f.weight;l.horizontal?(l.width=d?d*n:c&&t.availableWidth,l.height=s):(l.width=n,l.height=d?d*s:c&&t.availableHeight)}return i}function sb(e){const t=eb(e),i=Xn(t.filter(f=>f.box.fullSize),!0),n=Xn(Yn(t,"left"),!0),s=Xn(Yn(t,"right")),o=Xn(Yn(t,"top"),!0),r=Xn(Yn(t,"bottom")),l=hc(t,"x"),c=hc(t,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:s.concat(c).concat(r).concat(l),chartArea:Yn(t,"chartArea"),vertical:n.concat(s).concat(c),horizontal:o.concat(r).concat(l)}}function lc(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function lf(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ab(e,t,i,n){const{pos:s,box:o}=i,r=e.maxPadding;if(!gt(s)){i.size&&(e[s]-=i.size);const m=n[i.stack]||{size:0,count:1};m.size=Math.max(m.size,i.horizontal?o.height:o.width),i.size=m.size/m.count,e[s]+=i.size}o.getPadding&&lf(r,o.getPadding());const l=Math.max(0,t.outerWidth-lc(r,e,"left","right")),c=Math.max(0,t.outerHeight-lc(r,e,"top","bottom")),f=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,i.horizontal?{same:f,other:d}:{same:d,other:f}}function ob(e){const t=e.maxPadding;function i(n){const s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function rb(e,t){const i=t.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],i[r])}),o}return n(e?["left","right"]:["top","bottom"])}function os(e,t,i,n){const s=[];let o,r,l,c,f,d;for(o=0,r=e.length,f=0;o<r;++o){l=e[o],c=l.box,c.update(l.width||t.w,l.height||t.h,rb(l.horizontal,t));const{same:m,other:_}=ab(t,i,l,n);f|=m&&s.length,d=d||_,c.fullSize||s.push(l)}return f&&os(s,t,i,n)||d}function ma(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function cc(e,t,i,n){const s=i.padding;let{x:o,y:r}=t;for(const l of e){const c=l.box,f=n[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/f.weight||1;if(l.horizontal){const m=t.w*d,_=f.size||c.height;Te(f.start)&&(r=f.start),c.fullSize?ma(c,s.left,r,i.outerWidth-s.right-s.left,_):ma(c,t.left+f.placed,r,m,_),f.start=r,f.placed+=m,r=c.bottom}else{const m=t.h*d,_=f.size||c.width;Te(f.start)&&(o=f.start),c.fullSize?ma(c,o,s.top,_,i.outerHeight-s.bottom-s.top):ma(c,o,t.top+f.placed,_,m),f.start=o,f.placed+=m,o=c.right}}t.x=o,t.y=r}var se={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){const i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;const s=ae(e.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(i-s.height,0),l=sb(e.boxes),c=l.vertical,f=l.horizontal;Pt(e.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=c.reduce((b,M)=>M.box.options&&M.box.options.display===!1?b:b+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/d,hBoxMaxHeight:r/2}),_=Object.assign({},s);lf(_,ae(n));const v=Object.assign({maxPadding:_,w:o,h:r,x:s.left,y:s.top},s),y=nb(c.concat(f),m);os(l.fullSize,v,m,y),os(c,v,m,y),os(f,v,m,y)&&os(c,v,m,y),ob(v),cc(l.leftAndTop,v,m,y),v.x+=v.w,v.y+=v.h,cc(l.rightAndBottom,v,m,y),e.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Pt(l.chartArea,b=>{const M=b.box;Object.assign(M,e.chartArea),M.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class cf{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}}class hb extends cf{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ia="$chartjs",lb={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},uc=e=>e===null||e==="";function cb(e,t){const i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[Ia]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",uc(s)){const o=ql(e,"width");o!==void 0&&(e.width=o)}if(uc(n))if(e.style.height==="")e.height=e.width/(t||2);else{const o=ql(e,"height");o!==void 0&&(e.height=o)}return e}const uf=fx?{passive:!0}:!1;function ub(e,t,i){e.addEventListener(t,i,uf)}function fb(e,t,i){e.canvas.removeEventListener(t,i,uf)}function db(e,t){const i=lb[e.type]||e.type,{x:n,y:s}=Ni(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Ya(e,t){for(const i of e)if(i===t||i.contains(t))return!0}function gb(e,t,i){const n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(const l of o)r=r||Ya(l.addedNodes,n),r=r&&!Ya(l.removedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function mb(e,t,i){const n=e.canvas,s=new MutationObserver(o=>{let r=!1;for(const l of o)r=r||Ya(l.removedNodes,n),r=r&&!Ya(l.addedNodes,n);r&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}const Cs=new Map;let fc=0;function ff(){const e=window.devicePixelRatio;e!==fc&&(fc=e,Cs.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function pb(e,t){Cs.size||window.addEventListener("resize",ff),Cs.set(e,t)}function _b(e){Cs.delete(e),Cs.size||window.removeEventListener("resize",ff)}function vb(e,t,i){const n=e.canvas,s=n&&Br(n);if(!s)return;const o=Fu((l,c)=>{const f=s.clientWidth;i(l,c),f<s.clientWidth&&i()},window),r=new ResizeObserver(l=>{const c=l[0],f=c.contentRect.width,d=c.contentRect.height;f===0&&d===0||o(f,d)});return r.observe(s),pb(e,o),r}function Uo(e,t,i){i&&i.disconnect(),t==="resize"&&_b(e)}function yb(e,t,i){const n=e.canvas,s=Fu(o=>{e.ctx!==null&&i(db(o,e))},e);return ub(n,t,s),s}class xb extends cf{acquireContext(t,i){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(cb(t,i),n):null}releaseContext(t){const i=t.canvas;if(!i[Ia])return!1;const n=i[Ia].initial;["height","width"].forEach(o=>{const r=n[o];vt(r)?i.removeAttribute(o):i.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{i.style[o]=s[o]}),i.width=i.width,delete i[Ia],!0}addEventListener(t,i,n){this.removeEventListener(t,i);const s=t.$proxies||(t.$proxies={}),r={attach:gb,detach:mb,resize:vb}[i]||yb;s[i]=r(t,i,n)}removeEventListener(t,i){const n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:Uo,detach:Uo,resize:Uo}[i]||fb)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return ux(t,i,n,s)}isAttached(t){const i=Br(t);return!!(i&&i.isConnected)}}function bb(e){return!Ju()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?hb:xb}var Ma;let ci=(Ma=class{constructor(){K(this,"active",!1)}tooltipPosition(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return Tn(this.x)&&Tn(this.y)}getProps(t,i){const n=this.$animations;if(!i||!n)return this;const s={};return t.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},K(Ma,"defaults",{}),K(Ma,"defaultRoutes"),Ma);function Mb(e,t){const i=e.options.ticks,n=wb(e),s=Math.min(i.maxTicksLimit||n,n),o=i.major.enabled?Sb(t):[],r=o.length,l=o[0],c=o[r-1],f=[];if(r>s)return kb(t,f,o,r/s),f;const d=Pb(o,t,s);if(r>0){let m,_;const v=r>1?Math.round((c-l)/(r-1)):null;for(pa(t,f,d,vt(v)?0:l-v,l),m=0,_=r-1;m<_;m++)pa(t,f,d,o[m],o[m+1]);return pa(t,f,d,c,vt(v)?t.length:c+v),f}return pa(t,f,d),f}function wb(e){const t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function Pb(e,t,i){const n=Lb(e),s=t.length/i;if(!n)return Math.max(s,1);const o=my(n);for(let r=0,l=o.length-1;r<l;r++){const c=o[r];if(c>s)return c}return Math.max(s,1)}function Sb(e){const t=[];let i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function kb(e,t,i,n){let s=0,o=i[0],r;for(n=Math.ceil(n),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=i[s*n])}function pa(e,t,i,n,s){const o=lt(n,0),r=Math.min(lt(s,e.length),e.length);let l=0,c,f,d;for(i=Math.ceil(i),s&&(c=s-n,i=c/Math.floor(c/i)),d=o;d<0;)l++,d=Math.round(o+l*i);for(f=Math.max(o,0);f<r;f++)f===d&&(t.push(e[f]),l++,d=Math.round(o+l*i))}function Lb(e){const t=e.length;let i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}const Tb=e=>e==="left"?"right":e==="right"?"left":e,dc=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,gc=(e,t)=>Math.min(t||e,e);function mc(e,t){const i=[],n=e.length/t,s=e.length;let o=0;for(;o<s;o+=n)i.push(e[Math.floor(o)]);return i}function Cb(e,t,i){const n=e.ticks.length,s=Math.min(t,n-1),o=e._startPixel,r=e._endPixel,l=1e-6;let c=e.getPixelForTick(s),f;if(!(i&&(n===1?f=Math.max(c-o,r-c):t===0?f=(e.getPixelForTick(1)-c)/2:f=(c-e.getPixelForTick(s-1))/2,c+=s<t?f:-f,c<o-l||c>r+l)))return c}function Eb(e,t){Pt(e,i=>{const n=i.gc,s=n.length/2;let o;if(s>t){for(o=0;o<s;++o)delete i.data[n[o]];n.splice(0,s)}})}function Kn(e){return e.drawTicks?e.tickLength:0}function pc(e,t){if(!e.display)return 0;const i=$t(e.font,t),n=ae(e.padding);return(Et(e.text)?e.text.length:1)*i.lineHeight+n.height}function Ab(e,t){return Si(e,{scale:t,type:"scale"})}function Ob(e,t,i){return Si(e,{tick:i,index:t,type:"tick"})}function Ib(e,t,i){let n=Ir(e);return(i&&t!=="right"||!i&&t==="right")&&(n=Tb(n)),n}function zb(e,t,i,n){const{top:s,left:o,bottom:r,right:l,chart:c}=e,{chartArea:f,scales:d}=c;let m=0,_,v,y;const b=r-s,M=l-o;if(e.isHorizontal()){if(v=ee(n,o,l),gt(i)){const w=Object.keys(i)[0],S=i[w];y=d[w].getPixelForValue(S)+b-t}else i==="center"?y=(f.bottom+f.top)/2+b-t:y=dc(e,i,t);_=l-o}else{if(gt(i)){const w=Object.keys(i)[0],S=i[w];v=d[w].getPixelForValue(S)-M+t}else i==="center"?v=(f.left+f.right)/2-M+t:v=dc(e,i,t);y=ee(n,r,s),m=i==="left"?-Nt:Nt}return{titleX:v,titleY:y,maxWidth:_,rotation:m}}class Yi extends ci{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=ve(t,Number.POSITIVE_INFINITY),i=ve(i,Number.NEGATIVE_INFINITY),n=ve(n,Number.POSITIVE_INFINITY),s=ve(s,Number.NEGATIVE_INFINITY),{min:ve(t,n),max:ve(i,s),minDefined:Rt(t),maxDefined:Rt(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:i,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,f=l.length;c<f;++c)r=l[c].controller.getMinMax(this,t),s||(i=Math.min(i,r.min)),o||(n=Math.max(n,r.max));return i=o&&i>n?n:i,n=s&&i>n?i:n,{min:ve(i,ve(n,i)),max:ve(n,ve(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Tt(this.options.beforeUpdate,[this])}update(t,i,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,l=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jy(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?mc(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Mb(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Tt(this.options.afterUpdate,[this])}beforeSetDimensions(){Tt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Tt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Tt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Tt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const i=this.options.ticks;let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n],o.label=Tt(i.callback,[o.value,n,t],this)}afterTickToLabelConversion(){Tt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Tt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,i=t.ticks,n=gc(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,o=i.maxRotation;let r=s,l,c,f;if(!this._isVisible()||!i.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),m=d.widest.width,_=d.highest.height,v=Ut(this.chart.width-m,0,this.maxWidth);l=t.offset?this.maxWidth/n:v/(n-1),m+6>l&&(l=v/(n-(t.offset?.5:1)),c=this.maxHeight-Kn(t.grid)-i.padding-pc(t.title,this.chart.options.font),f=Math.sqrt(m*m+_*_),r=Ar(Math.min(Math.asin(Ut((d.highest.height+6)/l,-1,1)),Math.asin(Ut(c/f,-1,1))-Math.asin(Ut(_/f,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Tt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Tt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),l=this.isHorizontal();if(r){const c=pc(s,i.options.font);if(l?(t.width=this.maxWidth,t.height=Kn(o)+c):(t.height=this.maxHeight,t.width=Kn(o)+c),n.display&&this.ticks.length){const{first:f,last:d,widest:m,highest:_}=this._getLabelSizes(),v=n.padding*2,y=ze(this.labelRotation),b=Math.cos(y),M=Math.sin(y);if(l){const w=n.mirror?0:M*m.width+b*_.height;t.height=Math.min(this.maxHeight,t.height+w+v)}else{const w=n.mirror?0:b*m.width+M*_.height;t.width=Math.min(this.maxWidth,t.width+w+v)}this._calculatePadding(f,d,M,b)}}this._handleMargins(),l?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){const{ticks:{align:o,padding:r},position:l}=this.options,c=this.labelRotation!==0,f=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,v=0;c?f?(_=s*t.width,v=n*i.height):(_=n*t.height,v=s*i.width):o==="start"?v=i.width:o==="end"?_=t.width:o!=="inner"&&(_=t.width/2,v=i.width/2),this.paddingLeft=Math.max((_-d+r)*this.width/(this.width-d),0),this.paddingRight=Math.max((v-m+r)*this.width/(this.width-m),0)}else{let d=i.height/2,m=t.height/2;o==="start"?(d=0,m=t.height):o==="end"&&(d=i.height,m=0),this.paddingTop=d+r,this.paddingBottom=m+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Tt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)vt(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=mc(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){const{ctx:s,_longestTextCache:o}=this,r=[],l=[],c=Math.floor(i/gc(i,n));let f=0,d=0,m,_,v,y,b,M,w,S,k,E,T;for(m=0;m<i;m+=c){if(y=t[m].label,b=this._resolveTickFontOptions(m),s.font=M=b.string,w=o[M]=o[M]||{data:{},gc:[]},S=b.lineHeight,k=E=0,!vt(y)&&!Et(y))k=qa(s,w.data,w.gc,k,y),E=S;else if(Et(y))for(_=0,v=y.length;_<v;++_)T=y[_],!vt(T)&&!Et(T)&&(k=qa(s,w.data,w.gc,k,T),E+=S);r.push(k),l.push(E),f=Math.max(k,f),d=Math.max(E,d)}Eb(o,i);const O=r.indexOf(f),I=l.indexOf(d),z=W=>({width:r[W]||0,height:l[W]||0});return{first:z(0),last:z(i-1),widest:z(O),highest:z(I),widths:r,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const i=this._startPixel+t*this._length;return vy(this._alignToPixels?zi(this.chart,i,0):i)}getDecimalForPixel(t){const i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){const i=this.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=Ob(this.getContext(),t,n))}return this.$context||(this.$context=Ab(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,i=ze(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,l=o?o.widest.width+r:0,c=o?o.highest.height+r:0;return this.isHorizontal()?c*n>l*s?l/n:c/s:c*s<l*n?c/n:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const i=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:l}=s,c=o.offset,f=this.isHorizontal(),m=this.ticks.length+(c?1:0),_=Kn(o),v=[],y=l.setContext(this.getContext()),b=y.display?y.width:0,M=b/2,w=function(X){return zi(n,X,b)};let S,k,E,T,O,I,z,W,Z,j,Y,it;if(r==="top")S=w(this.bottom),I=this.bottom-_,W=S-M,j=w(t.top)+M,it=t.bottom;else if(r==="bottom")S=w(this.top),j=t.top,it=w(t.bottom)-M,I=S+M,W=this.top+_;else if(r==="left")S=w(this.right),O=this.right-_,z=S-M,Z=w(t.left)+M,Y=t.right;else if(r==="right")S=w(this.left),Z=t.left,Y=w(t.right)-M,O=S+M,z=this.left+_;else if(i==="x"){if(r==="center")S=w((t.top+t.bottom)/2+.5);else if(gt(r)){const X=Object.keys(r)[0],st=r[X];S=w(this.chart.scales[X].getPixelForValue(st))}j=t.top,it=t.bottom,I=S+M,W=I+_}else if(i==="y"){if(r==="center")S=w((t.left+t.right)/2);else if(gt(r)){const X=Object.keys(r)[0],st=r[X];S=w(this.chart.scales[X].getPixelForValue(st))}O=S-M,z=O-_,Z=t.left,Y=t.right}const H=lt(s.ticks.maxTicksLimit,m),$=Math.max(1,Math.ceil(m/H));for(k=0;k<m;k+=$){const X=this.getContext(k),st=o.setContext(X),N=l.setContext(X),ft=st.lineWidth,D=st.color,B=N.dash||[],q=N.dashOffset,J=st.tickWidth,at=st.tickColor,Q=st.tickBorderDash||[],nt=st.tickBorderDashOffset;E=Cb(this,k,c),E!==void 0&&(T=zi(n,E,ft),f?O=z=Z=Y=T:I=W=j=it=T,v.push({tx1:O,ty1:I,tx2:z,ty2:W,x1:Z,y1:j,x2:Y,y2:it,width:ft,color:D,borderDash:B,borderDashOffset:q,tickWidth:J,tickColor:at,tickBorderDash:Q,tickBorderDashOffset:nt}))}return this._ticksLength=m,this._borderValue=S,v}_computeLabelItems(t){const i=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:f,padding:d,mirror:m}=o,_=Kn(n.grid),v=_+d,y=m?-d:v,b=-ze(this.labelRotation),M=[];let w,S,k,E,T,O,I,z,W,Z,j,Y,it="middle";if(s==="top")O=this.bottom-y,I=this._getXAxisLabelAlignment();else if(s==="bottom")O=this.top+y,I=this._getXAxisLabelAlignment();else if(s==="left"){const $=this._getYAxisLabelAlignment(_);I=$.textAlign,T=$.x}else if(s==="right"){const $=this._getYAxisLabelAlignment(_);I=$.textAlign,T=$.x}else if(i==="x"){if(s==="center")O=(t.top+t.bottom)/2+v;else if(gt(s)){const $=Object.keys(s)[0],X=s[$];O=this.chart.scales[$].getPixelForValue(X)+v}I=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")T=(t.left+t.right)/2-v;else if(gt(s)){const $=Object.keys(s)[0],X=s[$];T=this.chart.scales[$].getPixelForValue(X)}I=this._getYAxisLabelAlignment(_).textAlign}i==="y"&&(c==="start"?it="top":c==="end"&&(it="bottom"));const H=this._getLabelSizes();for(w=0,S=l.length;w<S;++w){k=l[w],E=k.label;const $=o.setContext(this.getContext(w));z=this.getPixelForTick(w)+o.labelOffset,W=this._resolveTickFontOptions(w),Z=W.lineHeight,j=Et(E)?E.length:1;const X=j/2,st=$.color,N=$.textStrokeColor,ft=$.textStrokeWidth;let D=I;r?(T=z,I==="inner"&&(w===S-1?D=this.options.reverse?"left":"right":w===0?D=this.options.reverse?"right":"left":D="center"),s==="top"?f==="near"||b!==0?Y=-j*Z+Z/2:f==="center"?Y=-H.highest.height/2-X*Z+Z:Y=-H.highest.height+Z/2:f==="near"||b!==0?Y=Z/2:f==="center"?Y=H.highest.height/2-X*Z:Y=H.highest.height-j*Z,m&&(Y*=-1),b!==0&&!$.showLabelBackdrop&&(T+=Z/2*Math.sin(b))):(O=z,Y=(1-j)*Z/2);let B;if($.showLabelBackdrop){const q=ae($.backdropPadding),J=H.heights[w],at=H.widths[w];let Q=Y-q.top,nt=0-q.left;switch(it){case"middle":Q-=J/2;break;case"bottom":Q-=J;break}switch(I){case"center":nt-=at/2;break;case"right":nt-=at;break}B={left:nt,top:Q,width:at+q.width,height:J+q.height,color:$.backdropColor}}M.push({label:E,font:W,textOffset:Y,options:{rotation:b,color:st,strokeColor:N,strokeWidth:ft,textAlign:D,textBaseline:it,translation:[T,O],backdrop:B}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:i}=this.options;if(-ze(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:i,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),l=t+o,c=r.widest.width;let f,d;return i==="left"?s?(d=this.right+o,n==="near"?f="left":n==="center"?(f="center",d+=c/2):(f="right",d+=c)):(d=this.right-l,n==="near"?f="right":n==="center"?(f="center",d-=c/2):(f="left",d=this.left)):i==="right"?s?(d=this.left+o,n==="near"?f="right":n==="center"?(f="center",d-=c/2):(f="left",d-=c)):(d=this.left+l,n==="near"?f="left":n==="center"?(f="center",d+=c/2):(f="right",d=this.right)):f="right",{textAlign:f,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:i},left:n,top:s,width:o,height:r}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,o,r),t.restore())}getLineWidthForValue(t){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const l=(c,f,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(f.x,f.y),n.stroke(),n.restore())};if(i.display)for(o=0,r=s.length;o<r;++o){const c=s[o];i.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),i.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:i,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let f,d,m,_;this.isHorizontal()?(f=zi(t,this.left,r)-r/2,d=zi(t,this.right,l)+l/2,m=_=c):(m=zi(t,this.top,r)-r/2,_=zi(t,this.bottom,l)+l/2,f=d=c),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(f,m),i.lineTo(d,_),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&io(n,s);const o=this.getLabelItems(t);for(const r of o){const l=r.options,c=r.font,f=r.label,d=r.textOffset;$i(n,f,0,d,c,l)}s&&no(n)}drawTitle(){const{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;const o=$t(n.font),r=ae(n.padding),l=n.align;let c=o.lineHeight/2;i==="bottom"||i==="center"||gt(i)?(c+=r.bottom,Et(n.text)&&(c+=o.lineHeight*(n.text.length-1))):c+=r.top;const{titleX:f,titleY:d,maxWidth:m,rotation:_}=zb(this,c,i,l);$i(t,n.text,0,0,o,{color:n.color,maxWidth:m,rotation:_,textAlign:Ib(l,i,s),textBaseline:"middle",translation:[f,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,i=t.ticks&&t.ticks.z||0,n=lt(t.grid&&t.grid.z,-1),s=lt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Yi.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=i.length;o<r;++o){const l=i[o];l[n]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const i=this.options.ticks.setContext(this.getContext(t));return $t(i.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _a{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const i=Object.getPrototypeOf(t);let n;Nb(i)&&(n=this.register(i));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,Db(t,r,n),this.override&&Ht.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in Ht[s]&&(delete Ht[s][n],this.override&&delete Vi[n])}}function Db(e,t,i){const n=Ss(Object.create(null),[i?Ht.get(i):{},Ht.get(t),e.defaults]);Ht.set(t,n),e.defaultRoutes&&Rb(t,e.defaultRoutes),e.descriptors&&Ht.describe(t,e.descriptors)}function Rb(e,t){Object.keys(t).forEach(i=>{const n=i.split("."),s=n.pop(),o=[e].concat(n).join("."),r=t[i].split("."),l=r.pop(),c=r.join(".");Ht.route(o,s,c,l)})}function Nb(e){return"id"in e&&"defaults"in e}class Bb{constructor(){this.controllers=new _a(Re,"datasets",!0),this.elements=new _a(ci,"elements"),this.plugins=new _a(Object,"plugins"),this.scales=new _a(Yi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):Pt(s,r=>{const l=n||this._getRegistryForType(r);this._exec(t,l,r)})})}_exec(t,i,n){const s=Er(t);Tt(n["before"+s],[],n),i[t](n),Tt(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){const s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var Ze=new Bb;class Fb{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,i,n);return i==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,i,n,s){s=s||{};for(const o of t){const r=o.plugin,l=r[n],c=[i,s,o.options];if(Tt(l,c,r)===!1&&s.cancelable)return!1}return!0}invalidate(){vt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){const n=t&&t.config,s=lt(n.options&&n.options.plugins,{}),o=Wb(n);return s===!1&&!i?[]:Zb(t,o,s,i)}_notifyStateChanges(t){const i=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(l=>!r.some(c=>l.plugin.id===c.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}}function Wb(e){const t={},i=[],n=Object.keys(Ze.plugins.items);for(let o=0;o<n.length;o++)i.push(Ze.getPlugin(n[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];i.indexOf(r)===-1&&(i.push(r),t[r.id]=!0)}return{plugins:i,localIds:t}}function Hb(e,t){return!t&&e===!1?null:e===!0?{}:e}function Zb(e,{plugins:t,localIds:i},n,s){const o=[],r=e.getContext();for(const l of t){const c=l.id,f=Hb(n[c],s);f!==null&&o.push({plugin:l,options:jb(e.config,{plugin:l,local:i[c]},f,r)})}return o}function jb(e,{plugin:t,local:i},n,s){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return i&&t.defaults&&r.push(t.defaults),e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ur(e,t){const i=Ht.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Gb(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function Vb(e,t){return e===t?"_index_":"_value_"}function $b(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Xa(e,t){if(e==="x"||e==="y"||e==="r"||(e=t.axis||$b(t.position)||e.length>1&&Xa(e[0].toLowerCase(),t),e))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function qb(e,t){const i=Vi[e.type]||{scales:{}},n=t.scales||{},s=ur(e.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const l=n[r];if(!gt(l))return console.error(`Invalid scale configuration for scale: ${r}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const c=Xa(r,l),f=Vb(c,s),d=i.scales||{};o[r]=fs(Object.create(null),[{axis:c},l,d[c],d[f]])}),e.data.datasets.forEach(r=>{const l=r.type||e.type,c=r.indexAxis||ur(l,t),d=(Vi[l]||{}).scales||{};Object.keys(d).forEach(m=>{const _=Gb(m,c),v=r[_+"AxisID"]||_;o[v]=o[v]||Object.create(null),fs(o[v],[{axis:_},n[v],d[m]])})}),Object.keys(o).forEach(r=>{const l=o[r];fs(l,[Ht.scales[l.type],Ht.scale])}),o}function df(e){const t=e.options||(e.options={});t.plugins=lt(t.plugins,{}),t.scales=qb(e,t)}function gf(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Ub(e){return e=e||{},e.data=gf(e.data),df(e),e}const _c=new Map,mf=new Set;function va(e,t){let i=_c.get(e);return i||(i=t(),_c.set(e,i),mf.add(i)),i}const Jn=(e,t,i)=>{const n=Mi(t,i);n!==void 0&&e.add(n)};class Yb{constructor(t){this._config=Ub(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=gf(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),df(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return va(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return va(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return va(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){const i=t.id,n=this.type;return va(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){const n=this._scopeCache;let s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){const{options:s,type:o}=this,r=this._cachedScopes(t,n),l=r.get(i);if(l)return l;const c=new Set;i.forEach(d=>{t&&(c.add(t),d.forEach(m=>Jn(c,t,m))),d.forEach(m=>Jn(c,s,m)),d.forEach(m=>Jn(c,Vi[o]||{},m)),d.forEach(m=>Jn(c,Ht,m)),d.forEach(m=>Jn(c,hr,m))});const f=Array.from(c);return f.length===0&&f.push(Object.create(null)),mf.has(i)&&r.set(i,f),f}chartOptionScopes(){const{options:t,type:i}=this;return[t,Vi[i]||{},Ht.datasets[i]||{},{type:i},Ht,hr]}resolveNamedOptions(t,i,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:l}=vc(this._resolverCache,t,s);let c=r;if(Kb(r,i)){o.$shared=!1,n=wi(n)?n():n;const f=this.createResolver(t,n,l);c=Cn(r,n,f)}for(const f of i)o[f]=c[f];return o}createResolver(t,i,n=[""],s){const{resolver:o}=vc(this._resolverCache,t,n);return gt(i)?Cn(o,i,void 0,s):o}}function vc(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));const s=i.join();let o=n.get(s);return o||(o={resolver:Dr(t,i),subPrefixes:i.filter(l=>!l.toLowerCase().includes("hover"))},n.set(s,o)),o}const Xb=e=>gt(e)&&Object.getOwnPropertyNames(e).reduce((t,i)=>t||wi(e[i]),!1);function Kb(e,t){const{isScriptable:i,isIndexable:n}=$u(e);for(const s of t){const o=i(s),r=n(s),l=(r||o)&&e[s];if(o&&(wi(l)||Xb(l))||r&&Et(l))return!0}return!1}var Jb="4.2.1";const Qb=["top","bottom","left","right","chartArea"];function yc(e,t){return e==="top"||e==="bottom"||Qb.indexOf(e)===-1&&t==="x"}function xc(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function bc(e){const t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Tt(i&&i.onComplete,[e],t)}function t1(e){const t=e.chart,i=t.options.animation;Tt(i&&i.onProgress,[e],t)}function pf(e){return Ju()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const za={},Mc=e=>{const t=pf(e);return Object.values(za).filter(i=>i.canvas===t).pop()};function e1(e,t,i){const n=Object.keys(e);for(const s of n){const o=+s;if(o>=t){const r=e[s];delete e[s],(i>0||o>t)&&(e[o+i]=r)}}}function i1(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function n1(e){const{xScale:t,yScale:i}=e;if(t&&i)return{left:t.left,right:t.right,top:i.top,bottom:i.bottom}}class ai{static register(...t){Ze.add(...t),wc()}static unregister(...t){Ze.remove(...t),wc()}constructor(t,i){const n=this.config=new Yb(i),s=pf(t),o=Mc(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||bb(s)),this.platform.updateConfig(n);const l=this.platform.acquireContext(s,r.aspectRatio),c=l&&l.canvas,f=c&&c.height,d=c&&c.width;if(this.id=oy(),this.ctx=l,this.canvas=c,this.width=d,this.height=f,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Fb,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=My(m=>this.update(m),r.resizeDelay||0),this._dataChanges=[],za[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ii.listen(this,"complete",bc),ii.listen(this,"progress",t1),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:i},width:n,height:s,_aspectRatio:o}=this;return vt(t)?i&&o?o:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ze}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$l(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jl(this.canvas,this.ctx),this}stop(){return ii.stop(this),this}resize(t,i){ii.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,i,o),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,$l(this,l,!0)&&(this.notifyPlugins("resize",{size:r}),Tt(n.onResize,[this,r],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Pt(i,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,i=t.scales,n=this.scales,s=Object.keys(n).reduce((r,l)=>(r[l]=!1,r),{});let o=[];i&&(o=o.concat(Object.keys(i).map(r=>{const l=i[r],c=Xa(r,l),f=c==="r",d=c==="x";return{options:l,dposition:f?"chartArea":d?"bottom":"left",dtype:f?"radialLinear":d?"category":"linear"}}))),Pt(o,r=>{const l=r.options,c=l.id,f=Xa(c,l),d=lt(l.type,r.dtype);(l.position===void 0||yc(l.position,f)!==yc(r.dposition))&&(l.position=r.dposition),s[c]=!0;let m=null;if(c in n&&n[c].type===d)m=n[c];else{const _=Ze.getScale(d);m=new _({id:c,type:d,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(l,t)}),Pt(s,(r,l)=>{r||delete n[l]}),Pt(n,r=>{se.configure(this,r,r.options),se.addBox(this,r)})}_updateMetasets(){const t=this._metasets,i=this.data.datasets.length,n=t.length;if(t.sort((s,o)=>s.index-o.index),n>i){for(let s=i;s<n;++s)this._destroyDatasetMeta(s);t.splice(i,n-i)}this._sortedMetasets=t.slice(0).sort(xc("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((n,s)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],i=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=i.length;n<s;n++){const o=i[n];let r=this.getDatasetMeta(n);const l=o.type||this.config.type;if(r.type&&r.type!==l&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=l,r.indexAxis=o.indexAxis||ur(l,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const c=Ze.getController(l),{datasetElementType:f,dataElementType:d}=Ht.datasets[l];Object.assign(c,{dataElementType:Ze.getElement(d),datasetElementType:f&&Ze.getElement(f)}),r.controller=new c(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){Pt(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let f=0,d=this.data.datasets.length;f<d;f++){const{controller:m}=this.getDatasetMeta(f),_=!s&&o.indexOf(m)===-1;m.buildOrUpdateElements(_),r=Math.max(+m.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||Pt(o,f=>{f.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xc("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Pt(this.scales,t=>{se.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!zl(i,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of i){const r=n==="_removeElements"?-o:o;e1(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,l)=>l+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<i;o++)if(!zl(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;se.update(this,this.width,this.height,t);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Pt(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,wi(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ii.has(this)?this.attached&&!ii.running(this)&&ii.start(this):(this.draw(),bc({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resize(n,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const i=this._sortedMetasets,n=[];let s,o;for(s=0,o=i.length;s<o;++s){const r=i[s];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const i=this.ctx,n=t._clip,s=!n.disabled,o=n1(t)||this.chartArea,r={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&io(i,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),t.controller.draw(),s&&no(i),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Ls(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,n,s){const o=tb.modes[i];return typeof o=="function"?o(this,t,n,s):[]}getDatasetMeta(t){const i=this.data.datasets[t],n=this._metasets;let s=n.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=Si(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const i=this.data.datasets[t];if(!i)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(t,i){const n=this.getDatasetMeta(t);n.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,n){const s=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);Te(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){const i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),ii.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),jl(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete za[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,i=this.platform,n=(o,r)=>{i.addEventListener(this,o,r),t[o]=r},s=(o,r,l)=>{o.offsetX=r,o.offsetY=l,this._eventHandler(o)};Pt(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,i=this.platform,n=(c,f)=>{i.addEventListener(this,c,f),t[c]=f},s=(c,f)=>{t[c]&&(i.removeEventListener(this,c,f),delete t[c])},o=(c,f)=>{this.canvas&&this.resize(c,f)};let r;const l=()=>{s("attach",l),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",l)},i.isAttached(this.canvas)?l():r()}unbindEvents(){Pt(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Pt(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,n){const s=n?"set":"remove";let o,r,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){r=t[l];const f=r&&this.getDatasetMeta(r.datasetIndex).controller;f&&f[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const i=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[r],index:r}});!Ga(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(t,i,n){return this._plugins.notify(this,t,i,n)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,n){const s=this.options.hover,o=(c,f)=>c.filter(d=>!f.some(m=>d.datasetIndex===m.datasetIndex&&d.index===m.index)),r=o(i,t),l=n?t:o(t,i);r.length&&this.updateHoverStyle(r,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,i){const n={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(t,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(t,i,n){const{_active:s=[],options:o}=this,r=i,l=this._getActiveElements(t,s,n,r),c=fy(t),f=i1(t,this._lastEvent,n,c);n&&(this._lastEvent=null,Tt(o.onHover,[t,l,this],this),c&&Tt(o.onClick,[t,l,this],this));const d=!Ga(l,s);return(d||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=f,d}_getActiveElements(t,i,n,s){if(t.type==="mouseout")return[];if(!n)return i;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}K(ai,"defaults",Ht),K(ai,"instances",za),K(ai,"overrides",Vi),K(ai,"registry",Ze),K(ai,"version",Jb),K(ai,"getChart",Mc);function wc(){return Pt(ai.instances,e=>e._plugins.invalidate())}function s1(e,t,i){const{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:l,innerRadius:c}=t;let f=s/l;e.beginPath(),e.arc(o,r,l,n-f,i+f),c>s?(f=s/c,e.arc(o,r,c,i+f,n-f,!0)):e.arc(o,r,s,i+Nt,n-Nt),e.closePath(),e.clip()}function a1(e){return zr(e,["outerStart","outerEnd","innerStart","innerEnd"])}function o1(e,t,i,n){const s=a1(e.options.borderRadius),o=(i-t)/2,r=Math.min(o,n*t/2),l=c=>{const f=(i-Math.min(o,c))*n/2;return Ut(c,0,Math.min(o,f))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:Ut(s.innerStart,0,r),innerEnd:Ut(s.innerEnd,0,r)}}function ln(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Ka(e,t,i,n,s,o){const{x:r,y:l,startAngle:c,pixelMargin:f,innerRadius:d}=t,m=Math.max(t.outerRadius+n+i-f,0),_=d>0?d+n+i+f:0;let v=0;const y=s-c;if(n){const $=d>0?d-n:0,X=m>0?m-n:0,st=($+X)/2,N=st!==0?y*st/(st+n):y;v=(y-N)/2}const b=Math.max(.001,y*m-i/Ot)/m,M=(y-b)/2,w=c+M+v,S=s-M-v,{outerStart:k,outerEnd:E,innerStart:T,innerEnd:O}=o1(t,_,m,S-w),I=m-k,z=m-E,W=w+k/I,Z=S-E/z,j=_+T,Y=_+O,it=w+T/j,H=S-O/Y;if(e.beginPath(),o){const $=(W+Z)/2;if(e.arc(r,l,m,W,$),e.arc(r,l,m,$,Z),E>0){const ft=ln(z,Z,r,l);e.arc(ft.x,ft.y,E,Z,S+Nt)}const X=ln(Y,S,r,l);if(e.lineTo(X.x,X.y),O>0){const ft=ln(Y,H,r,l);e.arc(ft.x,ft.y,O,S+Nt,H+Math.PI)}const st=(S-O/_+(w+T/_))/2;if(e.arc(r,l,_,S-O/_,st,!0),e.arc(r,l,_,st,w+T/_,!0),T>0){const ft=ln(j,it,r,l);e.arc(ft.x,ft.y,T,it+Math.PI,w-Nt)}const N=ln(I,w,r,l);if(e.lineTo(N.x,N.y),k>0){const ft=ln(I,W,r,l);e.arc(ft.x,ft.y,k,w-Nt,W)}}else{e.moveTo(r,l);const $=Math.cos(W)*m+r,X=Math.sin(W)*m+l;e.lineTo($,X);const st=Math.cos(Z)*m+r,N=Math.sin(Z)*m+l;e.lineTo(st,N)}e.closePath()}function r1(e,t,i,n,s){const{fullCircles:o,startAngle:r,circumference:l}=t;let c=t.endAngle;if(o){Ka(e,t,i,n,c,s);for(let f=0;f<o;++f)e.fill();isNaN(l)||(c=r+(l%At||At))}return Ka(e,t,i,n,c,s),e.fill(),c}function h1(e,t,i,n,s){const{fullCircles:o,startAngle:r,circumference:l,options:c}=t,{borderWidth:f,borderJoinStyle:d}=c,m=c.borderAlign==="inner";if(!f)return;m?(e.lineWidth=f*2,e.lineJoin=d||"round"):(e.lineWidth=f,e.lineJoin=d||"bevel");let _=t.endAngle;if(o){Ka(e,t,i,n,_,s);for(let v=0;v<o;++v)e.stroke();isNaN(l)||(_=r+(l%At||At))}m&&s1(e,t,_),o||(Ka(e,t,i,n,_,s),e.stroke())}class Da extends ci{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,n){const s=this.getProps(["x","y"],n),{angle:o,distance:r}=Du(s,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:f,outerRadius:d,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),_=this.options.spacing/2,y=lt(m,c-l)>=At||ks(o,l,c),b=ri(r,f+_,d+_);return y&&b}getCenterPoint(t){const{x:i,y:n,startAngle:s,endAngle:o,innerRadius:r,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:f}=this.options,d=(s+o)/2,m=(r+l+f+c)/2;return{x:i+Math.cos(d)*m,y:n+Math.sin(d)*m}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:n}=this,s=(i.offset||0)/4,o=(i.spacing||0)/2,r=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>At?Math.floor(n/At):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Ot,n||0)),f=s*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,r1(t,this,f,o,r),h1(t,this,f,o,r),t.restore()}}K(Da,"id","arc"),K(Da,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),K(Da,"defaultRoutes",{backgroundColor:"backgroundColor"});function _f(e,t,i=t){e.lineCap=lt(i.borderCapStyle,t.borderCapStyle),e.setLineDash(lt(i.borderDash,t.borderDash)),e.lineDashOffset=lt(i.borderDashOffset,t.borderDashOffset),e.lineJoin=lt(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=lt(i.borderWidth,t.borderWidth),e.strokeStyle=lt(i.borderColor,t.borderColor)}function l1(e,t,i){e.lineTo(i.x,i.y)}function c1(e){return e.stepped?zy:e.tension||e.cubicInterpolationMode==="monotone"?Dy:l1}function vf(e,t,i={}){const n=e.length,{start:s=0,end:o=n-1}=i,{start:r,end:l}=t,c=Math.max(s,r),f=Math.min(o,l),d=s<r&&o<r||s>l&&o>l;return{count:n,start:c,loop:t.loop,ilen:f<c&&!d?n+f-c:f-c}}function u1(e,t,i,n){const{points:s,options:o}=t,{count:r,start:l,loop:c,ilen:f}=vf(s,i,n),d=c1(o);let{move:m=!0,reverse:_}=n||{},v,y,b;for(v=0;v<=f;++v)y=s[(l+(_?f-v:v))%r],!y.skip&&(m?(e.moveTo(y.x,y.y),m=!1):d(e,b,y,_,o.stepped),b=y);return c&&(y=s[(l+(_?f:0))%r],d(e,b,y,_,o.stepped)),!!c}function f1(e,t,i,n){const s=t.points,{count:o,start:r,ilen:l}=vf(s,i,n),{move:c=!0,reverse:f}=n||{};let d=0,m=0,_,v,y,b,M,w;const S=E=>(r+(f?l-E:E))%o,k=()=>{b!==M&&(e.lineTo(d,M),e.lineTo(d,b),e.lineTo(d,w))};for(c&&(v=s[S(0)],e.moveTo(v.x,v.y)),_=0;_<=l;++_){if(v=s[S(_)],v.skip)continue;const E=v.x,T=v.y,O=E|0;O===y?(T<b?b=T:T>M&&(M=T),d=(m*d+E)/++m):(k(),e.lineTo(E,T),y=O,m=0,b=M=T),w=T}k()}function fr(e){const t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?f1:u1}function d1(e){return e.stepped?dx:e.tension||e.cubicInterpolationMode==="monotone"?gx:Bi}function g1(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),_f(e,t.options),e.stroke(s)}function m1(e,t,i,n){const{segments:s,options:o}=t,r=fr(t);for(const l of s)_f(e,o,l.style),e.beginPath(),r(e,t,l,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}const p1=typeof Path2D=="function";function _1(e,t,i,n){p1&&!t.options.segment?g1(e,t,i,n):m1(e,t,i,n)}class pi extends ci{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;ax(this._points,n,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xx(this,this.options.segment))}first(){const t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){const t=this.segments,i=this.points,n=t.length;return n&&i[t[n-1].end]}interpolate(t,i){const n=this.options,s=t[i],o=this.points,r=sf(this,{property:i,start:s,end:s});if(!r.length)return;const l=[],c=d1(n);let f,d;for(f=0,d=r.length;f<d;++f){const{start:m,end:_}=r[f],v=o[m],y=o[_];if(v===y){l.push(v);continue}const b=Math.abs((s-v[i])/(y[i]-v[i])),M=c(v,y,b,n.stepped);M[i]=t[i],l.push(M)}return l.length===1?l[0]:l}pathSegment(t,i,n){return fr(this)(t,this,i,n)}path(t,i,n){const s=this.segments,o=fr(this);let r=this._loop;i=i||0,n=n||this.points.length-i;for(const l of s)r&=o(t,this,l,{start:i,end:i+n-1});return!!r}draw(t,i,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),_1(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}K(pi,"id","line"),K(pi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),K(pi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),K(pi,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Pc(e,t,i,n){const s=e.options,{[i]:o}=e.getProps([i],n);return Math.abs(t-o)<s.radius+s.hitRadius}class Ra extends ci{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,n){const s=this.options,{x:o,y:r}=this.getProps(["x","y"],n);return Math.pow(t-o,2)+Math.pow(i-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return Pc(this,t,"x",i)}inYRange(t,i){return Pc(this,t,"y",i)}getCenterPoint(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const n=i&&t.borderWidth||0;return(i+n)*2}draw(t,i){const n=this.options;this.skip||n.radius<.1||!Ls(this,i,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,lr(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}K(Ra,"id","point"),K(Ra,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),K(Ra,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function yf(e,t){const{x:i,y:n,base:s,width:o,height:r}=e.getProps(["x","y","base","width","height"],t);let l,c,f,d,m;return e.horizontal?(m=r/2,l=Math.min(i,s),c=Math.max(i,s),f=n-m,d=n+m):(m=o/2,l=i-m,c=i+m,f=Math.min(n,s),d=Math.max(n,s)),{left:l,top:f,right:c,bottom:d}}function _i(e,t,i,n){return e?0:Ut(t,i,n)}function v1(e,t,i){const n=e.options.borderWidth,s=e.borderSkipped,o=Vu(n);return{t:_i(s.top,o.top,0,i),r:_i(s.right,o.right,0,t),b:_i(s.bottom,o.bottom,0,i),l:_i(s.left,o.left,0,t)}}function y1(e,t,i){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,o=Hi(s),r=Math.min(t,i),l=e.borderSkipped,c=n||gt(s);return{topLeft:_i(!c||l.top||l.left,o.topLeft,0,r),topRight:_i(!c||l.top||l.right,o.topRight,0,r),bottomLeft:_i(!c||l.bottom||l.left,o.bottomLeft,0,r),bottomRight:_i(!c||l.bottom||l.right,o.bottomRight,0,r)}}function x1(e){const t=yf(e),i=t.right-t.left,n=t.bottom-t.top,s=v1(e,i/2,n/2),o=y1(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Yo(e,t,i,n){const s=t===null,o=i===null,l=e&&!(s&&o)&&yf(e,n);return l&&(s||ri(t,l.left,l.right))&&(o||ri(i,l.top,l.bottom))}function b1(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function M1(e,t){e.rect(t.x,t.y,t.w,t.h)}function Xo(e,t,i={}){const n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,o=(e.x+e.w!==i.x+i.w?t:0)-n,r=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+o,h:e.h+r,radius:e.radius}}class Na extends ci{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=x1(this),l=b1(r.radius)?Ts:M1;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),l(t,Xo(r,i,o)),t.clip(),l(t,Xo(o,-i,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,Xo(o,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return Yo(this,t,i,n)}inXRange(t,i){return Yo(this,t,null,i)}inYRange(t,i){return Yo(this,null,t,i)}getCenterPoint(t){const{x:i,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(i+s)/2:i,y:o?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}K(Na,"id","bar"),K(Na,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),K(Na,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var w1=Object.freeze({__proto__:null,ArcElement:Da,LineElement:pi,PointElement:Ra,BarElement:Na});const dr=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Sc=dr.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function xf(e){return dr[e%dr.length]}function bf(e){return Sc[e%Sc.length]}function P1(e,t){return e.borderColor=xf(t),e.backgroundColor=bf(t),++t}function S1(e,t){return e.backgroundColor=e.data.map(()=>xf(t++)),t}function k1(e,t){return e.backgroundColor=e.data.map(()=>bf(t++)),t}function L1(e){let t=0;return(i,n)=>{const s=e.getDatasetMeta(n).controller;s instanceof Fi?t=S1(i,t):s instanceof ps?t=k1(i,t):s&&(t=P1(i,t))}}function kc(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function T1(e){return e&&(e.borderColor||e.backgroundColor)}var C1={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;const{data:{datasets:n},options:s}=e.config,{elements:o}=s;if(!i.forceOverride&&(kc(n)||T1(s)||o&&kc(o)))return;const r=L1(e);n.forEach(r)}};function E1(e,t,i,n,s){const o=s.samples||n;if(o>=i)return e.slice(t,t+i);const r=[],l=(i-2)/(o-2);let c=0;const f=t+i-1;let d=t,m,_,v,y,b;for(r[c++]=e[d],m=0;m<o-2;m++){let M=0,w=0,S;const k=Math.floor((m+1)*l)+1+t,E=Math.min(Math.floor((m+2)*l)+1,i)+t,T=E-k;for(S=k;S<E;S++)M+=e[S].x,w+=e[S].y;M/=T,w/=T;const O=Math.floor(m*l)+1+t,I=Math.min(Math.floor((m+1)*l)+1,i)+t,{x:z,y:W}=e[d];for(v=y=-1,S=O;S<I;S++)y=.5*Math.abs((z-M)*(e[S].y-W)-(z-e[S].x)*(w-W)),y>v&&(v=y,_=e[S],b=S);r[c++]=_,d=b}return r[c++]=e[f],r}function A1(e,t,i,n){let s=0,o=0,r,l,c,f,d,m,_,v,y,b;const M=[],w=t+i-1,S=e[t].x,E=e[w].x-S;for(r=t;r<t+i;++r){l=e[r],c=(l.x-S)/E*n,f=l.y;const T=c|0;if(T===d)f<y?(y=f,m=r):f>b&&(b=f,_=r),s=(o*s+l.x)/++o;else{const O=r-1;if(!vt(m)&&!vt(_)){const I=Math.min(m,_),z=Math.max(m,_);I!==v&&I!==O&&M.push({...e[I],x:s}),z!==v&&z!==O&&M.push({...e[z],x:s})}r>0&&O!==v&&M.push(e[O]),M.push(l),d=T,o=0,y=b=f,m=_=v=r}}return M}function Mf(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Lc(e){e.data.datasets.forEach(t=>{Mf(t)})}function O1(e,t){const i=t.length;let n=0,s;const{iScale:o}=e,{min:r,max:l,minDefined:c,maxDefined:f}=o.getUserBounds();return c&&(n=Ut(hi(t,o.axis,r).lo,0,i-1)),f?s=Ut(hi(t,o.axis,l).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var I1={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){Lc(e);return}const n=e.width;e.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:l}=s,c=e.getDatasetMeta(o),f=r||s.data;if(as([l,e.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const d=e.scales[c.xAxisID];if(d.type!=="linear"&&d.type!=="time"||e.options.parsing)return;let{start:m,count:_}=O1(c,f);const v=i.threshold||4*n;if(_<=v){Mf(s);return}vt(r)&&(s._data=f,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let y;switch(i.algorithm){case"lttb":y=E1(f,m,_,n,i);break;case"min-max":y=A1(f,m,_,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=y})},destroy(e){Lc(e)}};function z1(e,t,i){const n=e.segments,s=e.points,o=t.points,r=[];for(const l of n){let{start:c,end:f}=l;f=Wr(c,f,s);const d=gr(i,s[c],s[f],l.loop);if(!t.segments){r.push({source:l,target:d,start:s[c],end:s[f]});continue}const m=sf(t,d);for(const _ of m){const v=gr(i,o[_.start],o[_.end],_.loop),y=nf(l,s,v);for(const b of y)r.push({source:b,target:_,start:{[i]:Tc(d,v,"start",Math.max)},end:{[i]:Tc(d,v,"end",Math.min)}})}}return r}function gr(e,t,i,n){if(n)return;let s=t[e],o=i[e];return e==="angle"&&(s=ye(s),o=ye(o)),{property:e,start:s,end:o}}function D1(e,t){const{x:i=null,y:n=null}=e||{},s=t.points,o=[];return t.segments.forEach(({start:r,end:l})=>{l=Wr(r,l,s);const c=s[r],f=s[l];n!==null?(o.push({x:c.x,y:n}),o.push({x:f.x,y:n})):i!==null&&(o.push({x:i,y:c.y}),o.push({x:i,y:f.y}))}),o}function Wr(e,t,i){for(;t>e;t--){const n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function Tc(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function wf(e,t){let i=[],n=!1;return Et(e)?(n=!0,i=e):i=D1(e,t),i.length?new pi({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Cc(e){return e&&e.fill!==!1}function R1(e,t,i){let s=e[t].fill;const o=[t];let r;if(!i)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!Rt(s))return s;if(r=e[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function N1(e,t,i){const n=H1(e);if(gt(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return Rt(s)&&Math.floor(s)===s?B1(n[0],t,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function B1(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function F1(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:gt(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function W1(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:gt(e)?n=e.value:n=t.getBaseValue(),n}function H1(e){const t=e.options,i=t.fill;let n=lt(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Z1(e){const{scale:t,index:i,line:n}=e,s=[],o=n.segments,r=n.points,l=j1(t,i);l.push(wf({x:null,y:t.bottom},n));for(let c=0;c<o.length;c++){const f=o[c];for(let d=f.start;d<=f.end;d++)G1(s,r[d],l)}return new pi({points:s,options:{}})}function j1(e,t){const i=[],n=e.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const o=n[s];if(o.index===t)break;o.hidden||i.unshift(o.dataset)}return i}function G1(e,t,i){const n=[];for(let s=0;s<i.length;s++){const o=i[s],{first:r,last:l,point:c}=V1(o,t,"x");if(!(!c||r&&l)){if(r)n.unshift(c);else if(e.push(c),!l)break}}e.push(...n)}function V1(e,t,i){const n=e.interpolate(t,i);if(!n)return{};const s=n[i],o=e.segments,r=e.points;let l=!1,c=!1;for(let f=0;f<o.length;f++){const d=o[f],m=r[d.start][i],_=r[d.end][i];if(ri(s,m,_)){l=s===m,c=s===_;break}}return{first:l,last:c,point:n}}class Pf{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){const{x:s,y:o,radius:r}=this;return i=i||{start:0,end:At},t.arc(s,o,r,i.end,i.start,!0),!n.bounds}interpolate(t){const{x:i,y:n,radius:s}=this,o=t.angle;return{x:i+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}}function $1(e){const{chart:t,fill:i,line:n}=e;if(Rt(i))return q1(t,i);if(i==="stack")return Z1(e);if(i==="shape")return!0;const s=U1(e);return s instanceof Pf?s:wf(s,n)}function q1(e,t){const i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function U1(e){return(e.scale||{}).getPointPositionForValue?X1(e):Y1(e)}function Y1(e){const{scale:t={},fill:i}=e,n=F1(i,t);if(Rt(n)){const s=t.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function X1(e){const{scale:t,fill:i}=e,n=t.options,s=t.getLabels().length,o=n.reverse?t.max:t.min,r=W1(i,t,o),l=[];if(n.grid.circular){const c=t.getPointPositionForValue(0,o);return new Pf({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(r)})}for(let c=0;c<s;++c)l.push(t.getPointPositionForValue(c,r));return l}function Ko(e,t,i){const n=$1(t),{line:s,scale:o,axis:r}=t,l=s.options,c=l.fill,f=l.backgroundColor,{above:d=f,below:m=f}=c||{};n&&s.points.length&&(io(e,i),K1(e,{line:s,target:n,above:d,below:m,area:i,scale:o,axis:r}),no(e))}function K1(e,t){const{line:i,target:n,above:s,below:o,area:r,scale:l}=t,c=i._loop?"angle":t.axis;e.save(),c==="x"&&o!==s&&(Ec(e,n,r.top),Ac(e,{line:i,target:n,color:s,scale:l,property:c}),e.restore(),e.save(),Ec(e,n,r.bottom)),Ac(e,{line:i,target:n,color:o,scale:l,property:c}),e.restore()}function Ec(e,t,i){const{segments:n,points:s}=t;let o=!0,r=!1;e.beginPath();for(const l of n){const{start:c,end:f}=l,d=s[c],m=s[Wr(c,f,s)];o?(e.moveTo(d.x,d.y),o=!1):(e.lineTo(d.x,i),e.lineTo(d.x,d.y)),r=!!t.pathSegment(e,l,{move:r}),r?e.closePath():e.lineTo(m.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function Ac(e,t){const{line:i,target:n,property:s,color:o,scale:r}=t,l=z1(i,n,s);for(const{source:c,target:f,start:d,end:m}of l){const{style:{backgroundColor:_=o}={}}=c,v=n!==!0;e.save(),e.fillStyle=_,J1(e,r,v&&gr(s,d,m)),e.beginPath();const y=!!i.pathSegment(e,c);let b;if(v){y?e.closePath():Oc(e,n,m,s);const M=!!n.pathSegment(e,f,{move:y,reverse:!0});b=y&&M,b||Oc(e,n,d,s)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function J1(e,t,i){const{top:n,bottom:s}=t.chart.chartArea,{property:o,start:r,end:l}=i||{};o==="x"&&(e.beginPath(),e.rect(r,n,l-r,s-n),e.clip())}function Oc(e,t,i,n){const s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}var Q1={id:"filler",afterDatasetsUpdate(e,t,i){const n=(e.data.datasets||[]).length,s=[];let o,r,l,c;for(r=0;r<n;++r)o=e.getDatasetMeta(r),l=o.dataset,c=null,l&&l.options&&l instanceof pi&&(c={visible:e.isDatasetVisible(r),index:r,fill:N1(l,r,n),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:l}),o.$filler=c,s.push(c);for(r=0;r<n;++r)c=s[r],!(!c||c.fill===!1)&&(c.fill=R1(s,r,i.propagate))},beforeDraw(e,t,i){const n=i.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let r=s.length-1;r>=0;--r){const l=s[r].$filler;l&&(l.line.updateControlPoints(o,l.axis),n&&l.fill&&Ko(e.ctx,l,o))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=e.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const o=n[s].$filler;Cc(o)&&Ko(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,t,i){const n=t.meta.$filler;!Cc(n)||i.drawTime!=="beforeDatasetDraw"||Ko(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ic=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},tM=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class zc extends ci{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let i=Tt(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=$t(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Ic(n,o);let f,d;i.font=s.string,this.isHorizontal()?(f=this.maxWidth,d=this._fitRows(r,o,l,c)+10):(d=this.maxHeight,f=this._fitCols(r,s,l,c)+10),this.width=Math.min(f,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],f=this.lineWidths=[0],d=s+l;let m=t;o.textAlign="left",o.textBaseline="middle";let _=-1,v=-d;return this.legendItems.forEach((y,b)=>{const M=n+i/2+o.measureText(y.text).width;(b===0||f[f.length-1]+M+2*l>r)&&(m+=d,f[f.length-(b>0?0:1)]=0,v+=d,_++),c[b]={left:0,top:v,row:_,width:M,height:s},f[f.length-1]+=M+l}),m}_fitCols(t,i,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],f=this.columnSizes=[],d=r-t;let m=l,_=0,v=0,y=0,b=0;return this.legendItems.forEach((M,w)=>{const{itemWidth:S,itemHeight:k}=eM(n,i,o,M,s);w>0&&v+k+2*l>d&&(m+=_+l,f.push({width:_,height:v}),y+=_+l,b++,_=v=0),c[w]={left:y,top:v,col:b,width:S,height:k},_=Math.max(_,S),v+=k+l}),m+=_,f.push({width:_,height:v}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:o}}=this,r=Pn(o,this.left,this.width);if(this.isHorizontal()){let l=0,c=ee(n,this.left+s,this.right-this.lineWidths[l]);for(const f of i)l!==f.row&&(l=f.row,c=ee(n,this.left+s,this.right-this.lineWidths[l])),f.top+=this.top+t+s,f.left=r.leftForLtr(r.x(c),f.width),c+=f.width+s}else{let l=0,c=ee(n,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const f of i)f.col!==l&&(l=f.col,c=ee(n,this.top+t+s,this.bottom-this.columnSizes[l].height)),f.top=c,f.left+=this.left+s,f.left=r.leftForLtr(r.x(f.left),f.width),c+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;io(t,this),this._draw(),no(t)}}_draw(){const{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:o,labels:r}=t,l=Ht.color,c=Pn(t.rtl,this.left,this.width),f=$t(r.font),{padding:d}=r,m=f.size,_=m/2;let v;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:y,boxHeight:b,itemHeight:M}=Ic(r,m),w=function(O,I,z){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;s.save();const W=lt(z.lineWidth,1);if(s.fillStyle=lt(z.fillStyle,l),s.lineCap=lt(z.lineCap,"butt"),s.lineDashOffset=lt(z.lineDashOffset,0),s.lineJoin=lt(z.lineJoin,"miter"),s.lineWidth=W,s.strokeStyle=lt(z.strokeStyle,l),s.setLineDash(lt(z.lineDash,[])),r.usePointStyle){const Z={radius:b*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:W},j=c.xPlus(O,y/2),Y=I+_;Gu(s,Z,j,Y,r.pointStyleWidth&&y)}else{const Z=I+Math.max((m-b)/2,0),j=c.leftForLtr(O,y),Y=Hi(z.borderRadius);s.beginPath(),Object.values(Y).some(it=>it!==0)?Ts(s,{x:j,y:Z,w:y,h:b,radius:Y}):s.rect(j,Z,y,b),s.fill(),W!==0&&s.stroke()}s.restore()},S=function(O,I,z){$i(s,z.text,O,I+M/2,f,{strikethrough:z.hidden,textAlign:c.textAlign(z.textAlign)})},k=this.isHorizontal(),E=this._computeTitleHeight();k?v={x:ee(o,this.left+d,this.right-n[0]),y:this.top+d+E,line:0}:v={x:this.left+d,y:ee(o,this.top+E+d,this.bottom-i[0].height),line:0},Qu(this.ctx,t.textDirection);const T=M+d;this.legendItems.forEach((O,I)=>{s.strokeStyle=O.fontColor,s.fillStyle=O.fontColor;const z=s.measureText(O.text).width,W=c.textAlign(O.textAlign||(O.textAlign=r.textAlign)),Z=y+_+z;let j=v.x,Y=v.y;c.setWidth(this.width),k?I>0&&j+Z+d>this.right&&(Y=v.y+=T,v.line++,j=v.x=ee(o,this.left+d,this.right-n[v.line])):I>0&&Y+T>this.bottom&&(j=v.x=j+i[v.line].width+d,v.line++,Y=v.y=ee(o,this.top+E+d,this.bottom-i[v.line].height));const it=c.x(j);if(w(it,Y,O),j=wy(W,j+y+_,k?j+Z:this.right,t.rtl),S(c.x(j),Y,O),k)v.x+=Z+d;else if(typeof O.text!="string"){const H=f.lineHeight;v.y+=Sf(O,H)}else v.y+=T}),tf(this.ctx,t.textDirection)}drawTitle(){const t=this.options,i=t.title,n=$t(i.font),s=ae(i.padding);if(!i.display)return;const o=Pn(t.rtl,this.left,this.width),r=this.ctx,l=i.position,c=n.size/2,f=s.top+c;let d,m=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),d=this.top+f,m=ee(t.align,m,this.right-_);else{const y=this.columnSizes.reduce((b,M)=>Math.max(b,M.height),0);d=f+ee(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const v=ee(l,m,m+_);r.textAlign=o.textAlign(Ir(l)),r.textBaseline="middle",r.strokeStyle=i.color,r.fillStyle=i.color,r.font=n.string,$i(r,i.text,v,d,n)}_computeTitleHeight(){const t=this.options.title,i=$t(t.font),n=ae(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,o;if(ri(t,this.left,this.right)&&ri(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],ri(t,s.left,s.left+s.width)&&ri(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const i=this.options;if(!sM(t.type,i))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=tM(s,n);s&&!o&&Tt(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&Tt(i.onHover,[t,n,this],this)}else n&&Tt(i.onClick,[t,n,this],this)}}function eM(e,t,i,n,s){const o=iM(n,e,t,i),r=nM(s,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function iM(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+i.size/2+n.measureText(s).width}function nM(e,t,i){let n=e;return typeof t.text!="string"&&(n=Sf(t,i)),n}function Sf(e,t){const i=e.text?e.text.length+.5:0;return t*i}function sM(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var aM={id:"legend",_element:zc,start(e,t,i){const n=e.legend=new zc({ctx:e.ctx,options:i,chart:e});se.configure(e,n,i),se.addBox(e,n)},stop(e){se.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){const n=e.legend;se.configure(e,n,i),n.options=i},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){const n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const f=c.controller.getStyle(i?0:void 0),d=ae(f.borderWidth);return{text:t[c.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:f.borderColor,pointStyle:n||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:r&&(l||f.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Hr extends ci{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;const s=Et(n.text)?n.text.length:1;this._padding=ae(n.padding);const o=s*$t(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:i,left:n,bottom:s,right:o,options:r}=this,l=r.align;let c=0,f,d,m;return this.isHorizontal()?(d=ee(l,n,o),m=i+t,f=o-n):(r.position==="left"?(d=n+t,m=ee(l,s,i),c=Ot*-.5):(d=o-t,m=ee(l,i,s),c=Ot*.5),f=s-i),{titleX:d,titleY:m,maxWidth:f,rotation:c}}draw(){const t=this.ctx,i=this.options;if(!i.display)return;const n=$t(i.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:l,maxWidth:c,rotation:f}=this._drawArgs(o);$i(t,i.text,0,0,n,{color:i.color,maxWidth:c,rotation:f,textAlign:Ir(i.align),textBaseline:"middle",translation:[r,l]})}}function oM(e,t){const i=new Hr({ctx:e.ctx,options:t,chart:e});se.configure(e,i,t),se.addBox(e,i),e.titleBlock=i}var rM={id:"title",_element:Hr,start(e,t,i){oM(e,i)},stop(e){const t=e.titleBlock;se.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){const n=e.titleBlock;se.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ya=new WeakMap;var hM={id:"subtitle",start(e,t,i){const n=new Hr({ctx:e.ctx,options:i,chart:e});se.configure(e,n,i),se.addBox(e,n),ya.set(e,n)},stop(e){se.removeBox(e,ya.get(e)),ya.delete(e)},beforeUpdate(e,t,i){const n=ya.get(e);se.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rs={average(e){if(!e.length)return!1;let t,i,n=0,s=0,o=0;for(t=0,i=e.length;t<i;++t){const r=e[t].element;if(r&&r.hasValue()){const l=r.tooltipPosition();n+=l.x,s+=l.y,++o}}return{x:n/o,y:s/o}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,o,r,l;for(o=0,r=e.length;o<r;++o){const c=e[o].element;if(c&&c.hasValue()){const f=c.getCenterPoint(),d=rr(t,f);d<s&&(s=d,l=c)}}if(l){const c=l.tooltipPosition();i=c.x,n=c.y}return{x:i,y:n}}};function He(e,t){return t&&(Et(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ni(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function lM(e,t){const{element:i,datasetIndex:n,index:s}=t,o=e.getDatasetMeta(n).controller,{label:r,value:l}=o.getLabelAndValue(s);return{chart:e,label:r,parsed:o.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:l,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function Dc(e,t){const i=e.chart.ctx,{body:n,footer:s,title:o}=e,{boxWidth:r,boxHeight:l}=t,c=$t(t.bodyFont),f=$t(t.titleFont),d=$t(t.footerFont),m=o.length,_=s.length,v=n.length,y=ae(t.padding);let b=y.height,M=0,w=n.reduce((E,T)=>E+T.before.length+T.lines.length+T.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,m&&(b+=m*f.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),w){const E=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=v*E+(w-v)*c.lineHeight+(w-1)*t.bodySpacing}_&&(b+=t.footerMarginTop+_*d.lineHeight+(_-1)*t.footerSpacing);let S=0;const k=function(E){M=Math.max(M,i.measureText(E).width+S)};return i.save(),i.font=f.string,Pt(e.title,k),i.font=c.string,Pt(e.beforeBody.concat(e.afterBody),k),S=t.displayColors?r+2+t.boxPadding:0,Pt(n,E=>{Pt(E.before,k),Pt(E.lines,k),Pt(E.after,k)}),S=0,i.font=d.string,Pt(e.footer,k),i.restore(),M+=y.width,{width:M,height:b}}function cM(e,t){const{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function uM(e,t,i,n){const{x:s,width:o}=n,r=i.caretSize+i.caretPadding;if(e==="left"&&s+o+r>t.width||e==="right"&&s-o-r<0)return!0}function fM(e,t,i,n){const{x:s,width:o}=i,{width:r,chartArea:{left:l,right:c}}=e;let f="center";return n==="center"?f=s<=(l+c)/2?"left":"right":s<=o/2?f="left":s>=r-o/2&&(f="right"),uM(f,e,t,i)&&(f="center"),f}function Rc(e,t,i){const n=i.yAlign||t.yAlign||cM(e,i);return{xAlign:i.xAlign||t.xAlign||fM(e,t,i,n),yAlign:n}}function dM(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function gM(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function Nc(e,t,i,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=e,{xAlign:l,yAlign:c}=i,f=s+o,{topLeft:d,topRight:m,bottomLeft:_,bottomRight:v}=Hi(r);let y=dM(t,l);const b=gM(t,c,f);return c==="center"?l==="left"?y+=f:l==="right"&&(y-=f):l==="left"?y-=Math.max(d,_)+s:l==="right"&&(y+=Math.max(m,v)+s),{x:Ut(y,0,n.width-t.width),y:Ut(b,0,n.height-t.height)}}function xa(e,t,i){const n=ae(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Bc(e){return He([],ni(e))}function mM(e,t,i){return Si(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function Fc(e,t){const i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}const kf={beforeTitle:ei,title(e){if(e.length>0){const t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:ei,beforeBody:ei,beforeLabel:ei,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const i=e.formattedValue;return vt(i)||(t+=i),t},labelColor(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:ei,afterBody:ei,beforeFooter:ei,footer:ei,afterFooter:ei};function fe(e,t,i,n){const s=e[t].call(i,n);return typeof s>"u"?kf[t].call(i,n):s}class mr extends ci{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const i=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&i.options.animation&&n.animations,o=new af(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=mM(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){const{callbacks:n}=i,s=fe(n,"beforeTitle",this,t),o=fe(n,"title",this,t),r=fe(n,"afterTitle",this,t);let l=[];return l=He(l,ni(s)),l=He(l,ni(o)),l=He(l,ni(r)),l}getBeforeBody(t,i){return Bc(fe(i.callbacks,"beforeBody",this,t))}getBody(t,i){const{callbacks:n}=i,s=[];return Pt(t,o=>{const r={before:[],lines:[],after:[]},l=Fc(n,o);He(r.before,ni(fe(l,"beforeLabel",this,o))),He(r.lines,fe(l,"label",this,o)),He(r.after,ni(fe(l,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,i){return Bc(fe(i.callbacks,"afterBody",this,t))}getFooter(t,i){const{callbacks:n}=i,s=fe(n,"beforeFooter",this,t),o=fe(n,"footer",this,t),r=fe(n,"afterFooter",this,t);let l=[];return l=He(l,ni(s)),l=He(l,ni(o)),l=He(l,ni(r)),l}_createItems(t){const i=this._active,n=this.chart.data,s=[],o=[],r=[];let l=[],c,f;for(c=0,f=i.length;c<f;++c)l.push(lM(this.chart,i[c]));return t.filter&&(l=l.filter((d,m,_)=>t.filter(d,m,_,n))),t.itemSort&&(l=l.sort((d,m)=>t.itemSort(d,m,n))),Pt(l,d=>{const m=Fc(t.callbacks,d);s.push(fe(m,"labelColor",this,d)),o.push(fe(m,"labelPointStyle",this,d)),r.push(fe(m,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=l,l}update(t,i){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const l=rs[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const c=this._size=Dc(this,n),f=Object.assign({},l,c),d=Rc(this.chart,n,f),m=Nc(n,f,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,n,s){const o=this.getCaretPosition(t,n,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:l}=n,{topLeft:c,topRight:f,bottomLeft:d,bottomRight:m}=Hi(l),{x:_,y:v}=t,{width:y,height:b}=i;let M,w,S,k,E,T;return o==="center"?(E=v+b/2,s==="left"?(M=_,w=M-r,k=E+r,T=E-r):(M=_+y,w=M+r,k=E-r,T=E+r),S=M):(s==="left"?w=_+Math.max(c,d)+r:s==="right"?w=_+y-Math.max(f,m)-r:w=this.caretX,o==="top"?(k=v,E=k-r,M=w-r,S=w+r):(k=v+b,E=k+r,M=w+r,S=w-r),T=k),{x1:M,x2:w,x3:S,y1:k,y2:E,y3:T}}drawTitle(t,i,n){const s=this.title,o=s.length;let r,l,c;if(o){const f=Pn(n.rtl,this.x,this.width);for(t.x=xa(this,n.titleAlign,n),i.textAlign=f.textAlign(n.titleAlign),i.textBaseline="middle",r=$t(n.titleFont),l=n.titleSpacing,i.fillStyle=n.titleColor,i.font=r.string,c=0;c<o;++c)i.fillText(s[c],f.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+l,c+1===o&&(t.y+=n.titleMarginBottom-l)}}_drawColorBox(t,i,n,s,o){const r=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:f,boxPadding:d}=o,m=$t(o.bodyFont),_=xa(this,"left",o),v=s.x(_),y=c<m.lineHeight?(m.lineHeight-c)/2:0,b=i.y+y;if(o.usePointStyle){const M={radius:Math.min(f,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},w=s.leftForLtr(v,f)+f/2,S=b+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,lr(t,M,w,S),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,lr(t,M,w,S)}else{t.lineWidth=gt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const M=s.leftForLtr(v,f-d),w=s.leftForLtr(s.xPlus(v,1),f-d-2),S=Hi(r.borderRadius);Object.values(S).some(k=>k!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Ts(t,{x:M,y:b,w:f,h:c,radius:S}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),Ts(t,{x:w,y:b+1,w:f-2,h:c-2,radius:S}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(M,b,f,c),t.strokeRect(M,b,f,c),t.fillStyle=r.backgroundColor,t.fillRect(w,b+1,f-2,c-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,i,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:l,boxHeight:c,boxWidth:f,boxPadding:d}=n,m=$t(n.bodyFont);let _=m.lineHeight,v=0;const y=Pn(n.rtl,this.x,this.width),b=function(z){i.fillText(z,y.x(t.x+v),t.y+_/2),t.y+=_+o},M=y.textAlign(r);let w,S,k,E,T,O,I;for(i.textAlign=r,i.textBaseline="middle",i.font=m.string,t.x=xa(this,M,n),i.fillStyle=n.bodyColor,Pt(this.beforeBody,b),v=l&&M!=="right"?r==="center"?f/2+d:f+2+d:0,E=0,O=s.length;E<O;++E){for(w=s[E],S=this.labelTextColors[E],i.fillStyle=S,Pt(w.before,b),k=w.lines,l&&k.length&&(this._drawColorBox(i,t,E,y,n),_=Math.max(m.lineHeight,c)),T=0,I=k.length;T<I;++T)b(k[T]),_=m.lineHeight;Pt(w.after,b)}v=0,_=m.lineHeight,Pt(this.afterBody,b),t.y-=o}drawFooter(t,i,n){const s=this.footer,o=s.length;let r,l;if(o){const c=Pn(n.rtl,this.x,this.width);for(t.x=xa(this,n.footerAlign,n),t.y+=n.footerMarginTop,i.textAlign=c.textAlign(n.footerAlign),i.textBaseline="middle",r=$t(n.footerFont),i.fillStyle=n.footerColor,i.font=r.string,l=0;l<o;++l)i.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,i,n,s){const{xAlign:o,yAlign:r}=this,{x:l,y:c}=t,{width:f,height:d}=n,{topLeft:m,topRight:_,bottomLeft:v,bottomRight:y}=Hi(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+m,c),r==="top"&&this.drawCaret(t,i,n,s),i.lineTo(l+f-_,c),i.quadraticCurveTo(l+f,c,l+f,c+_),r==="center"&&o==="right"&&this.drawCaret(t,i,n,s),i.lineTo(l+f,c+d-y),i.quadraticCurveTo(l+f,c+d,l+f-y,c+d),r==="bottom"&&this.drawCaret(t,i,n,s),i.lineTo(l+v,c+d),i.quadraticCurveTo(l,c+d,l,c+d-v),r==="center"&&o==="left"&&this.drawCaret(t,i,n,s),i.lineTo(l,c+m),i.quadraticCurveTo(l,c,l+m,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){const i=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=rs[t.position].call(this,this._active,this._eventPosition);if(!r)return;const l=this._size=Dc(this,t),c=Object.assign({},r,this._size),f=Rc(i,t,c),d=Nc(t,c,f,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=l.width,this.height=l.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=ae(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,s,i),Qu(t,i.textDirection),o.y+=r.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),tf(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){const n=this._active,s=t.map(({datasetIndex:l,index:c})=>{const f=this.chart.getDatasetMeta(l);if(!f)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:f.data[c],index:c}}),o=!Ga(n,s),r=this._positionChanged(s,i);(o||r)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,i,n),l=this._positionChanged(r,t),c=i||!Ga(r,o)||l;return c&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,n,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return i;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,i){const{caretX:n,caretY:s,options:o}=this,r=rs[o.position].call(this,t,i);return r!==!1&&(n!==r.x||s!==r.y)}}K(mr,"positioners",rs);var pM={id:"tooltip",_element:mr,positioners:rs,afterInit(e,t,i){i&&(e.tooltip=new mr({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){const i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kf},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},_M=Object.freeze({__proto__:null,Colors:C1,Decimation:I1,Filler:Q1,Legend:aM,SubTitle:hM,Title:rM,Tooltip:pM});const vM=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function yM(e,t,i,n){const s=e.indexOf(t);if(s===-1)return vM(e,t,i,n);const o=e.lastIndexOf(t);return s!==o?i:s}const xM=(e,t)=>e===null?null:Ut(Math.round(e),0,t);function Wc(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class pr extends Yi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:s,label:o}of i)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(vt(t))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===t?i:yM(n,t,lt(i,t),this._addedLabels),xM(i,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),i||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,i=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=i;r++)s.push({value:r});return s}getLabelForValue(t){return Wc.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}K(pr,"id","category"),K(pr,"defaults",{ticks:{callback:Wc}});function bM(e,t){const i=[],{bounds:s,step:o,min:r,max:l,precision:c,count:f,maxTicks:d,maxDigits:m,includeBounds:_}=e,v=o||1,y=d-1,{min:b,max:M}=t,w=!vt(r),S=!vt(l),k=!vt(f),E=(M-b)/(m+1);let T=Rl((M-b)/y/v)*v,O,I,z,W;if(T<1e-14&&!w&&!S)return[{value:b},{value:M}];W=Math.ceil(M/T)-Math.floor(b/T),W>y&&(T=Rl(W*T/y/v)*v),vt(c)||(O=Math.pow(10,c),T=Math.ceil(T*O)/O),s==="ticks"?(I=Math.floor(b/T)*T,z=Math.ceil(M/T)*T):(I=b,z=M),w&&S&&o&&py((l-r)/o,T/1e3)?(W=Math.round(Math.min((l-r)/T,d)),T=(l-r)/W,I=r,z=l):k?(I=w?r:I,z=S?l:z,W=f-1,T=(z-I)/W):(W=(z-I)/T,ds(W,Math.round(W),T/1e3)?W=Math.round(W):W=Math.ceil(W));const Z=Math.max(Nl(T),Nl(I));O=Math.pow(10,vt(c)?Z:c),I=Math.round(I*O)/O,z=Math.round(z*O)/O;let j=0;for(w&&(_&&I!==r?(i.push({value:r}),I<r&&j++,ds(Math.round((I+j*T)*O)/O,r,Hc(r,E,e))&&j++):I<r&&j++);j<W;++j)i.push({value:Math.round((I+j*T)*O)/O});return S&&_&&z!==l?i.length&&ds(i[i.length-1].value,l,Hc(l,E,e))?i[i.length-1].value=l:i.push({value:l}):(!S||z===l)&&i.push({value:z}),i}function Hc(e,t,{horizontal:i,minRotation:n}){const s=ze(n),o=(i?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+e).length;return Math.min(t/o,r)}class Ja extends Yi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return vt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=c=>s=i?s:c,l=c=>o=n?o:c;if(t){const c=$e(s),f=$e(o);c<0&&f<0?l(0):c>0&&f>0&&r(0)}if(s===o){let c=o===0?1:Math.abs(o*.05);l(o+c),t||r(s-c)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,i=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,r=bM(s,o);return t.bounds==="ticks"&&zu(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return Fs(t,this.chart.options.locale,this.options.ticks.format)}}class _r extends Ja{determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=Rt(t)?t:0,this.max=Rt(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),i=t?this.width:this.height,n=ze(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}K(_r,"id","linear"),K(_r,"defaults",{ticks:{callback:eo.formatters.numeric}});const Es=e=>Math.floor(mi(e)),Ri=(e,t)=>Math.pow(10,Es(e)+t);function Zc(e){return e/Math.pow(10,Es(e))===1}function jc(e,t,i){const n=Math.pow(10,i),s=Math.floor(e/n);return Math.ceil(t/n)-s}function MM(e,t){const i=t-e;let n=Es(i);for(;jc(e,t,n)>10;)n++;for(;jc(e,t,n)<10;)n--;return Math.min(n,Es(e))}function wM(e,{min:t,max:i}){t=ve(e.min,t);const n=[],s=Es(t);let o=MM(t,i),r=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,f=Math.round((t-c)*r)/r,d=Math.floor((t-c)/l/10)*l*10;let m=Math.floor((f-d)/Math.pow(10,o)),_=ve(e.min,Math.round((c+d+m*Math.pow(10,o))*r)/r);for(;_<i;)n.push({value:_,major:Zc(_),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(o++,m=2,r=o>=0?1:r),_=Math.round((c+d+m*Math.pow(10,o))*r)/r;const v=ve(e.max,_);return n.push({value:v,major:Zc(v),significand:m}),n}class vr extends Yi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){const n=Ja.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return Rt(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!0);this.min=Rt(t)?Math.max(0,t):null,this.max=Rt(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Rt(this._userMin)&&(this.min=t===Ri(this.min,0)?Ri(this.min,-1):Ri(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:i}=this.getUserBounds();let n=this.min,s=this.max;const o=l=>n=t?n:l,r=l=>s=i?s:l;n===s&&(n<=0?(o(1),r(10)):(o(Ri(n,-1)),r(Ri(s,1)))),n<=0&&o(Ri(s,-1)),s<=0&&r(Ri(n,1)),this.min=n,this.max=s}buildTicks(){const t=this.options,i={min:this._userMin,max:this._userMax},n=wM(i,this);return t.bounds==="ticks"&&zu(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Fs(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=mi(t),this._valueRange=mi(this.max)-mi(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(mi(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}}K(vr,"id","logarithmic"),K(vr,"defaults",{ticks:{callback:eo.formatters.logarithmic,major:{enabled:!0}}});function yr(e){const t=e.ticks;if(t.display&&e.display){const i=ae(t.backdropPadding);return lt(t.font&&t.font.size,Ht.font.size)+i.height}return 0}function PM(e,t,i){return i=Et(i)?i:[i],{w:Iy(e,t.string,i),h:i.length*t.lineHeight}}function Gc(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function SM(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],s=[],o=e._pointLabels.length,r=e.options.pointLabels,l=r.centerPointLabels?Ot/o:0;for(let c=0;c<o;c++){const f=r.setContext(e.getPointLabelContext(c));s[c]=f.padding;const d=e.getPointPosition(c,e.drawingArea+s[c],l),m=$t(f.font),_=PM(e.ctx,m,e._pointLabels[c]);n[c]=_;const v=ye(e.getIndexAngle(c)+l),y=Math.round(Ar(v)),b=Gc(y,d.x,_.w,0,180),M=Gc(y,d.y,_.h,90,270);kM(i,t,v,b,M)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=LM(e,n,s)}function kM(e,t,i,n,s){const o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let l=0,c=0;n.start<t.l?(l=(t.l-n.start)/o,e.l=Math.min(e.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/o,e.r=Math.max(e.r,t.r+l)),s.start<t.t?(c=(t.t-s.start)/r,e.t=Math.min(e.t,t.t-c)):s.end>t.b&&(c=(s.end-t.b)/r,e.b=Math.max(e.b,t.b+c))}function LM(e,t,i){const n=[],s=e._pointLabels.length,o=e.options,r=yr(o)/2,l=e.drawingArea,c=o.pointLabels.centerPointLabels?Ot/s:0;for(let f=0;f<s;f++){const d=e.getPointPosition(f,l+r+i[f],c),m=Math.round(Ar(ye(d.angle+Nt))),_=t[f],v=EM(d.y,_.h,m),y=TM(m),b=CM(d.x,_.w,y);n.push({x:d.x,y:v,textAlign:y,left:b,top:v,right:b+_.w,bottom:v+_.h})}return n}function TM(e){return e===0||e===180?"center":e<180?"left":"right"}function CM(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function EM(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function AM(e,t){const{ctx:i,options:{pointLabels:n}}=e;for(let s=t-1;s>=0;s--){const o=n.setContext(e.getPointLabelContext(s)),r=$t(o.font),{x:l,y:c,textAlign:f,left:d,top:m,right:_,bottom:v}=e._pointLabelItems[s],{backdropColor:y}=o;if(!vt(y)){const b=Hi(o.borderRadius),M=ae(o.backdropPadding);i.fillStyle=y;const w=d-M.left,S=m-M.top,k=_-d+M.width,E=v-m+M.height;Object.values(b).some(T=>T!==0)?(i.beginPath(),Ts(i,{x:w,y:S,w:k,h:E,radius:b}),i.fill()):i.fillRect(w,S,k,E)}$i(i,e._pointLabels[s],l,c+r.lineHeight/2,r,{color:o.color,textAlign:f,textBaseline:"middle"})}}function Lf(e,t,i,n){const{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,At);else{let o=e.getPointPosition(0,t);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=e.getPointPosition(r,t),s.lineTo(o.x,o.y)}}function OM(e,t,i,n,s){const o=e.ctx,r=t.circular,{color:l,lineWidth:c}=t;!r&&!n||!l||!c||i<0||(o.save(),o.strokeStyle=l,o.lineWidth=c,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),Lf(e,i,r,n),o.closePath(),o.stroke(),o.restore())}function IM(e,t,i){return Si(e,{label:i,index:t,type:"pointLabel"})}class hs extends Ja{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ae(yr(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){const{min:t,max:i}=this.getMinMax(!1);this.min=Rt(t)&&!isNaN(t)?t:0,this.max=Rt(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/yr(this.options))}generateTickLabels(t){Ja.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{const s=Tt(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?SM(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,s){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,s))}getIndexAngle(t){const i=At/(this._pointLabels.length||1),n=this.options.startAngle||0;return ye(t*i+ze(n))}getDistanceFromCenterForValue(t){if(vt(t))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(vt(t))return NaN;const i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){const i=this._pointLabels||[];if(t>=0&&t<i.length){const n=i[t];return IM(this.getContext(),t,n)}}getPointPosition(t,i,n=0){const s=this.getIndexAngle(t)-Nt+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:i,top:n,right:s,bottom:o}=this._pointLabelItems[t];return{left:i,top:n,right:s,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:i}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Lf(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,i=this.options,{angleLines:n,grid:s,border:o}=i,r=this._pointLabels.length;let l,c,f;if(i.pointLabels.display&&AM(this,r),s.display&&this.ticks.forEach((d,m)=>{if(m!==0){c=this.getDistanceFromCenterForValue(d.value);const _=this.getContext(m),v=s.setContext(_),y=o.setContext(_);OM(this,v,c,r,y)}}),n.display){for(t.save(),l=r-1;l>=0;l--){const d=n.setContext(this.getPointLabelContext(l)),{color:m,lineWidth:_}=d;!_||!m||(t.lineWidth=_,t.strokeStyle=m,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),f=this.getPointPosition(l,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(f.x,f.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&!i.reverse)return;const f=n.setContext(this.getContext(c)),d=$t(f.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),f.showLabelBackdrop){t.font=d.string,r=t.measureText(l.label).width,t.fillStyle=f.backdropColor;const m=ae(f.backdropPadding);t.fillRect(-r/2-m.left,-o-d.size/2-m.top,r+m.width,d.size+m.height)}$i(t,l.label,0,-o,d,{color:f.color})}),t.restore()}drawTitle(){}}K(hs,"id","radialLinear"),K(hs,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:eo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),K(hs,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),K(hs,"descriptors",{angleLines:{_fallback:"grid"}});const ao={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ge=Object.keys(ao);function zM(e,t){return e-t}function Vc(e,t){if(vt(t))return null;const i=e._adapter,{parser:n,round:s,isoWeekday:o}=e._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),Rt(r)||(r=typeof n=="string"?i.parse(r,n):i.parse(r)),r===null?null:(s&&(r=s==="week"&&(Tn(o)||o===!0)?i.startOf(r,"isoWeek",o):i.startOf(r,s)),+r)}function $c(e,t,i,n){const s=ge.length;for(let o=ge.indexOf(e);o<s-1;++o){const r=ao[ge[o]],l=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((i-t)/(l*r.size))<=n)return ge[o]}return ge[s-1]}function DM(e,t,i,n,s){for(let o=ge.length-1;o>=ge.indexOf(i);o--){const r=ge[o];if(ao[r].common&&e._adapter.diff(s,n,r)>=t-1)return r}return ge[i?ge.indexOf(i):0]}function RM(e){for(let t=ge.indexOf(e)+1,i=ge.length;t<i;++t)if(ao[ge[t]].common)return ge[t]}function qc(e,t,i){if(!i)e[t]=!0;else if(i.length){const{lo:n,hi:s}=Or(i,t),o=i[n]>=t?i[n]:i[s];e[o]=!0}}function NM(e,t,i,n){const s=e._adapter,o=+s.startOf(t[0].value,n),r=t[t.length-1].value;let l,c;for(l=o;l<=r;l=+s.add(l,1,n))c=i[l],c>=0&&(t[c].major=!0);return t}function Uc(e,t,i){const n=[],s={},o=t.length;let r,l;for(r=0;r<o;++r)l=t[r],s[l]=r,n.push({value:l,major:!1});return o===0||!i?n:NM(e,n,s,i)}class As extends Yi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){const n=t.time||(t.time={}),s=this._adapter=new Yx._date(t.adapters.date);s.init(i),fs(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Vc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,i=this._adapter,n=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:l}=this.getUserBounds();function c(f){!r&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!l&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!r||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Rt(s)&&!isNaN(s)?s:+i.startOf(Date.now(),n),o=Rt(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],n=t[t.length-1]),{min:i,max:n}}buildTicks(){const t=this.options,i=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,l=xy(s,o,r);return this._unit=i.unit||(n.autoSkip?$c(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):DM(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:RM(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),Uc(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,n=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;i=Ut(i,0,r),n=Ut(n,0,r),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const t=this._adapter,i=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||$c(o.minUnit,i,n,this._getLabelCapacity(i)),l=lt(s.ticks.stepSize,1),c=r==="week"?o.isoWeekday:!1,f=Tn(c)||c===!0,d={};let m=i,_,v;if(f&&(m=+t.startOf(m,"isoWeek",c)),m=+t.startOf(m,f?"day":r),t.diff(n,i,r)>1e5*l)throw new Error(i+" and "+n+" are too far apart with stepSize of "+l+" "+r);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(_=m,v=0;_<n;_=+t.add(_,l,r),v++)qc(d,_,y);return(_===n||s.bounds==="ticks"||v===1)&&qc(d,_,y),Object.keys(d).sort((b,M)=>b-M).map(b=>+b)}getLabelForValue(t){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(t,n.tooltipFormat):i.format(t,n.displayFormats.datetime)}format(t,i){const s=this.options.time.displayFormats,o=this._unit,r=i||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,i,n,s){const o=this.options,r=o.ticks.callback;if(r)return Tt(r,[t,i,n],this);const l=o.time.displayFormats,c=this._unit,f=this._majorUnit,d=c&&l[c],m=f&&l[f],_=n[i],v=f&&m&&_&&_.major;return this._adapter.format(t,s||(v?m:d))}generateTickLabels(t){let i,n,s;for(i=0,n=t.length;i<n;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const i=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const i=this.options.ticks,n=this.ctx.measureText(t).width,s=ze(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),r=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:n*o+l*r,h:n*r+l*o}}_getLabelCapacity(t){const i=this.options.time,n=i.displayFormats,s=n[i.unit]||n.millisecond,o=this._tickFormatFunction(t,0,Uc(this,[t],this._majorUnit),s),r=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],i,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,n=s.length;i<n;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let i,n;if(t.length)return t;const s=this.getLabels();for(i=0,n=s.length;i<n;++i)t.push(Vc(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Nu(t.sort(zM))}}K(As,"id","time"),K(As,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ba(e,t,i){let n=0,s=e.length-1,o,r,l,c;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=hi(e,"pos",t)),{pos:o,time:l}=e[n],{pos:r,time:c}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=hi(e,"time",t)),{time:o,pos:l}=e[n],{time:r,pos:c}=e[s]);const f=r-o;return f?l+(c-l)*(t-o)/f:l}class xr extends As{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=ba(i,this.min),this._tableRange=ba(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:i,max:n}=this,s=[],o=[];let r,l,c,f,d;for(r=0,l=t.length;r<l;++r)f=t[r],f>=i&&f<=n&&s.push(f);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(r=0,l=s.length;r<l;++r)d=s[r+1],c=s[r-1],f=s[r],Math.round((d+c)/2)!==f&&o.push({time:f,pos:r/(l-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(ba(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return ba(this._table,n*this._tableRange+this._minPos,!0)}}K(xr,"id","timeseries"),K(xr,"defaults",As.defaults);var BM=Object.freeze({__proto__:null,CategoryScale:pr,LinearScale:_r,LogarithmicScale:vr,RadialLinearScale:hs,TimeScale:As,TimeSeriesScale:xr});const FM=[Ux,w1,_M,BM];ai.register(...FM);function WM(e){let t,i;return{c(){t=ut("div"),i=ut("canvas"),Ct(t,"class","canvas svelte-qtbtt3")},m(n,s){kt(n,t,s),tt(t,i),e[2](i)},p:qt,i:qt,o:qt,d(n){n&&wt(t),e[2](null)}}}function HM(e,t,i){let n;Os(e,_t,f=>i(4,n=f));let s,o,r;br(()=>{s=o.getContext("2d"),i(1,r=l())});function l(){return new ai(s,{type:"scatter",data:{datasets:[]},options:Lu})}function c(f){Ba[f?"unshift":"push"](()=>{o=f,i(0,o)})}return e.$$.update=()=>{e.$$.dirty&2&&ls(_t,n.chart.chart=r,n)},[o,r,c]}class ZM extends On{constructor(t){super(),An(this,t,HM,WM,qi,{})}}Bt.defs("EPSG:5316","+proj=tmerc +lat_0=0 +lon_0=-7 +k=0.999997 +x_0=200000 +y_0=-6000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs");async function Tf(e){let t="https://gis.us.fo/arcgis/rest/services/dsm/FO_DSM_2017_2m/ImageServer/identify",i=new URLSearchParams({f:"json",geometry:JSON.stringify({x:e.x,y:e.y,spatialReference:{wkid:5316,latestWkid:5316}}),returnGeometry:"true",returnCatalogItems:"true",geometryType:"esriGeometryPoint",renderingRules:'[{"rasterFunction":"none"}]',returnPixelValues:"false"}),n=await fetch(`${t}?${i}`).then(s=>s.json()).then(s=>s.value).catch(s=>{throw Error("Error fetching GeoTIFF data:",s)});return n=="NoData"?0:Number(n)}const jM="/solar-analysis-faroe-island/assets/CalculateRidgeWorker-40628a57.js";async function GM(e){const t=new Worker(jM,{type:"module"});t.postMessage(e);const i=await VM(t);return t.terminate(),i}function VM(e){return new Promise(t=>{e.onmessage=i=>{t(i.data)}})}ku("#leafletmap").then(()=>{_t.update(e=>(e.map.on("click",t=>$M(t)),e.map.on("contextmenu",t=>e.map.closePopup()),e))});async function $M(e){var t={lat:e.latlng.lat,lng:e.latlng.lng};const i=ws.LatLngToPos(t),n=await Tf(i)+2;_t.update(s=>(s.map.openPopup(qM(t,i,n)),s))}function qM(e,t,i){return Ge.popup({content:()=>{async function n(){let c=r.value,f=await GM(t),d=Av(c,f,e,i);_t.update(m=>(m.map.hasLayer(d.polyline.onMap)||d.polyline.onMap.addTo(m.map),m.map.hasLayer(d.marker.onMap)||d.marker.onMap.addTo(m.map),m.map.fitBounds(d.polyline.onMap.getBounds()),m.map.closePopup(),m.map.openPopup(UM(e,d)),m))}const s=document.createElement("div");s.style.width="100%",s.innerHTML="lng = "+e.lng.toFixed(3)+", lat = "+e.lat.toFixed(3);const o=document.createElement("button");o.style.width="100%",o.innerHTML="Create ridge";const r=document.createElement("input");r.style.width="100%",r.placeholder="Name of location";const l=document.createElement("div");return l.appendChild(s),l.appendChild(r),l.appendChild(o),o.onclick=async()=>n(),l}}).setLatLng(e)}function UM(e,t){function i(){_t.update(s=>(s.map.removeLayer(t.marker.onMap),s.map.removeLayer(t.polyline.onMap),s.stored.ridges.push(t),s))}function n(){_t.update(s=>(s.map.removeLayer(t.marker.onMap),s.map.removeLayer(t.polyline.onMap),s))}return Ge.popup({content:()=>{const s=document.createElement("button");s.innerHTML="Add";const o=document.createElement("button");o.innerHTML="Discard";const r=document.createElement("div");return r.appendChild(s),r.appendChild(o),s.onclick=()=>{i(),Le(_t).map.closePopup()},o.onclick=()=>Le(_t).map.closePopup(),r}}).setLatLng(e).on("remove",()=>n())}function YM(e){let t,i,n=e[0].x+"",s,o,r=e[0].y+"",l,c,f=e[1].lng+"",d,m,_=e[1].lat+"",v,y,b,M;return{c(){t=ut("div"),i=Vt("x="),s=Vt(n),o=Vt("m y="),l=Vt(r),c=Vt("m, lng="),d=Vt(f),m=Vt(" lat="),v=Vt(_),y=Vt(", h="),b=Vt(e[2]),M=Vt("m"),Ct(t,"class","coordinates svelte-pdbk9f")},m(w,S){kt(w,t,S),tt(t,i),tt(t,s),tt(t,o),tt(t,l),tt(t,c),tt(t,d),tt(t,m),tt(t,v),tt(t,y),tt(t,b),tt(t,M)},p(w,[S]){S&1&&n!==(n=w[0].x+"")&&oi(s,n),S&1&&r!==(r=w[0].y+"")&&oi(l,r),S&2&&f!==(f=w[1].lng+"")&&oi(d,f),S&2&&_!==(_=w[1].lat+"")&&oi(v,_),S&4&&oi(b,w[2])},i:qt,o:qt,d(w){w&&wt(t)}}}function XM(e,t,i){let n;Os(e,_t,f=>i(4,n=f));let{pos:s={x:"",y:""}}=t,{crd:o={lng:"",lat:""}}=t,{level:r=""}=t,l=!1;_t.update(f=>(ku("#leafletmap").then(()=>{n.map.on("mousemove",async d=>{l||(l=!0,await c(d),l=!1)})}),f));async function c(f){let d={lat:f.latlng.lat,lng:f.latlng.lng},m=ws.LatLngToAbsPos(d),_=ws.LatLngToPos(d),v=await Tf(m);i(0,s={x:_.x.toFixed(0),y:_.y.toFixed(0)}),i(1,o={lng:d.lng.toFixed(5),lat:d.lat.toFixed(5)}),i(2,r=v.toFixed(0))}return e.$$set=f=>{"pos"in f&&i(0,s=f.pos),"crd"in f&&i(1,o=f.crd),"level"in f&&i(2,r=f.level)},[s,o,r]}class KM extends On{constructor(t){super(),An(this,t,XM,YM,qi,{pos:0,crd:1,level:2})}}function JM(e){let t,i,n,s,o,r,l,c,f,d,m,_,v,y,b,M;return n=new Nv({}),r=new rv({}),c=new KM({}),m=new ZM({}),{c(){t=ut("div"),i=ut("div"),ts(n.$$.fragment),s=Mt(),o=ut("div"),ts(r.$$.fragment),l=Mt(),ts(c.$$.fragment),f=Mt(),d=ut("div"),ts(m.$$.fragment),_=Mt(),v=ut("div"),y=Mt(),b=ut("div"),Ct(i,"class","input svelte-k4xty8"),Ct(o,"class","map svelte-k4xty8"),Ct(d,"class","chart svelte-k4xty8"),Ct(v,"class","row-splitter svelte-k4xty8"),Ct(b,"class","column-splitter svelte-k4xty8"),Ct(t,"class","root svelte-k4xty8")},m(w,S){kt(w,t,S),tt(t,i),mn(n,i,null),tt(t,s),tt(t,o),mn(r,o,null),tt(o,l),mn(c,o,null),tt(t,f),tt(t,d),mn(m,d,null),tt(t,_),tt(t,v),e[1](v),tt(t,y),tt(t,b),M=!0},p:qt,i(w){M||(gn(n.$$.fragment,w),gn(r.$$.fragment,w),gn(c.$$.fragment,w),gn(m.$$.fragment,w),M=!0)},o(w){Qn(n.$$.fragment,w),Qn(r.$$.fragment,w),Qn(c.$$.fragment,w),Qn(m.$$.fragment,w),M=!1},d(w){w&&wt(t),pn(n),pn(r),pn(c),pn(m),e[1](null)}}}function QM(e,t,i){let n;br(()=>{pg({rowGutters:[{track:1,element:n}]})});function s(o){Ba[o?"unshift":"push"](()=>{n=o,i(0,n)})}return[n,s]}class tw extends On{constructor(t){super(),An(this,t,QM,JM,qi,{})}}new tw({target:document.getElementById("app")})});export default ew();
